<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‚ÙŠØ§Ø³ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø¶Ø§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Cairo', sans-serif;
        }

        .test-card {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .test-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .test-card.completed {
            border-color: #10b981;
            background: linear-gradient(135deg, #ecfdf5 0%, #f0fdf4 100%);
        }

        .confidence-option {
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .confidence-option:hover {
            transform: scale(1.02);
        }

        .confidence-option.selected {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            transform: scale(1.05);
        }

        .progress-bar {
            transition: width 0.5s ease;
        }

        .result-card {
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-8">
    <div class="container mx-auto px-4 max-w-4xl">

        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">ğŸ“Š Ù‚ÙŠØ§Ø³ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø¶Ø§</h1>
            <p class="text-lg text-gray-600">Ù‚ÙŠÙ‘Ù… Ù…Ø¯Ù‰ Ø«Ù‚ØªÙƒ ÙÙŠ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³</p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="bg-white rounded-full p-1 shadow-sm">
                <div id="progressBar" class="progress-bar bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full"
                    style="width: 1%"></div>
            </div>
            <p id="progressText" class="text-center text-sm text-gray-600 mt-2">0% Ù…ÙƒØªÙ…Ù„</p>
        </div>

        <!-- Test Cards Container -->
        <div id="testsContainer" class="space-y-6">
            <!-- MBTI Test -->
            <div class="test-card bg-white rounded-xl p-6 shadow-lg" data-test="mbti">
                <div class="flex items-center mb-6">
                    <span class="text-3xl ml-4">ğŸ’­</span>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-800">Ø§Ø®ØªØ¨Ø§Ø± MBTI</h2>
                        <p class="text-gray-600">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø´Ø®ØµÙŠØ©</p>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="question-group">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Ù…Ø§ Ù…Ø¯Ù‰ Ø§Ù‚ØªÙ†Ø§Ø¹Ùƒ Ø¨Ø£Ù† Ø§Ù„Ù†Ù…Ø· Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ø¸Ø§Ù‡Ø±
                            ÙŠÙ†Ø§Ø³Ø¨Ùƒ ÙØ¹Ù„Ø§Ù‹ØŸ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="confidence-option bg-red-50 border-2 border-red-200 rounded-lg p-4 text-center"
                                data-value="0">
                                <span class="block text-lg font-medium">ØºÙŠØ± Ù…Ù‚ØªÙ†Ø¹</span>
                                <span class="text-sm text-gray-600">Ù„Ø§ ÙŠÙ†Ø§Ø³Ø¨Ù†ÙŠ</span>
                            </div>
                            <div class="confidence-option bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 text-center"
                                data-value="1">
                                <span class="block text-lg font-medium">Ù…Ù‚Ø¨ÙˆÙ„</span>
                                <span class="text-sm text-gray-600">ÙŠÙ†Ø§Ø³Ø¨Ù†ÙŠ Ø¬Ø²Ø¦ÙŠØ§Ù‹</span>
                            </div>
                            <div class="confidence-option bg-green-50 border-2 border-green-200 rounded-lg p-4 text-center"
                                data-value="2">
                                <span class="block text-lg font-medium">Ù…Ù‚ØªÙ†Ø¹ Ø¬Ø¯Ø§Ù‹</span>
                                <span class="text-sm text-gray-600">ÙŠÙ†Ø§Ø³Ø¨Ù†ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Ù‡Ù„ Ø£Ø¬Ø¨Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¨Ø«Ù‚Ø© ÙˆØ¨Ø¯ÙˆÙ† ØªØ±Ø¯Ø¯ØŸ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="confidence-option bg-red-50 border-2 border-red-200 rounded-lg p-4 text-center"
                                data-value="0">
                                <span class="block text-lg font-medium">Ù„Ø§</span>
                                <span class="text-sm text-gray-600">ØªØ±Ø¯Ø¯Øª ÙƒØ«ÙŠØ±Ø§Ù‹</span>
                            </div>
                            <div class="confidence-option bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 text-center"
                                data-value="1">
                                <span class="block text-lg font-medium">Ø£Ø­ÙŠØ§Ù†Ø§Ù‹</span>
                                <span class="text-sm text-gray-600">ØªØ±Ø¯Ø¯Øª Ù‚Ù„ÙŠÙ„Ø§Ù‹</span>
                            </div>
                            <div class="confidence-option bg-green-50 border-2 border-green-200 rounded-lg p-4 text-center"
                                data-value="2">
                                <span class="block text-lg font-medium">Ù†Ø¹Ù…</span>
                                <span class="text-sm text-gray-600">Ø£Ø¬Ø¨Øª Ø¨Ø«Ù‚Ø©</span>
                            </div>
                        </div>
                    </div>

                    <div class="question-group">
                        <h3 class="text-lg font-semibold text-gray-700 mb-4">Ù‡Ù„ Ø´Ø¹Ø±Øª Ø£Ù† ÙˆØµÙ Ø§Ù„Ù†Ù…Ø· ÙŠÙ…Ø«Ù‘Ù„ Ø´Ø®ØµÙŠØªÙƒØŸ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="confidence-option bg-red-50 border-2 border-red-200 rounded-lg p-4 text-center"
                                data-value="0">
                                <span class="block text-lg font-medium">Ù„Ø§</span>
                                <span class="text-sm text-gray-600">Ù„Ø§ ÙŠÙ…Ø«Ù„Ù†ÙŠ</span>
                            </div>
                            <div class="confidence-option bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 text-center"
                                data-value="1">
                                <span class="block text-lg font-medium">Ø¬Ø²Ø¦ÙŠØ§Ù‹</span>
                                <span class="text-sm text-gray-600">ÙŠÙ…Ø«Ù„Ù†ÙŠ Ø¬Ø²Ø¦ÙŠØ§Ù‹</span>
                            </div>
                            <div class="confidence-option bg-green-50 border-2 border-green-200 rounded-lg p-4 text-center"
                                data-value="2">
                                <span class="block text-lg font-medium">Ù†Ø¹Ù… ØªÙ…Ø§Ù…Ø§Ù‹</span>
                                <span class="text-sm text-gray-600">ÙŠÙ…Ø«Ù„Ù†ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <!-- Notes Section -->
        <div id="notesSection" class="hidden mt-8">
            <div class="result-card bg-white rounded-xl p-8 shadow-lg">
                <div class="text-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</h2>
                    <p class="text-gray-600">Ø´Ø§Ø±ÙƒÙ†Ø§ Ø±Ø£ÙŠÙƒ ÙˆØ£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</p>
                </div>

                <div class="space-y-6">
                    <!-- Personal Notes -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’­ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
                        <textarea id="personalNotes"
                            placeholder="Ø´Ø§Ø±ÙƒÙ†Ø§ Ø±Ø£ÙŠÙƒ ÙÙŠ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³... Ù‡Ù„ ÙƒÙ†Ø§ ÙˆØ§Ø¶Ø­ØŸ Ù‡Ù„ ÙˆØ§Ø¬Ù‡Øª ØµØ¹ÙˆØ¨Ø§ØªØŸ Ù…Ø§ Ø§Ù†Ø·Ø¨Ø§Ø¹Ùƒ Ø§Ù„Ø¹Ø§Ù…ØŸ"
                            class="w-full h-32 p-4 border-2 border-gray-200 rounded-lg resize-none focus:border-blue-500 focus:outline-none transition-colors"
                            maxlength="500"></textarea>
                        <div class="flex justify-between items-center mt-2">
                            <span id="charCount" class="text-sm text-gray-400">0 Ø­Ø±Ù</span>
                            <span class="text-sm text-gray-400">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 500 Ø­Ø±Ù</span>
                        </div>
                    </div>

                    <!-- Goals Selection -->
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ¯ Ù…Ø§ Ù‡Ø¯ÙÙƒ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ØŸ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <label
                                class="flex items-center space-x-3 space-x-reverse cursor-pointer p-3 rounded-lg hover:bg-white transition-colors">
                                <input type="checkbox" name="goals" class="w-4 h-4 text-blue-600 rounded">
                                <span>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ</span>
                            </label>
                            <label
                                class="flex items-center space-x-3 space-x-reverse cursor-pointer p-3 rounded-lg hover:bg-white transition-colors">
                                <input type="checkbox" name="goals" class="w-4 h-4 text-blue-600 rounded">
                                <span>ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù‡Ù†ÙŠ</span>
                            </label>
                            <label
                                class="flex items-center space-x-3 space-x-reverse cursor-pointer p-3 rounded-lg hover:bg-white transition-colors">
                                <input type="checkbox" name="goals" class="w-4 h-4 text-blue-600 rounded">
                                <span>ÙÙ‡Ù… Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„</span>
                            </label>
                            <label
                                class="flex items-center space-x-3 space-x-reverse cursor-pointer p-3 rounded-lg hover:bg-white transition-colors">
                                <input type="checkbox" name="goals" class="w-4 h-4 text-blue-600 rounded">
                                <span>ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</span>
                            </label>
                            <label
                                class="flex items-center space-x-3 space-x-reverse cursor-pointer p-3 rounded-lg hover:bg-white transition-colors">
                                <input type="checkbox" name="goals" class="w-4 h-4 text-blue-600 rounded">
                                <span>Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ù…Ù‡Ù…Ø©</span>
                            </label>
                            <label
                                class="flex items-center space-x-3 space-x-reverse cursor-pointer p-3 rounded-lg hover:bg-white transition-colors">
                                <input type="checkbox" name="goals" class="w-4 h-4 text-blue-600 rounded">
                                <span>Ø§Ù„ÙØ¶ÙˆÙ„ ÙˆØ§Ù„Ø§Ø³ØªØ·Ù„Ø§Ø¹</span>
                            </label>
                        </div>
                    </div>

                    <!-- Suggestions for Improvement -->
                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„Ù„ØªØ­Ø³ÙŠÙ†</h3>
                        <textarea id="suggestions"
                            placeholder="Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ØŸ Ø£Ø³Ø¦Ù„Ø© Ø¥Ø¶Ø§ÙÙŠØ©ØŸ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø©ØŸ"
                            class="w-full h-24 p-4 border-2 border-gray-200 rounded-lg resize-none focus:border-orange-500 focus:outline-none transition-colors"
                            maxlength="300"></textarea>
                        <div class="flex justify-between items-center mt-2">
                            <span id="suggestionsCount" class="text-sm text-gray-400">0 Ø­Ø±Ù</span>
                            <span class="text-sm text-gray-400">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 300 Ø­Ø±Ù</span>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-center">
                        <button onclick="proceedToResults()"
                            class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105">
                            ğŸ“Š Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="resultsSection" class="hidden mt-8">
            <div class="result-card bg-white rounded-xl p-8 shadow-lg text-center">
                <h2 class="text-3xl font-bold text-gray-800 mb-6">ğŸ“ˆ Ù†ØªØ§Ø¦Ø¬ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬ÙˆØ¯Ø©</h2>

                <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“Š Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ø§Ù…</h3>
                    <div id="overallScore" class="text-4xl font-bold text-indigo-600 mb-2">-</div>
                    <div id="overallLevel" class="text-lg text-gray-700 mb-4">-</div>
                    <div id="recommendation" class="text-gray-600 leading-relaxed">-</div>
                </div>

                <!-- User Notes Display -->
                <div id="userNotesDisplay" class="hidden bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</h3>
                    <div class="space-y-4">
                        <div class="bg-white rounded-lg p-4">
                            <h4 class="font-semibold text-gray-700 mb-2">ğŸ’­ Ø±Ø£ÙŠÙƒ Ø§Ù„Ø¹Ø§Ù…:</h4>
                            <p id="displayedNotes" class="text-gray-600 italic">-</p>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <h4 class="font-semibold text-gray-700 mb-2">ğŸ¯ Ø£Ù‡Ø¯Ø§ÙÙƒ:</h4>
                            <p id="displayedGoals" class="text-gray-600">-</p>
                        </div>
                        <div class="bg-white rounded-lg p-4">
                            <h4 class="font-semibold text-gray-700 mb-2">ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­Ø§ØªÙƒ:</h4>
                            <p id="displayedSuggestions" class="text-gray-600 italic">-</p>
                        </div>
                    </div>
                </div>

                <button onclick="resetTest()"
                    class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105">
                    Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ø£Ø¯Ø§Ø¦Ùƒ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
                </button>
            </div>
        </div>
    </div>

    <!-- Footer - Developer Credits -->
    <footer class="mt-16 py-8 bg-gradient-to-r from-gray-800 to-gray-900 text-white">
        <div class="container mx-auto px-4 max-w-4xl">
            <div class="text-center space-y-4">
                <!-- Arabic Credits -->
                <div class="space-y-2 border-t border-gray-600 pt-6">
                    <h3 class="text-xl font-bold text-blue-300">ğŸ‘¨â€ğŸ’» ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©</h3>
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4 text-lg">
                        <div class="flex items-center gap-2">
                            <span class="text-yellow-400">ğŸ§ </span>
                            <span class="font-semibold">Ø­Ù…Ø¯ Ø§Ù„Ø³Ù„ÙŠÙ…</span>
                        </div>
                        <span class="hidden sm:inline text-gray-400">&</span>
                        <div class="flex items-center gap-2">
                            <span class="text-yellow-400">ğŸ§ </span>
                            <span class="font-semibold">Ø¹Ø¨Ø¯Ø§Ù„Ø³Ù„Ø§Ù… Ø§Ù„Ø´Ø±Ù‚ÙŠ</span>
                        </div>
                    </div>
                    <div class="flex justify-center items-center gap-2 text-sm text-orange-300 mt-2">
                        <span class="text-orange-400">ğŸ”¥</span>
                        <span>Nickname: Spark_HA</span>
                        <span class="text-orange-400">âš¡</span>
                    </div>
                </div>
                <!-- English Credits -->
                <div class="space-y-2 border-t border-gray-600 pt-4">
                    <h3 class="text-xl font-bold text-blue-300">ğŸ’¼ Developed by</h3>
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4 text-lg">
                        <div class="flex items-center gap-2">
                            <span class="text-yellow-400">ğŸ§ </span>
                            <span class="font-semibold">Hamad Al-Saleem</span>
                        </div>
                        <span class="hidden sm:inline text-gray-400">&</span>
                        <div class="flex items-center gap-2">
                            <span class="text-yellow-400">ğŸ§ </span>
                            <span class="font-semibold">Abdulsalam Al-Sharqi</span>
                        </div>
                    </div>
                </div>
                <!-- Copyright -->
                <div class="border-t border-gray-600 pt-4">
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-2 text-sm text-gray-300">
                        <span class="flex items-center gap-1">
                            <span>Â©ï¸</span>
                            <span>2025</span>
                        </span>
                        <span class="hidden sm:inline">â€¢</span>
                        <span>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© â€” All Rights Reserved</span>
                        <span class="text-yellow-400">ğŸŒŸ</span>
                    </div>
                </div>
                <!-- Decorative Elements -->
                <div class="flex justify-center gap-4 pt-4">
                    <div class="w-2 h-2 bg-blue-400 rounded-full animate-pulse"></div>
                    <div class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse" style="animation-delay: 0.5s;"></div>
                    <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse" style="animation-delay: 1s;"></div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        let testScores = {
            holland: [],
            mbti: [],
            mi: []
        };

        let totalQuestions = 3;
        let answeredQuestions = 0;

        // Character counter for notes
        document.addEventListener('DOMContentLoaded', function () {

            const notesTextarea = document.getElementById('personalNotes');
            const charCount = document.getElementById('charCount');
            const suggestionsTextarea = document.getElementById('suggestions');
            const suggestionsCount = document.getElementById('suggestionsCount');

            if (notesTextarea && charCount) {
                notesTextarea.addEventListener('input', function () {
                    const count = this.value.length;
                    charCount.textContent = count + ' Ø­Ø±Ù';

                    if (count > 500) {
                        charCount.classList.add('text-red-500');
                        charCount.classList.remove('text-gray-400');
                    } else {
                        charCount.classList.remove('text-red-500');
                        charCount.classList.add('text-gray-400');
                    }
                });
            }

            if (suggestionsTextarea && suggestionsCount) {
                suggestionsTextarea.addEventListener('input', function () {
                    const count = this.value.length;
                    suggestionsCount.textContent = count + ' Ø­Ø±Ù';

                    if (count > 300) {
                        suggestionsCount.classList.add('text-red-500');
                        suggestionsCount.classList.remove('text-gray-400');
                    } else {
                        suggestionsCount.classList.remove('text-red-500');
                        suggestionsCount.classList.add('text-gray-400');
                    }
                });
            }
        });

        // Handle option selection
        document.addEventListener('click', function (e) {
            if (e.target.closest('.confidence-option')) {
                const option = e.target.closest('.confidence-option');
                const questionGroup = option.closest('.question-group');
                const testCard = option.closest('.test-card');
                const testType = testCard.dataset.test;
                const value = parseInt(option.dataset.value);

                // Remove previous selection in this question group
                questionGroup.querySelectorAll('.confidence-option').forEach(opt => {
                    opt.classList.remove('selected');
                });

                // Add selection to clicked option
                option.classList.add('selected');

                // Store the answer
                const questionIndex = Array.from(testCard.querySelectorAll('.question-group')).indexOf(questionGroup);
                if (!testScores[testType][questionIndex]) {
                    answeredQuestions++;
                }
                testScores[testType][questionIndex] = value;

                // Update progress
                updateProgress();

                // Check if test is complete
                checkTestCompletion(testCard, testType);

                // Check if all tests are complete
                if (answeredQuestions === totalQuestions) {
                    setTimeout(showNotesSection, 500);
                }
            }
        });

        function updateProgress() {
            const progress = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = Math.round(progress) + '% Ù…ÙƒØªÙ…Ù„';
        }

        function checkTestCompletion(testCard, testType) {
            const questionsInTest = testCard.querySelectorAll('.question-group').length;
            if (testScores[testType].length === questionsInTest && testScores[testType].every(score => score > 0)) {
                testCard.classList.add('completed');
            }
        }

        function calculateTestScore(scores) {
            const sum = scores.reduce((a, b) => a + b, 0);
            const average = sum / scores.length;
            const percentage = ((average) / 2) * 100;
            return Math.round(percentage);
        }

        function getConfidenceLevel(score) {
            if (score >= 80) return { level: 'Ø«Ù‚Ø© Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹', color: 'text-green-600' };
            if (score >= 60) return { level: 'Ø«Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©', color: 'text-green-500' };
            if (score >= 40) return { level: 'Ø«Ù‚Ø© Ù…ØªÙˆØ³Ø·Ø©', color: 'text-yellow-500' };
            if (score >= 20) return { level: 'Ø«Ù‚Ø© Ù…Ù†Ø®ÙØ¶Ø©', color: 'text-orange-500' };
            return { level: 'Ø«Ù‚Ø© Ù…Ù†Ø®ÙØ¶Ø© Ø¬Ø¯Ø§Ù‹', color: 'text-red-500' };
        }

        function getOverallRecommendation(overallScore) {
            if (overallScore >= 80) {
                return 'Ù…Ù…ØªØ§Ø²! Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…ÙˆØ«ÙˆÙ‚Ø© Ø¬Ø¯Ø§Ù‹ ÙˆÙŠÙ…ÙƒÙ† Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„ÙŠÙ‡Ø§ ÙÙŠ Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ© ÙˆØ§Ù„Ø´Ø®ØµÙŠØ©.';
            } else if (overallScore >= 60) {
                return 'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…ÙˆØ«ÙˆÙ‚Ø© Ø¥Ù„Ù‰ Ø­Ø¯ ÙƒØ¨ÙŠØ±ØŒ Ù„ÙƒÙ† Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¨Ø¹Ø¶ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª.';
            } else if (overallScore >= 40) {
                return 'Ù…ØªÙˆØ³Ø·. Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù‚Ø¨ÙˆÙ„Ø© Ù„ÙƒÙ† ÙŠÙÙ†ØµØ­ Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø£ÙƒØ«Ø± Ø£Ùˆ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø®ØªØµ.';
            } else {
                return 'Ù…Ù†Ø®ÙØ¶. ÙŠÙÙ†ØµØ­ Ø¨Ø´Ø¯Ø© Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙÙŠ ÙˆÙ‚Øª Ø¢Ø®Ø± Ø£Ùˆ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø®ØªØµ Ù„ÙÙ‡Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„.';
            }
        }

        function showNotesSection() {
            document.getElementById('resultsSection').classList.add('hidden');

            document.getElementById('notesSection').classList.remove('hidden');
            document.getElementById('notesSection').scrollIntoView({ behavior: 'smooth' });
        }

        let notes;
        let suggestions;
        let selectedGoals;
        function proceedToResults() {
            // Get user notes, goals, and suggestions
            notes = document.getElementById('personalNotes').value.trim();
            suggestions = document.getElementById('suggestions').value.trim();
            selectedGoals = Array.from(document.querySelectorAll('input[name="goals"]:checked'))
                .map(checkbox => checkbox.nextElementSibling.textContent);

            // Store notes for display in results
            displayUserNotes(notes, selectedGoals, suggestions);

            // Hide notes section and show results
            document.getElementById('notesSection').classList.add('hidden');
            showResults();
        }

        function displayUserNotes(notes, goals, suggestions) {
            const notesDisplay = document.getElementById('userNotesDisplay');
            const displayedNotes = document.getElementById('displayedNotes');
            const displayedGoals = document.getElementById('displayedGoals');
            const displayedSuggestions = document.getElementById('displayedSuggestions');

            // Display notes
            if (notes) {
                displayedNotes.textContent = notes;
            } else {
                displayedNotes.textContent = 'Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©';
                displayedNotes.classList.add('text-gray-400');
            }

            // Display goals
            if (goals.length > 0) {
                displayedGoals.textContent = goals.join(' â€¢ ');
            } else {
                displayedGoals.textContent = 'Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø£Ù‡Ø¯Ø§Ù Ù…Ø­Ø¯Ø¯Ø©';
                displayedGoals.classList.add('text-gray-400');
            }

            // Display suggestions
            if (suggestions) {
                displayedSuggestions.textContent = suggestions;
            } else {
                displayedSuggestions.textContent = 'Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª';
                displayedSuggestions.classList.add('text-gray-400');
            }

            notesDisplay.classList.remove('hidden');
        }

        function showResults() {

            // const hollandScore = calculateTestScore(testScores.holland);
            const mbtiScore = calculateTestScore(testScores.mbti);
            // const miScore = calculateTestScore(testScores.mi);
            const overallScore = Math.round(mbtiScore);
            document.getElementById('overallScore').textContent = overallScore + '%';


            // Update confidence levels
            const overallLevel = getConfidenceLevel(overallScore);
            // const hollandLevel = getConfidenceLevel(hollandScore);
            const mbtiLevel = getConfidenceLevel(mbtiScore);
            // const miLevel = getConfidenceLevel(miScore);
            // console.log({ hollandLevel, mbtiLevel, miLevel, overallLevel })
            console.log(notes, selectedGoals, suggestions)
            const qus = [...document.querySelectorAll(".question-group")].map(x => { return { name: x.querySelector("h3").innerText, val: x.querySelector("div.selected").dataset.value } })
            console.log({ qus, notes, selectedGoals, suggestions })
            var data = new URLSearchParams();
            data.append('data', JSON.stringify({ qus, notes, selectedGoals, suggestions }));
            data.append('type', 'p2rate');
            data.append('ob', '1');
            fetch('saveExam', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
                },
                body: data
            }).catch(() => {
                alert("Ø­ØµÙ„Øª Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¯ ØªØ¶Ø·Ø± Ø§Ù„Ù‰ Ø§Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±")
            }).finally(() => {
                document.getElementById('overallLevel').textContent = overallLevel.level;
                document.getElementById('overallLevel').className = 'text-lg mb-4 ' + overallLevel.color;
                // Update recommendation
                document.getElementById('recommendation').textContent = getOverallRecommendation(overallScore);
                // Show results section
                document.getElementById('resultsSection').classList.remove('hidden');
                document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
            })


        }

        function resetTest() {
            // location.reload();
            location.href = "/"
        }
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'98047c5a72e77892',t:'MTc1ODA2ODkzMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>