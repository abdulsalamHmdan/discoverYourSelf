<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار الذكاءات المتعددة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap');

        * {
            font-family: 'Tajawal', sans-serif;
        }

        .intelligence-icon {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .intelligence-icon:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }

        .progress-circle {
            transform: rotate(-90deg);
        }

        .breathing-circle {
            animation: breathe 8s infinite;
        }

        @keyframes breathe {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .question-transition {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .question-exit {
            opacity: 0;
            transform: translateX(-30px);
        }

        .question-enter {
            opacity: 0;
            transform: translateX(30px);
        }

        .question-active {
            opacity: 1;
            transform: translateX(0);
        }

        .tooltip {
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s;
        }

        .intelligence-icon:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        .drag-item {
            cursor: grab;
            transition: all 0.2s;
        }

        .drag-item:active {
            cursor: grabbing;
            transform: rotate(5deg);
        }

        .drop-zone {
            min-height: 100px;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background-color: #e0f2fe;
            border-color: #0284c7;
        }

        @media print {
            .noP {
                display: none;
            }


        }
    </style>
</head>


<!-- ✅ الهيدر المعدّل (مسافة صغيرة بينه وبين المحتوى) -->
<header class="bg-gradient-to-r from-indigo-400 to-purple-600 text-white py-6 shadow-md">
  <div class="container mx-auto px-6">
    <h1 class="text-4xl font-extrabold text-center mb-1 drop-shadow">
      📄 تقرير الميول المهنية – مقياس هولاند (RIASEC)
    </h1>
    <p class="text-center text-indigo-100 text-lg">
      ضمن مقاييس منصة بصيرة لاكتشاف الذات
    </p>
  </div>
</header>

    <div id="results-screen" class="container mx-auto px-4 py-8 max-w-6xl">
        <div class="text-center mb-8">
            <h2 class="text-4xl font-bold text-indigo-800 mb-4">
<div class="bg-gradient-to-br from-slate-800/90 via-slate-600 to-gray-700 backdrop-blur-xl border border-indigo-400/20 rounded-2xl shadow-2xl p-12 text-white leading-relaxed mt-8">
  <h2 class="text-4xl font-bold mb-4 text-center text-indigo-300 drop-shadow">
    📄 تقرير الذكاءات المتعددة – مقياس الذكاءات المتعددة
  </h2>

  <p class="text-center text-x1 opacity-100 mb-1">
    ضمن مقاييس <span class="text-indigo-300 font-semibold">منصة بصيرة لاكتشاف الذات</span>
  </p>

  <p class="text-x2 text-white-600">مرحبًا <span id="resultUserName"
                    class="font-semibold text-yellow-200"></span></p>

  <p class="text-right text-xl opacity-95 mb-6">
    يسعدنا أن يكون بين يديك التقرير الخاص بك ضمن مقاييس <span class="text-indigo-300 font-semibold">منصة بصيرة لاكتشاف الذات</span>، 
    أُعد هذا التقرير لمساعدتك على <span class="font-semibold">اكتشاف نوع الذكاءات التي تميزك</span> 
    وتحديد <span class="font-semibold">أساليب التعلم والمجالات الدراسية والمهنية</span> 
    التي تتناسب مع قدراتك وشخصيتك.
  </p>

  <p class="text-right text-xl opacity-95 mb-6">
    يعتمد التقرير على <span class="font-semibold">نظرية الذكاءات المتعددة</span> للعالم 
    <span class="text-indigo-300 font-semibold">هوارد جاردنر (Howard Gardner)</span>، 
    التي تؤكد أن الذكاء ليس نوعًا واحدًا يُقاس بالاختبارات التقليدية، 
    بل هو مجموعة من <span class="font-semibold">القدرات المتنوعة</span> 
    التي يمتلكها كل إنسان بدرجات مختلفة.
  </p>

  <p class="text-right text-2xl font-bold text-indigo-300 mt-10 mb-4">
    🧠 يقيس المقياس ثمانية أنواع رئيسة تمثل مجالات الذكاء الإنساني:
  </p>

  <ul class="list-decimal list-inside text-right text-xl opacity-95 space-y-2 mx-auto max-w-3xl">
    <li>الذكاء اللغوي</li>
    <li>الذكاء المنطقي الرياضي</li>
    <li>الذكاء المكاني البصري</li>
    <li>الذكاء الجسمي الحركي</li>
    <li>الذكاء الموسيقي</li>
    <li>الذكاء الاجتماعي (بين الأشخاص)</li>
    <li>الذكاء الشخصي (الذاتي)</li>
    <li>الذكاء الطبيعي</li>
  </ul>

  <p class="text-right text-xl opacity-95 mt-8">
    ومن خلال تحليل أنماط ذكاءاتك، يُقدَّم تصور شامل عن <span class="font-semibold">قدراتك وطرائق تعلمك المفضلة</span>، 
    إضافة إلى <span class="font-semibold">توصيات عملية</span> تساعدك على اتخاذ قرارات أكاديمية ومهنية أكثر وعيًا واتزانًا.
  </p>
</div>
            </h2>
        </div>
        <div class="bg-gradient-to-br from-slate-800/90 via-slate-600 to-gray-700 backdrop-blur-xl border border-indigo-400/20 rounded-3xl shadow-2xl p-12 text-white leading-relaxed mt-12">
  <h2 class="text-4xl font-bold mb-10 text-center text-indigo-300 drop-shadow">
    💡 نصائح قبل قراءة التقرير
  </h2>

  <ul class="list-disc list-inside text-right text-xl opacity-95 space-y-5 mx-auto max-w-4xl">
    <li>تذكّر أن نتائج هذا التقرير تمثّل انعكاسًا لميولك الحالية، وليست حكمًا ثابتًا على شخصيتك أو قدراتك.</li>
    <li>يساعدك التقرير على فهم ذاتك وتوسيع وعيك المهني، وليس على حصر اختياراتك.</li>
    <li>اقرأ النتائج بعقل منفتح واعتبرها فرصة لاكتشاف زوايا جديدة في شخصيتك.</li>
    <li>ركّز على الميول الأعلى دون إهمال الميول المتوسطة أو الثانوية، فقد تكون داعمة لمسارك المهني.</li>
    <li>تذكّر أن الاهتمامات تتغيّر بمرور الوقت، لذلك يُفضّل إعادة القياس بعد مرحلة دراسية أو عملية جديدة.</li>
    <li>ناقش نتائجك مع مستشارك المهني أو الأكاديمي لتحديد المسار الأنسب لك.</li>
    <li>استخدم ما ستقرأه لتخطّط لمسار يجمع بين الشغف، المهارة، والفرصة.</li>
  </ul>

  <p class="font-semibold text-indigo-300 text-2xl mt-6 text-center">
    🎯 هدف هذا التقرير هو أن تعرف نفسك لتختار بوعي، لا أن تُقيّد نفسك بنتيجة واحدة.
  </p>

  

 <!-- المسافة الفاصلة قبل الأقسام التالية -->
<div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
</div>

        <!-- ملخص نمط الذكاءات -->
        <div
            class="bg-gradient-to-r from-indigo-50 to-slate-200 rounded-2xl shadow-lg p-6 mb-8 border border-indigo-200">
            <h3 class="text-2xl font-bold text-center mb-6 text-indigo-800 flex items-center justify-center gap-3">
                <span class="text-3xl">🧠</span>
                نمط ذكاءاتك المتعددة
            </h3>
            <div id="intelligencePattern" class="text-center">
                <!-- سيتم إدراج نمط الذكاءات هنا -->
            </div>
        </div>

        <!-- أقل 3 ذكاءات - مجالات للتطوير -->
        <div class="bg-indigo-50 rounded-2xl shadow-lg p-6 mb-8">
         <h3 class="text-3xl font-bold text-center mb-3 flex items-center justify-center gap-3" 
    style="color: #5f55bc;">
  <span class="text-4xl">📈</span>
  مجالات للتطوير والنمو
</h3>


            <p class="text-center text-gray-600 mb-6">هذه الذكاءات تحتاج لمزيد من الاهتمام والتطوير</p>
            <div id="lowestIntelligences" class="grid md:grid-cols-3 gap-6">
                <!-- سيتم إدراج أقل 3 ذكاءات هنا -->
            </div>
        </div>

        <div class="grid lg:grid-cols-1 gap-8 mb-8">
           <div class="bg-gray-100 rounded-2xl shadow-lg p-6">
  <h3 class="text-2xl font-bold text-center mb-4 text-indigo-600 drop-shadow-md">
    🧩 توزيع ذكاءاتك
  </h3>
  <div class="relative">
    <canvas id="resultsChart" width="400" height="400"></canvas>
  </div>
</div>


<!-- أعلى 3 ذكاءات -->
<div class="bg-white rounded-2xl shadow-lg p-6">
  <h3 class="text-2xl font-bold text-center mb-4 text-indigo-600 drop-shadow-md">
    🏆 أعلى ذكاءاتك
  </h3>
  <div id="topIntelligences" class="space-y-4">
    <!-- سيتم إدراجها بـ JavaScript -->
  </div>
</div>


       <!-- ✅ التوصيات الشخصية -->
<div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
  <h3 class="text-2xl font-bold text-center mb-6 flex items-center justify-center gap-3 text-indigo-600 drop-shadow-md">
    <span class="text-3xl">🎯</span>
    توصيات شخصية لك
  </h3>

  <div id="personalRecommendations" class="grid md:grid-cols-2 gap-6">
    <!-- سيتم إدراجها بـ JavaScript -->
  </div>
</div>


       <!-- ✅ خطة التطوير الشخصية -->
<div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
  <h3 class="text-2xl font-bold text-center mb-6 flex items-center justify-center gap-3 text-indigo-600 drop-shadow-md">
    <span class="text-3xl">📈</span>
    خطة التطوير الشخصية
  </h3>

  <div id="developmentPlan" class="grid md:grid-cols-2 gap-6">
    <!-- سيتم إدراجها بـ JavaScript -->
  </div>
</div>

<!-- ✅ التفاصيل الكاملة -->
<div class="bg-white rounded-2xl shadow-lg p-6 mb-8">
  <h3 class="text-2xl font-bold text-center mb-6 text-indigo-600 drop-shadow-md">
    🧠 تفاصيل شاملة لكل ذكاء
  </h3>

  <div id="detailedResults" class="space-y-6">
    <!-- سيتم إدراجها بـ JavaScript -->
  </div>
</div>

<!-- ✅ نصائح عملية بعد قراءة التقرير -->
<div class="bg-gradient-to-br from-slate-800/90 via-slate-600 to-gray-8 backdrop-blur-xl border border-indigo-400/20 rounded-3xl shadow-2xl p-12 text-white leading-relaxed mt-12">
  <h2 class="text-4xl font-bold mb-10 text-center text-indigo-300 drop-shadow">
    🧭 نصائح عملية بعد قراءة التقرير
  </h2>

  <p class="text-lg text-center mb-10 opacity-90 max-w-3xl mx-auto">
    بعد انتهائك من قراءة هذا التقرير وفهم نتائجك، اجعل الخطوة التالية تطبيقية وواعية.  
    فالقيمة الحقيقية للمقياس تكمن في 
    <span class="text-indigo-300 font-semibold">تحويل المعرفة إلى فعلٍ ملموس</span> 
    يقودك نحو تطوير ذاتك ومسارك المهني.
  </p>

  <div class="text-right text-xl opacity-95 space-y-6 mx-auto max-w-5xl">
    <p>✍️ <span class="font-semibold text-indigo-300">اكتب خلاصة ما تعلّمته عن نفسك</span> في نقاط محددة — ما الذي جذبك؟ وما الذي فاجأك؟</p>

    <p>🎯 <span class="font-semibold text-indigo-300">اختر مسارين محتملين</span> من التخصصات أو المهن المقترحة، وابدأ بالبحث الجاد عنها (المتطلبات، بيئة العمل، فرص التطور).</p>

    <p>🗣️ <span class="font-semibold text-indigo-300">ناقش نتائجك</span> مع شخص مختص أو موجّه مهني ليساعدك على فهم النتائج وربطها بقدراتك الواقعية.</p>

    <p>🧩 <span class="font-semibold text-indigo-300">جرّب الأنشطة المرتبطة بميولك</span> (تطوع، تدريب، مشروع صغير) لتتأكد أنك تستمتع فعلاً بهذا المجال.</p>

    <p>📅 <span class="font-semibold text-indigo-300">ضع خطة قصيرة المدى (30 يومًا)</span> لتطوير مهارة أو معرفة في مجال ميولك الأعلى.</p>

    <p>🕊️ <span class="font-semibold text-indigo-300">تذكّر أن المقياس دليل لا قرار</span> — استخدمه كخريطة ترشدك، لا كقيد يحدّك.</p>

    <p>💡 <span class="font-semibold text-indigo-300">أعد القياس مستقبلاً</span> بعد مرحلة دراسية أو مهنية جديدة لتتابع تطور ميولك واتجاهاتك.</p>
  </div>

  <hr class="border-t border-indigo-500/30 my-12 w-3/4 mx-auto">

  <p class="text-3xl text-center text-indigo-300 font-semibold drop-shadow">
    🎓 هدف <span class="text-white font-bold">«بصيرة»</span> أن تبني مستقبلك بخطوات واعية  
    تجمع بين <span class="text-indigo-200 font-semibold">شغفك، قدراتك، وفرصك الحقيقية</span>.
  </p>
</div>



        <!-- أزرار الإجراءات -->
        <% if(from=="show" ) { %>
            <div class="flex flex-wrap justify-center gap-4 noP">
                <button id="downloadPdfBtn"
                    class="bg-red-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2">
                    📄 حفظ كـ PDF
                </button>
                <button onclick="(()=>{history.back()})()"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors flex items-center gap-2">
                    <span>↪️</span>
                    <span>عودة</span>
                </button>
            </div>
            <% } %>

    </div>
    <script>
        // بيانات الاختبار
        const intelligences = {
            linguistic: { name: 'لغوي/لفظي', icon: '📚', color: '#ef4444' },
            logical: { name: 'منطقي/رياضي', icon: '🔢', color: '#f97316' },
            spatial: { name: 'بصري/مكاني', icon: '🎨', color: '#eab308' },
            bodily: { name: 'جسدي/حركي', icon: '🏃', color: '#22c55e' },
            musical: { name: 'إيقاعي', icon: '🎵', color: '#06b6d4' },
            interpersonal: { name: 'اجتماعي', icon: '👥', color: '#3b82f6' },
            intrapersonal: { name: 'ذاتي', icon: '🎭', color: '#8b5cf6' },
            naturalist: { name: 'طبيعي/بيئي', icon: '🌿', color: '#10b981' }
        };

        // تفاصيل شاملة لكل نوع ذكاء
        const intelligenceDetails = {
            linguistic: {
                description: 'يتميز الأشخاص ذوو الذكاء اللغوي بحبهم للكلمات والقراءة والكتابة. يتعلمون بشكل أفضل من خلال الاستماع والتحدث والقراءة، ولديهم قدرة عالية على التعبير عن أنفسهم بوضوح.',
                strengths: [
                    'التعبير الواضح والبليغ',
                    'حفظ المعلومات اللفظية بسهولة',
                    'فهم قواعد اللغة والنحو',
                    'الاستمتاع بالقراءة والكتابة',
                    'القدرة على الإقناع والتأثير بالكلمات'
                ],
                learningMethods: [
                    'القراءة بصوت عالٍ',
                    'كتابة الملاحظات والملخصات',
                    'المناقشات والحوارات',
                    'الاستماع للمحاضرات والبودكاست',
                    'استخدام الكلمات المفتاحية والمرادفات'
                ],
                activities: [
                    'كتابة اليوميات والقصص',
                    'قراءة الكتب والروايات',
                    'المشاركة في النقاشات الأدبية',
                    'تعلم لغات جديدة',
                    'كتابة الشعر والخواطر',
                    'المشاركة في المسابقات الثقافية'
                ],
                careers: [
                    'كاتب ومؤلف',
                    'صحفي ومراسل',
                    'مترجم',
                    'محامي',
                    'مدرس لغة',
                    'محرر ومدقق لغوي',
                    'مذيع إذاعي وتلفزيوني',
                    'شاعر وأديب'
                ]
            },
            logical: {
                description: 'يتميز أصحاب الذكاء المنطقي بحبهم للأرقام والأنماط والتحليل المنطقي. يستمتعون بحل المشكلات المعقدة ويفضلون التفكير المنهجي والمنطقي في جميع جوانب الحياة.',
                strengths: [
                    'التفكير التحليلي والمنطقي',
                    'حل المشكلات المعقدة',
                    'فهم الأنماط والعلاقات',
                    'العمل مع الأرقام والإحصائيات',
                    'التخطيط المنهجي والتنظيم'
                ],
                learningMethods: [
                    'حل المسائل والتمارين العملية',
                    'استخدام الرسوم البيانية والجداول',
                    'التعلم خطوة بخطوة',
                    'ربط المعلومات بالأسباب والنتائج',
                    'استخدام الأمثلة الرقمية والإحصائية'
                ],
                activities: [
                    'حل الألغاز والأحاجي الرياضية',
                    'لعب الشطرنج والألعاب الاستراتيجية',
                    'البرمجة وتطوير التطبيقات',
                    'إجراء التجارب العلمية',
                    'تحليل البيانات والإحصائيات',
                    'دراسة الفلسفة والمنطق'
                ],
                careers: [
                    'مهندس',
                    'عالم رياضيات',
                    'محاسب ومحلل مالي',
                    'مبرمج ومطور برمجيات',
                    'عالم فيزياء أو كيمياء',
                    'محلل بيانات',
                    'باحث علمي',
                    'مستشار إداري'
                ]
            },
            spatial: {
                description: 'يتميز أصحاب الذكاء البصري المكاني بقدرتهم على التفكير بالصور والأشكال. يتعلمون بشكل أفضل من خلال الرؤية والتخيل، ولديهم حس فني قوي وقدرة على تصور الأشياء في الفضاء.',
                strengths: [
                    'التفكير البصري والتخيل',
                    'فهم الخرائط والمخططات',
                    'الحس الفني والجمالي',
                    'تذكر الوجوه والأماكن',
                    'القدرة على التصميم والإبداع البصري'
                ],
                learningMethods: [
                    'استخدام الصور والرسوم التوضيحية',
                    'عمل الخرائط الذهنية',
                    'التعلم بالألوان والرموز',
                    'مشاهدة الفيديوهات التعليمية',
                    'استخدام النماذج ثلاثية الأبعاد'
                ],
                activities: [
                    'الرسم والتصوير',
                    'التصميم الجرافيكي',
                    'النحت والأعمال الفنية',
                    'التصوير الفوتوغرافي',
                    'بناء النماذج والمجسمات',
                    'ترتيب وتنسيق المساحات'
                ],
                careers: [
                    'مصمم جرافيك',
                    'مهندس معماري',
                    'فنان تشكيلي',
                    'مصور فوتوغرافي',
                    'مصمم داخلي',
                    'رسام كاريكاتير',
                    'مخرج سينمائي',
                    'مصمم ألعاب'
                ]
            },
            bodily: {
                description: 'يتميز أصحاب الذكاء الجسدي الحركي بحبهم للحركة والنشاط البدني. يتعلمون بشكل أفضل من خلال التجربة العملية واستخدام أجسامهم، ولديهم مهارات حركية متقدمة وتناسق جيد.',
                strengths: [
                    'التناسق الحركي والمهارات البدنية',
                    'التعلم من خلال التجربة العملية',
                    'استخدام اليدين بمهارة',
                    'التعبير بلغة الجسد',
                    'ردود الفعل السريعة والدقيقة'
                ],
                learningMethods: [
                    'التعلم بالممارسة والتجربة',
                    'الحركة أثناء الدراسة',
                    'استخدام الأدوات والمواد الملموسة',
                    'التعلم في الهواء الطلق',
                    'الأنشطة التفاعلية والعملية'
                ],
                activities: [
                    'ممارسة الرياضة والألعاب',
                    'الرقص والحركات الإيقاعية',
                    'الأعمال اليدوية والحرف',
                    'الطبخ والخبز',
                    'البستنة والزراعة',
                    'التمثيل والأداء المسرحي'
                ],
                careers: [
                    'رياضي محترف',
                    'مدرب رياضي',
                    'راقص أو مصمم رقصات',
                    'جراح',
                    'حرفي ماهر',
                    'طبيب علاج طبيعي',
                    'ممثل',
                    'طيار'
                ]
            },
            musical: {
                description: 'يتميز أصحاب الذكاء الإيقاعي بحساسيتهم للأصوات والإيقاعات والأنماط المنتظمة. يحبون النظام والتكرار المنتظم، ويتعلمون بشكل أفضل في بيئة منظمة ومنتظمة.',
                strengths: [
                    'ملاحظة الأنماط والإيقاعات',
                    'الحساسية للأصوات والنغمات',
                    'التنظيم والترتيب المنهجي',
                    'التعلم بالتكرار المنتظم',
                    'إدارة الوقت والجداول الزمنية'
                ],
                learningMethods: [
                    'التعلم بالإيقاع والتكرار',
                    'استخدام الجداول الزمنية المنتظمة',
                    'التعلم في بيئة هادئة ومنظمة',
                    'ربط المعلومات بالأنماط',
                    'استخدام الأصوات والنغمات في التعلم'
                ],
                activities: [
                    'الاستماع للموسيقى والأصوات الطبيعية',
                    'تنظيم الأعمال بجداول زمنية',
                    'ممارسة التمارين بإيقاع منتظم',
                    'تعلم الآلات الموسيقية',
                    'إنشاء قوائم وجداول منظمة',
                    'ممارسة التأمل والاسترخاء'
                ],
                careers: [
                    'موسيقي أو عازف',
                    'منظم فعاليات',
                    'مدير مشاريع',
                    'محاسب',
                    'مدرب تنمية بشرية',
                    'مهندس صوت',
                    'مدير إداري',
                    'مطور أنظمة'
                ]
            },
            interpersonal: {
                description: 'يتميز أصحاب الذكاء الاجتماعي بقدرتهم على فهم الآخرين والتواصل معهم بفعالية. يحبون العمل الجماعي ولديهم مهارات قيادية وتأثير إيجابي على من حولهم.',
                strengths: [
                    'فهم مشاعر ودوافع الآخرين',
                    'التواصل الفعال والإقناع',
                    'القيادة والتأثير الإيجابي',
                    'بناء العلاقات القوية',
                    'حل النزاعات والوساطة'
                ],
                learningMethods: [
                    'التعلم في مجموعات',
                    'المناقشات والحوارات',
                    'التعلم التعاوني والتشاركي',
                    'لعب الأدوار والمحاكاة',
                    'التعلم من خلال التدريس للآخرين'
                ],
                activities: [
                    'المشاركة في الأنشطة الجماعية',
                    'تنظيم الفعاليات الاجتماعية',
                    'العمل التطوعي والخيري',
                    'التدريب والتوجيه',
                    'المشاركة في النوادي والجمعيات',
                    'ممارسة الألعاب الجماعية'
                ],
                careers: [
                    'مدير موارد بشرية',
                    'مستشار نفسي أو اجتماعي',
                    'مدرس أو مدرب',
                    'مندوب مبيعات',
                    'سياسي أو دبلوماسي',
                    'مدير تسويق',
                    'منسق اجتماعي',
                    'مذيع أو إعلامي'
                ]
            },
            intrapersonal: {
                description: 'يتميز أصحاب الذكاء الذاتي بفهمهم العميق لأنفسهم ومشاعرهم وأهدافهم. يحبون التأمل والتفكر، ولديهم قدرة عالية على التحليل الذاتي والتطوير الشخصي.',
                strengths: [
                    'الوعي الذاتي والفهم العميق للنفس',
                    'إدارة المشاعر والانفعالات',
                    'وضع الأهداف والتخطيط الشخصي',
                    'التأمل والتفكر العميق',
                    'الاستقلالية في التعلم والعمل'
                ],
                learningMethods: [
                    'التعلم الذاتي والفردي',
                    'التأمل والتفكر في المعلومات',
                    'ربط التعلم بالأهداف الشخصية',
                    'كتابة اليوميات والتأملات',
                    'التعلم في بيئة هادئة ومنعزلة'
                ],
                activities: [
                    'كتابة اليوميات والتأملات الشخصية',
                    'ممارسة التأمل والاسترخاء',
                    'وضع الأهداف والخطط الشخصية',
                    'القراءة في التطوير الذاتي',
                    'ممارسة الهوايات الفردية',
                    'السفر والاستكشاف الذاتي'
                ],
                careers: [
                    'كاتب أو مؤلف',
                    'مستشار شخصي',
                    'باحث أو عالم',
                    'فيلسوف أو مفكر',
                    'مدرب تنمية ذاتية',
                    'رائد أعمال',
                    'فنان مستقل',
                    'محلل نفسي'
                ]
            },
            naturalist: {
                description: 'يتميز أصحاب الذكاء الطبيعي بحبهم للطبيعة والبيئة. لديهم قدرة على ملاحظة وفهم الأنماط الطبيعية، ويشعرون بالراحة والسلام في البيئات الطبيعية.',
                strengths: [
                    'ملاحظة وفهم الأنماط الطبيعية',
                    'الحساسية للتغيرات البيئية',
                    'تصنيف وتمييز الكائنات الحية',
                    'فهم النظم البيئية والطبيعية',
                    'الاهتمام بالقضايا البيئية'
                ],
                learningMethods: [
                    'التعلم في البيئات الطبيعية',
                    'استخدام أمثلة من الطبيعة',
                    'الملاحظة المباشرة والاستكشاف',
                    'التصنيف والمقارنة',
                    'ربط التعلم بالقضايا البيئية'
                ],
                activities: [
                    'زراعة النباتات والبستنة',
                    'مراقبة الطيور والحيوانات',
                    'التخييم والرحلات الطبيعية',
                    'جمع العينات الطبيعية',
                    'التصوير الطبيعي',
                    'المشاركة في حملات حماية البيئة'
                ],
                careers: [
                    'عالم أحياء أو بيئة',
                    'مهندس زراعي',
                    'طبيب بيطري',
                    'مرشد سياحي طبيعي',
                    'باحث في علوم الأرض',
                    'مصمم حدائق',
                    'ناشط بيئي',
                    'عالم جيولوجيا'
                ]
            }
        };

        const questions = [
            // الذكاء اللغوي والمنطقي - اختيار من متعدد (single)
            {
                type: 'linguistic',
                questionType: 'single',
                question: 'عندما تذاكر، أي أسلوب تفضّل؟',
                options: [
                    { text: 'قراءة ملخّصات وكتب', value: 4 },
                    { text: 'مشاهدة فيديو تعليمي', value: 1 },
                    { text: 'عمل مخطط بصري', value: 1 },
                    { text: 'مناقشة مع صديق', value: 2 }
                ]
            },
            {
                type: 'linguistic',
                questionType: 'single',
                question: 'إذا طُلب منك شرح فكرة، ماذا تفعل أولاً؟',
                options: [
                    { text: 'أكتب النقاط الرئيسية', value: 4 },
                    { text: 'أرسم مخططاً', value: 1 },
                    { text: 'أعطي مثالاً عملياً', value: 2 },
                    { text: 'أستخدم الإيماءات', value: 1 }
                ]
            },
            {
                type: 'linguistic',
                questionType: 'single',
                question: 'أي من هذه الأنشطة تفضل في وقت فراغك؟',
                options: [
                    { text: 'قراءة الروايات والكتب', value: 4 },
                    { text: 'مشاهدة الأفلام', value: 2 },
                    { text: 'ممارسة الرياضة', value: 1 },
                    { text: 'الاستماع للموسيقى', value: 1 }
                ]
            },
            {
                type: 'linguistic',
                questionType: 'single',
                question: 'عند تعلم معلومة جديدة، كيف تحفظها؟',
                options: [
                    { text: 'أكررها بصوت عالٍ', value: 4 },
                    { text: 'أرسم مخططاً لها', value: 1 },
                    { text: 'أربطها بحركة', value: 1 },
                    { text: 'أحفظها كما هي', value: 2 }
                ]
            },
            {
                type: 'linguistic',
                questionType: 'single',
                question: 'ما الذي يجذبك أكثر في الكتب؟',
                options: [
                    { text: 'أسلوب الكاتب وجمال اللغة', value: 4 },
                    { text: 'المعلومات والحقائق', value: 2 },
                    { text: 'الصور والرسوم التوضيحية', value: 1 },
                    { text: 'القصص والأحداث', value: 3 }
                ]
            },

            {
                type: 'logical',
                questionType: 'single',
                question: 'ما النمط التالي في هذه السلسلة: 2، 4، 8، 16، ؟',
                options: [
                    { text: '24', value: 1 },
                    { text: '32', value: 4 },
                    { text: '20', value: 1 },
                    { text: '18', value: 1 }
                ]
            },
            {
                type: 'logical',
                questionType: 'single',
                question: 'عند حل مشكلة، أي طريقة تفضل؟',
                options: [
                    { text: 'تحليل الأسباب والنتائج', value: 4 },
                    { text: 'الاعتماد على الحدس', value: 1 },
                    { text: 'تجربة حلول مختلفة', value: 2 },
                    { text: 'سؤال الآخرين', value: 1 }
                ]
            },
            {
                type: 'logical',
                questionType: 'single',
                question: 'إذا كان كل A هو B، وكل B هو C، فإن:',
                options: [
                    { text: 'كل A هو C', value: 4 },
                    { text: 'كل C هو A', value: 1 },
                    { text: 'بعض A هو C', value: 2 },
                    { text: 'لا يمكن تحديد العلاقة', value: 1 }
                ]
            },
            {
                type: 'logical',
                questionType: 'single',
                question: 'أي من هذه المواد الدراسية تستمتع بها أكثر؟',
                options: [
                    { text: 'الرياضيات والفيزياء', value: 4 },
                    { text: 'اللغة والأدب', value: 1 },
                    { text: 'الفنون والرسم', value: 1 },
                    { text: 'التاريخ والجغرافيا', value: 2 }
                ]
            },
            {
                type: 'logical',
                questionType: 'single',
                question: 'عند اتخاذ قرار مهم، ما أول ما تفعله؟',
                options: [
                    { text: 'أجمع المعلومات وأحللها', value: 4 },
                    { text: 'أستشير الآخرين', value: 1 },
                    { text: 'أتبع مشاعري', value: 1 },
                    { text: 'أفكر في النتائج المحتملة', value: 3 }
                ]
            },

            // الذكاء البصري والحركي - اختيار متعدد (multiple)
            {
                type: 'spatial',
                questionType: 'multiple',
                question: 'أي من هذه الأنشطة تجذبك؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'الرسم والتصميم', value: 4 },
                    { text: 'التصوير الفوتوغرافي', value: 3 },
                    { text: 'ترتيب الأثاث', value: 3 },
                    { text: 'بناء النماذج', value: 4 }
                ]
            },
            {
                type: 'spatial',
                questionType: 'multiple',
                question: 'ما الذي يساعدك في التعلم؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'الرسوم التوضيحية والمخططات', value: 4 },
                    { text: 'الخرائط الذهنية', value: 4 },
                    { text: 'الألوان والتمييز البصري', value: 3 },
                    { text: 'النماذج ثلاثية الأبعاد', value: 4 }
                ]
            },
            {
                type: 'spatial',
                questionType: 'multiple',
                question: 'أي من هذه المهارات تجيدها؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'تذكر الوجوه والأماكن', value: 3 },
                    { text: 'قراءة الخرائط بسهولة', value: 4 },
                    { text: 'تخيل الأشكال من زوايا مختلفة', value: 4 },
                    { text: 'ملاحظة التفاصيل البصرية', value: 3 }
                ]
            },
            {
                type: 'spatial',
                questionType: 'multiple',
                question: 'ما الذي تلاحظه أولاً في مكان جديد؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'الألوان والديكور', value: 4 },
                    { text: 'ترتيب الأثاث والمساحات', value: 4 },
                    { text: 'الإضاءة والظلال', value: 3 },
                    { text: 'التناسق والتصميم العام', value: 4 }
                ]
            },
            {
                type: 'spatial',
                questionType: 'multiple',
                question: 'أي من هذه الأدوات تستخدمها كثيراً؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'برامج التصميم والرسم', value: 4 },
                    { text: 'الكاميرا للتصوير', value: 3 },
                    { text: 'أدوات الرسم التقليدية', value: 4 },
                    { text: 'تطبيقات التصميم على الهاتف', value: 3 }
                ]
            },

            {
                type: 'bodily',
                questionType: 'multiple',
                question: 'أي من هذه الأنشطة تستمتع بها؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'الرياضة والألعاب', value: 4 },
                    { text: 'الأعمال اليدوية', value: 4 },
                    { text: 'الرقص', value: 3 },
                    { text: 'الطبخ', value: 3 }
                ]
            },
            {
                type: 'bodily',
                questionType: 'multiple',
                question: 'كيف تفضل التعلم؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'التجربة العملية والممارسة', value: 4 },
                    { text: 'الحركة أثناء الدراسة', value: 4 },
                    { text: 'استخدام اليدين في التعلم', value: 4 },
                    { text: 'التعلم في الهواء الطلق', value: 3 }
                ]
            },
            {
                type: 'bodily',
                questionType: 'multiple',
                question: 'أي من هذه المهارات تجيدها؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'التوازن والتناسق الحركي', value: 4 },
                    { text: 'استخدام الأدوات بمهارة', value: 4 },
                    { text: 'التعبير بلغة الجسد', value: 3 },
                    { text: 'ردود الفعل السريعة', value: 3 }
                ]
            },
            {
                type: 'bodily',
                questionType: 'multiple',
                question: 'متى تشعر بالراحة أكثر؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'عند الحركة والنشاط', value: 4 },
                    { text: 'أثناء العمل بيديك', value: 4 },
                    { text: 'في الأماكن المفتوحة', value: 3 },
                    { text: 'عند ممارسة الرياضة', value: 4 }
                ]
            },
            {
                type: 'bodily',
                questionType: 'multiple',
                question: 'أي بيئة عمل تفضل؟ (اختر كل ما ينطبق)',
                options: [
                    { text: 'ورشة عمل أو مختبر', value: 4 },
                    { text: 'في الهواء الطلق', value: 4 },
                    { text: 'صالة رياضية', value: 3 },
                    { text: 'مكان يسمح بالحركة', value: 4 }
                ]
            },

            // الذكاء الإيقاعي والاجتماعي - ترتيب (ranking)
            {
                type: 'musical',
                questionType: 'ranking',
                question: 'رتّب هذه الأنشطة الإيقاعية حسب استمتاعك بها (الأول الأكثر تفضيلاً):',
                options: [
                    { text: 'التصفيق على الإيقاع', value: 0 },
                    { text: 'المشي بخطوات منتظمة', value: 0 },
                    { text: 'تنظيم الأعمال بجدول زمني', value: 0 },
                    { text: 'ممارسة التمارين بإيقاع ثابت', value: 0 }
                ]
            },
            {
                type: 'musical',
                questionType: 'ranking',
                question: 'رتّب هذه طرق التعلم حسب فعاليتها معك:',
                options: [
                    { text: 'التكرار المنتظم', value: 0 },
                    { text: 'الجداول الزمنية المحددة', value: 0 },
                    { text: 'الأنماط والتسلسلات', value: 0 },
                    { text: 'الإيقاع في الحفظ', value: 0 }
                ]
            },
            {
                type: 'musical',
                questionType: 'ranking',
                question: 'رتّب هذه البيئات حسب تركيزك فيها:',
                options: [
                    { text: 'مكان هادئ ومنتظم', value: 0 },
                    { text: 'بيئة بها أصوات طبيعية منتظمة', value: 0 },
                    { text: 'مكان به إيقاع خفيف في الخلفية', value: 0 },
                    { text: 'بيئة صامتة تماماً', value: 0 }
                ]
            },
            {
                type: 'musical',
                questionType: 'ranking',
                question: 'رتّب هذه الأنشطة حسب قدرتك على ملاحظة الأنماط فيها:',
                options: [
                    { text: 'الأرقام والتسلسلات', value: 0 },
                    { text: 'الحركات المتكررة', value: 0 },
                    { text: 'الأصوات والإيقاعات', value: 0 },
                    { text: 'الألوان والأشكال', value: 0 }
                ]
            },
            {
                type: 'musical',
                questionType: 'ranking',
                question: 'رتّب هذه المهارات حسب قوتك فيها:',
                options: [
                    { text: 'تذكر التسلسلات والخطوات', value: 0 },
                    { text: 'الالتزام بالمواعيد والجداول', value: 0 },
                    { text: 'ملاحظة الأنماط المتكررة', value: 0 },
                    { text: 'تنظيم الأعمال بطريقة منهجية', value: 0 }
                ]
            },

            {
                type: 'interpersonal',
                questionType: 'ranking',
                question: 'رتّب هذه الأنشطة الاجتماعية حسب استمتاعك بها:',
                options: [
                    { text: 'العمل التطوعي', value: 0 },
                    { text: 'تنظيم الفعاليات', value: 0 },
                    { text: 'التدريس والتوجيه', value: 0 },
                    { text: 'حل النزاعات', value: 0 }
                ]
            },
            {
                type: 'interpersonal',
                questionType: 'ranking',
                question: 'رتّب هذه المهارات حسب قوتك فيها:',
                options: [
                    { text: 'فهم مشاعر الآخرين', value: 0 },
                    { text: 'التواصل الفعال', value: 0 },
                    { text: 'القيادة والتأثير', value: 0 },
                    { text: 'بناء العلاقات', value: 0 }
                ]
            },
            {
                type: 'interpersonal',
                questionType: 'ranking',
                question: 'رتّب هذه البيئات حسب راحتك فيها:',
                options: [
                    { text: 'الاجتماعات الكبيرة', value: 0 },
                    { text: 'المجموعات الصغيرة', value: 0 },
                    { text: 'المحادثات الثنائية', value: 0 },
                    { text: 'العمل الفردي', value: 0 }
                ]
            },
            {
                type: 'interpersonal',
                questionType: 'ranking',
                question: 'رتّب هذه الأدوار حسب تفضيلك في العمل الجماعي:',
                options: [
                    { text: 'قائد الفريق', value: 0 },
                    { text: 'منسق المشروع', value: 0 },
                    { text: 'مولد الأفكار', value: 0 },
                    { text: 'منفذ المهام', value: 0 }
                ]
            },
            {
                type: 'interpersonal',
                questionType: 'ranking',
                question: 'رتّب هذه الطرق حسب تفضيلك لحل المشاكل:',
                options: [
                    { text: 'النقاش الجماعي', value: 0 },
                    { text: 'استشارة الخبراء', value: 0 },
                    { text: 'العصف الذهني', value: 0 },
                    { text: 'التفكير المنفرد', value: 0 }
                ]
            },

            // الذكاء الذاتي والطبيعي - تقييم بالنجوم (rating)
            {
                type: 'intrapersonal',
                questionType: 'rating',
                question: 'قيّم مدى انطباق هذه العبارات عليك (1-5 نجوم):',
                statements: [
                    { text: 'أعرف نقاط قوتي وضعفي جيداً', value: 0 },
                    { text: 'أحتاج وقتاً وحيداً للتفكير', value: 0 },
                    { text: 'أفهم مشاعري وأسبابها', value: 0 },
                    { text: 'أثق بحدسي الداخلي', value: 0 }
                ]
            },
            {
                type: 'intrapersonal',
                questionType: 'rating',
                question: 'قيّم مدى ممارستك لهذه الأنشطة (1-5 نجوم):',
                statements: [
                    { text: 'كتابة اليوميات والتأملات', value: 0 },
                    { text: 'وضع أهداف شخصية', value: 0 },
                    { text: 'التأمل والتفكر', value: 0 },
                    { text: 'مراجعة أخطائي وتعلم منها', value: 0 }
                ]
            },
            {
                type: 'intrapersonal',
                questionType: 'rating',
                question: 'قيّم مدى صحة هذه الصفات عنك (1-5 نجوم):',
                statements: [
                    { text: 'أحب العمل بمفردي', value: 0 },
                    { text: 'أحلل تصرفاتي باستمرار', value: 0 },
                    { text: 'أستمتع بالتعلم الذاتي', value: 0 },
                    { text: 'أفهم قيمي ومبادئي جيداً', value: 0 }
                ]
            },
            {
                type: 'intrapersonal',
                questionType: 'rating',
                question: 'قيّم مدى راحتك في هذه المواقف (1-5 نجوم):',
                statements: [
                    { text: 'قضاء يوم كامل وحيداً', value: 0 },
                    { text: 'التفكير في معنى الحياة', value: 0 },
                    { text: 'اتخاذ قرارات مهمة بمفردي', value: 0 },
                    { text: 'التعبير عن مشاعري الداخلية', value: 0 }
                ]
            },
            {
                type: 'intrapersonal',
                questionType: 'rating',
                question: 'قيّم قوتك في هذه المهارات الذاتية (1-5 نجوم):',
                statements: [
                    { text: 'معرفة ما يحفزني ويثبطني', value: 0 },
                    { text: 'إدارة وقتي وأولوياتي', value: 0 },
                    { text: 'التحكم في انفعالاتي', value: 0 },
                    { text: 'تطوير نفسي باستمرار', value: 0 }
                ]
            },

            {
                type: 'naturalist',
                questionType: 'rating',
                question: 'قيّم مدى استمتاعك بهذه الأنشطة الطبيعية (1-5 نجوم):',
                statements: [
                    { text: 'زراعة النباتات والعناية بها', value: 0 },
                    { text: 'مراقبة الطيور والحيوانات', value: 0 },
                    { text: 'التخييم في الطبيعة', value: 0 },
                    { text: 'جمع الأحجار والأصداف', value: 0 }
                ]
            },
            {
                type: 'naturalist',
                questionType: 'rating',
                question: 'قيّم مدى راحتك في هذه البيئات (1-5 نجوم):',
                statements: [
                    { text: 'الغابات والحدائق الطبيعية', value: 0 },
                    { text: 'الشواطئ والبحيرات', value: 0 },
                    { text: 'المزارع والريف', value: 0 },
                    { text: 'الجبال والوديان', value: 0 }
                ]
            },
            {
                type: 'naturalist',
                questionType: 'rating',
                question: 'قيّم قوتك في هذه المهارات الطبيعية (1-5 نجوم):',
                statements: [
                    { text: 'تمييز أنواع النباتات', value: 0 },
                    { text: 'ملاحظة التغيرات في الطقس', value: 0 },
                    { text: 'فهم دورات الطبيعة', value: 0 },
                    { text: 'التنبؤ بالظواهر الطبيعية', value: 0 }
                ]
            },
            {
                type: 'naturalist',
                questionType: 'rating',
                question: 'قيّم أهمية هذه القضايا بالنسبة لك (1-5 نجوم):',
                statements: [
                    { text: 'حماية البيئة والطبيعة', value: 0 },
                    { text: 'دراسة الكائنات الحية', value: 0 },
                    { text: 'الأنشطة الخارجية', value: 0 },
                    { text: 'الحفاظ على التنوع البيولوجي', value: 0 }
                ]
            },
            {
                type: 'naturalist',
                questionType: 'rating',
                question: 'قيّم مدى انطباق هذه العبارات عليك (1-5 نجوم):',
                statements: [
                    { text: 'أشعر بالسلام في الطبيعة', value: 0 },
                    { text: 'ألاحظ تفاصيل البيئة حولي', value: 0 },
                    { text: 'أهتم بالقضايا البيئية', value: 0 },
                    { text: 'أفضل الأماكن الطبيعية على المدن', value: 0 }
                ]
            }
        ];

        // متغيرات الحالة
        let currentUser = '<%=name%>';
        let currentQuestionIndex = 0;
        let answers = {};
        let startTime = Date.now();
        let timerInterval;

        // عناصر DOM
        const welcomeScreen = document.getElementById('welcome-screen');
        const onboardingScreen = document.getElementById('onboarding-screen');
        const testScreen = document.getElementById('test-screen');
        const resultsScreen = document.getElementById('results-screen');
        const userNameInput = document.getElementById('userName');
        const startBtn = document.getElementById('startBtn');
        const howItWorksBtn = document.getElementById('howItWorksBtn');
        const howItWorksModal = document.getElementById('howItWorksModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const startTestBtn = document.getElementById('startTestBtn');
        const midwayBreak = document.getElementById('midway-break');
        const continueTestBtn = document.getElementById('continueTestBtn');

        // أحداث الأزرار
        // startBtn.addEventListener('click', function () {
        //     currentUser = 'مستخدم الاختبار'; // اسم ثابت
        //     showOnboarding();
        // });

        // howItWorksBtn.addEventListener('click', function () {
        //     howItWorksModal.classList.remove('hidden');
        //     howItWorksModal.classList.add('flex');
        // });

        // closeModalBtn.addEventListener('click', function () {
        //     howItWorksModal.classList.add('hidden');
        //     howItWorksModal.classList.remove('flex');
        // });

        // أحداث نافذة الاختبار غير المكتمل
        // document.getElementById('continueTestFromModal').addEventListener('click', function () {
        //     document.getElementById('incompleteTestModal').classList.add('hidden');
        //     // الانتقال لأول سؤال غير مُجاب عليه
        //     goToFirstUnansweredQuestion();
        // });

        // document.getElementById('showPartialResults').addEventListener('click', function () {
        //     document.getElementById('incompleteTestModal').classList.add('hidden');
        //     proceedWithResults();
        // });

        // document.getElementById('closeIncompleteModal').addEventListener('click', function () {
        //     document.getElementById('incompleteTestModal').classList.add('hidden');
        // });

        // startTestBtn.addEventListener('click', function () {
        //     startTest();
        // });

        // continueTestBtn.addEventListener('click', function () {
        //     midwayBreak.classList.add('hidden');
        // });

        // إظهار شاشة الدليل السريع
        // functioة مستمعي الأحداث للسؤال




        // حساب النتائج
        function calculateResults() {
            const scores = {};
            const maxScores = {};

            // تهيئة النقاط والحد الأقصى لكل نوع ذكاء
            Object.keys(intelligences).forEach(type => {
                scores[type] = 0;
                maxScores[type] = 0;
            });

            // حساب النقاط والحد الأقصى لكل سؤال
            questions.forEach((question, index) => {
                const questionType = question.type;

                // حساب الحد الأقصى للسؤال
                switch (question.questionType) {
                    case 'single':
                        const maxSingleValue = Math.max(...question.options.map(opt => opt.value));
                        maxScores[questionType] += maxSingleValue;
                        break;

                    case 'multiple':
                        const totalMultipleValue = question.options.reduce((sum, opt) => sum + opt.value, 0);
                        maxScores[questionType] += totalMultipleValue;
                        break;

                    case 'ranking':
                        maxScores[questionType] += 10; // 4+3+2+1 = 10 نقاط كحد أقصى
                        break;

                    case 'rating':
                        maxScores[questionType] += question.statements.length * 5; // 5 نجوم لكل عبارة
                        break;
                }

                // حساب النقاط الفعلية إذا تم الإجابة على السؤال
                if (answers[index] !== undefined) {
                    const answer = answers[index];

                    switch (question.questionType) {
                        case 'single':
                            if (question.options[answer]) {
                                scores[questionType] += question.options[answer].value;
                            }
                            break;

                        case 'multiple':
                            if (Array.isArray(answer)) {
                                answer.forEach(optionIndex => {
                                    if (question.options[optionIndex]) {
                                        scores[questionType] += question.options[optionIndex].value;
                                    }
                                });
                            }
                            break;

                        case 'ranking':
                            if (Array.isArray(answer)) {
                                answer.forEach((optionIndex, rank) => {
                                    scores[questionType] += (4 - rank); // الأول يحصل على 4، الثاني على 3، إلخ
                                });
                            }
                            break;

                        case 'rating':
                            if (Array.isArray(answer)) {
                                answer.forEach(rating => {
                                    scores[questionType] += rating; // إضافة التقييم مباشرة (1-5)
                                });
                            }
                            break;
                    }
                }
            });

            // تحويل النقاط إلى نسب مئوية دقيقة
            Object.keys(scores).forEach(type => {
                if (maxScores[type] > 0) {
                    scores[type] = Math.round((scores[type] / maxScores[type]) * 100);
                } else {
                    scores[type] = 0;
                }
                // التأكد من أن النسبة لا تتجاوز 100%
                scores[type] = Math.min(scores[type], 100);
            });

            return scores;
        }

        // عرض النتائج
        function showResults() {
            // التحقق من إجابة جميع الأسئلة
            const totalQuestions = questions.length;
            const answeredQuestions = Object.keys(answers).length;

            if (answeredQuestions < totalQuestions) {
                showIncompleteTestModal(answeredQuestions, totalQuestions);
                return;
            }

            proceedWithResults();
        }

        // إظهار نافذة الاختبار غير المكتمل
        function showIncompleteTestModal(answeredQuestions, totalQuestions) {
            const remainingQuestions = totalQuestions - answeredQuestions;
            const percentage = Math.round((answeredQuestions / totalQuestions) * 100);

            // العثور على أرقام الأسئلة غير المجابة
            const unansweredQuestions = [];
            for (let i = 0; i < totalQuestions; i++) {
                if (answers[i] === undefined) {
                    unansweredQuestions.push(i + 1);
                }
            }

            const unansweredList = unansweredQuestions.length <= 10 ?
                unansweredQuestions.join('، ') :
                unansweredQuestions.slice(0, 10).join('، ') + ` وأسئلة أخرى...`;

            document.getElementById('incompleteMessage').innerHTML = `
                تمت الإجابة على <strong>${answeredQuestions}</strong> من <strong>${totalQuestions}</strong> سؤالاً<br>
                <span class="text-sm text-gray-500">نسبة الإكمال: ${percentage}% • المتبقي: ${remainingQuestions} أسئلة</span><br>
                <div class="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                    <div class="text-sm font-semibold text-yellow-800 mb-1">الأسئلة غير المجابة:</div>
                    <div class="text-sm text-yellow-700">${unansweredList}</div>
                </div>
            `;

            document.getElementById('incompleteTestModal').classList.remove('hidden');
            document.getElementById('incompleteTestModal').classList.add('flex');
        }

        proceedWithResults();

        // المتابعة مع النتائج
        function proceedWithResults() {
            clearInterval(timerInterval);
            // testScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');

            const scores = JSON.parse('<%-p3%>')?.scores || JSON.parse('<%-p3%>');

            // عرض اسم المستخدم
            document.getElementById('resultUserName').textContent = currentUser;

            // عرض ملخص نمط الذكاءات
            showIntelligencePattern(scores);

            // عرض أقل 3 ذكاءات
            showLowestIntelligences(scores);

            // إنشاء الرسم البياني
            createResultsChart(scores);

            // عرض أعلى 3 ذكاءات
            showTopIntelligences(scores);

            // عرض التفاصيل الكاملة
            showDetailedResults(scores);

            // عرض التوصيات الشخصية
            showPersonalRecommendations(scores);

            // عرض خطة التطوير
            showDevelopmentPlan(scores);



        }

        // عرض ملخص نمط الذكاءات
        function showIntelligencePattern(scores) {
            const intelligencePattern = document.getElementById('intelligencePattern');

            // ترتيب الذكاءات حسب النقاط
            const sortedIntelligences = Object.keys(scores)
                .map(key => ({
                    type: key,
                    score: scores[key],
                    ...intelligences[key]
                }))
                .sort((a, b) => b.score - a.score);

            // تحديد النمط العام
            const topThree = sortedIntelligences.slice(0, 3);
            const averageScore = Object.values(scores).reduce((sum, score) => sum + score, 0) / 8;

            let patternDescription = '';
            if (averageScore >= 70) {
                patternDescription = 'لديك توازن ممتاز في معظم أنواع الذكاءات! 🌟';
            } else if (averageScore >= 50) {
                patternDescription = 'لديك توزيع متوازن مع تميز في بعض المجالات 👍';
            } else {
                patternDescription = 'لديك نقاط قوة محددة يمكن التركيز عليها وتطويرها 💪';
            }

            intelligencePattern.innerHTML = `
                <div class="mb-6">
                    <p class="text-xl text-indigo-700 font-semibold mb-4">${patternDescription}</p>
                    <div class="bg-white rounded-xl p-4 border border-indigo-200">
                        <h4 class="font-semibold text-gray-800 mb-3">أقوى 3 ذكاءات لديك:</h4>
                        <div class="flex flex-wrap justify-center gap-4">
                            ${topThree.map((intel, index) => `
                                <div class="flex items-center gap-2 bg-gradient-to-r from-indigo-100 to-purple-100 px-4 py-2 rounded-full border border-indigo-300">
                                    <span class="text-2xl">${intel.icon}</span>
                                    <span class="font-semibold text-indigo-800">${intel.name}</span>
                                    <span class="bg-indigo-600 text-white px-2 py-1 rounded-full text-sm font-bold">${intel.score}%</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-4 md:grid-cols-8 gap-2">
                    ${sortedIntelligences.map(intel => `
                        <div class="text-center">
                            <div class="w-16 h-16 mx-auto mb-2 rounded-full flex items-center justify-center text-2xl" 
                                 style="background-color: ${intel.color}20; border: 2px solid ${intel.color}">
                                ${intel.icon}
                            </div>
                            <div class="text-xs font-bold" style="color: ${intel.color}">${intel.score}%</div>
                            <div class="text-xs text-gray-600 mt-1">${intel.name}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // عرض أقل 3 ذكاءات
        function showLowestIntelligences(scores) {
            const lowestIntelligences = document.getElementById('lowestIntelligences');

            // ترتيب الذكاءات من الأقل للأعلى
            const sortedIntelligences = Object.keys(scores)
                .map(key => ({
                    type: key,
                    score: scores[key],
                    ...intelligences[key],
                    details: intelligenceDetails[key]
                }))
                .sort((a, b) => a.score - b.score)
                .slice(0, 3);

            lowestIntelligences.innerHTML = sortedIntelligences.map((intel, index) => `
                <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border-l-4 border-gray-400 hover:shadow-lg transition-shadow">
                    <div class="text-center mb-4">
                        <div class="text-4xl mb-2">${intel.icon}</div>
                        <h4 class="text-lg font-bold text-gray-800">${intel.name}</h4>
                        <div class="flex items-center justify-center gap-2 mt-2">
                            <div class="bg-gray-200 rounded-full h-3 w-20">
                                <div class="h-3 rounded-full bg-gray-400 transition-all duration-1000" style="width: ${intel.score}%"></div>
                            </div>
                            <span class="text-lg font-bold text-gray-600">${intel.score}%</span>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-4 mb-4">
                        <h5 class="font-semibold text-gray-700 mb-2 flex items-center gap-2">
                            <span class="text-sm">📝</span> ما هو؟
                        </h5>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            ${intel.details.description.substring(0, 120)}...
                        </p>
                    </div>
                    
                    <div class="bg-blue-50 rounded-lg p-4">
                        <h5 class="font-semibold text-blue-700 mb-3 flex items-center gap-2">
                            <span class="text-sm">🚀</span> كيفية التطوير
                        </h5>
                        <ul class="space-y-2">
                            ${intel.details.learningMethods.slice(0, 3).map(method => `
                                <li class="flex items-start gap-2 text-sm text-blue-700">
                                    <span class="text-blue-500 font-bold mt-0.5">•</span>
                                    <span>${method}</span>
                                </li>
                            `).join('')}
                        </ul>
                        
                        <div class="mt-3 pt-3 border-t border-blue-200">
                            <h6 class="font-semibold text-blue-600 mb-2 text-sm">أنشطة مقترحة:</h6>
                            <div class="flex flex-wrap gap-1">
                                ${intel.details.activities.slice(0, 2).map(activity => `
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">${activity}</span>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // عرض أعلى 3 ذكاءات
        function showTopIntelligences(scores) {
            const topIntelligences = document.getElementById('topIntelligences');

            // ترتيب الذكاءات حسب النقاط
            const sortedIntelligences = Object.keys(scores)
                .map(key => ({
                    type: key,
                    score: scores[key],
                    ...intelligences[key],
                    details: intelligenceDetails[key]
                }))
                .sort((a, b) => b.score - a.score)
                .slice(0, 3);

            topIntelligences.innerHTML = sortedIntelligences.map((intel, index) => {
                const medalColors = ['🥇', '🥈', '🥉'];
                const gradients = [
                    'from-yellow-50 to-amber-50 border-yellow-400',
                    'from-gray-50 to-slate-50 border-gray-400',
                    'from-orange-50 to-amber-50 border-orange-400'
                ];

                return `
                    <div class="bg-gradient-to-r ${gradients[index]} rounded-xl border-l-4 p-6 shadow-lg">
                        <div class="flex items-center mb-4">
                            <div class="text-4xl mr-4">${medalColors[index]}</div>
                            <div class="text-4xl mr-4">${intel.icon}</div>
                            <div class="flex-1">
                                <h4 class="text-xl font-bold text-gray-800">${intel.name}</h4>
                                <div class="flex items-center gap-2 mt-2">
                                    <div class="bg-gray-200 rounded-full h-4 flex-1">
                                        <div class="h-4 rounded-full transition-all duration-1000" style="width: ${intel.score}%; background-color: ${intel.color}"></div>
                                    </div>
                                    <span class="text-xl font-bold" style="color: ${intel.color}">${intel.score}%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg p-4 mb-4">
                            <p class="text-gray-700 leading-relaxed">${intel.details.description}</p>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-lg p-3">
                                <h5 class="font-semibold text-green-700 mb-2 flex items-center gap-2">
                                    <span>💪</span> نقاط القوة
                                </h5>
                                <ul class="text-sm text-gray-700 space-y-1">
                                    ${intel.details.strengths.slice(0, 2).map(strength => `<li>• ${strength}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <div class="bg-white rounded-lg p-3">
                                <h5 class="font-semibold text-blue-700 mb-2 flex items-center gap-2">
                                    <span>💼</span> مهن مناسبة
                                </h5>
                                <ul class="text-sm text-gray-700 space-y-1">
                                    ${intel.details.careers.slice(0, 3).map(career => `<li>• ${career}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // عرض التفاصيل الكاملة
        function showDetailedResults(scores) {
            const detailedResults = document.getElementById('detailedResults');

            // ترتيب جميع الذكاءات حسب النقاط
            const sortedIntelligences = Object.keys(scores)
                .map(key => ({
                    type: key,
                    score: scores[key],
                    ...intelligences[key],
                    details: intelligenceDetails[key]
                }))
                .sort((a, b) => b.score - a.score);

            detailedResults.innerHTML = sortedIntelligences.map((intel, index) => {
                const isTopThree = index < 3;
                const borderClass = isTopThree ? 'border-l-4' : 'border-l-2';
                const bgClass = isTopThree ? 'from-indigo-50 to-purple-50' : 'from-gray-50 to-white';

                return `
                    <div class="bg-gradient-to-r ${bgClass} rounded-xl ${borderClass} p-6 shadow-lg transition-all hover:shadow-xl" style="border-color: ${intel.color}">
                        <!-- Header -->
                        <div class="flex items-center mb-6">
                            <div class="text-4xl mr-4">${intel.icon}</div>
                            <div class="flex-1">
                                <div class="flex items-center gap-3 mb-2">
                                    <h4 class="text-2xl font-bold" style="color: ${intel.color}">${intel.name}</h4>
                                    ${isTopThree ? `<span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-semibold">أعلى ${index + 1}</span>` : ''}
                                </div>
                                <div class="flex items-center gap-3">
                                    <div class="bg-gray-200 rounded-full h-5 flex-1">
                                        <div class="h-5 rounded-full transition-all duration-1000" style="width: ${intel.score}%; background-color: ${intel.color}"></div>
                                    </div>
                                    <span class="text-2xl font-bold" style="color: ${intel.color}">${intel.score}%</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Description -->
                        <div class="bg-white rounded-lg p-4 mb-6 border border-gray-100">
                            <h5 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
                                <span class="text-lg">📝</span> وصف هذا النوع من الذكاء
                            </h5>
                            <p class="text-gray-700 leading-relaxed">${intel.details.description}</p>
                        </div>
                        
                        <!-- Details Grid -->
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Learning Methods -->
                            <div class="bg-white rounded-lg p-4 border border-gray-100">
                                <h5 class="font-semibold text-green-700 mb-3 flex items-center gap-2">
                                    <span class="text-lg">📚</span> طرق التعلم المناسبة
                                </h5>
                                <ul class="space-y-2">
                                    ${intel.details.learningMethods.map(method => `
                                        <li class="flex items-start gap-2 text-gray-700">
                                            <span class="text-green-500 font-bold mt-1">•</span>
                                            <span>${method}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                            
                            <!-- Activities -->
                            <div class="bg-white rounded-lg p-4 border border-gray-100">
                                <h5 class="font-semibold text-blue-700 mb-3 flex items-center gap-2">
                                    <span class="text-lg">🎯</span> أنشطة وهوايات مقترحة
                                </h5>
                                <ul class="space-y-2">
                                    ${intel.details.activities.map(activity => `
                                        <li class="flex items-start gap-2 text-gray-700">
                                            <span class="text-blue-500 font-bold mt-1">•</span>
                                            <span>${activity}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                            
                            <!-- Careers -->
                            <div class="bg-white rounded-lg p-4 border border-gray-100">
                                <h5 class="font-semibold text-purple-700 mb-3 flex items-center gap-2">
                                    <span class="text-lg">💼</span> مهن وتخصصات مناسبة
                                </h5>
                                <div class="flex flex-wrap gap-2">
                                    ${intel.details.careers.map(career => `
                                        <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium">${career}</span>
                                    `).join('')}
                                </div>
                            </div>
                            
                            <!-- Strengths -->
                            <div class="bg-white rounded-lg p-4 border border-gray-100">
                                <h5 class="font-semibold text-orange-700 mb-3 flex items-center gap-2">
                                    <span class="text-lg">💪</span> نقاط القوة الرئيسية
                                </h5>
                                <ul class="space-y-2">
                                    ${intel.details.strengths.map(strength => `
                                        <li class="flex items-start gap-2 text-gray-700">
                                            <span class="text-orange-500 font-bold mt-1">•</span>
                                            <span>${strength}</span>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                        
                        ${isTopThree ? `
                            <div class="mt-6 bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200 rounded-lg p-4">
                                <h5 class="font-semibold text-amber-800 mb-2 flex items-center gap-2">
                                    <span class="text-lg">💡</span> نصائح خاصة لتطوير هذا الذكاء
                                </h5>
                                <p class="text-amber-700 text-sm leading-relaxed">
                                    هذا أحد أقوى أنواع الذكاء لديك! ركز على الأنشطة والمهن المذكورة أعلاه، واستخدم طرق التعلم المناسبة لتحقيق أفضل النتائج في دراستك وعملك.
                                </p>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // عرض التوصيات الشخصية
        function showPersonalRecommendations(scores) {
            const personalRecommendations = document.getElementById('personalRecommendations');

            // الحصول على أعلى 3 ذكاءات
            const topThree = Object.keys(scores)
                .map(key => ({
                    type: key,
                    score: scores[key],
                    ...intelligences[key],
                    details: intelligenceDetails[key]
                }))
                .sort((a, b) => b.score - a.score)
                .slice(0, 3);

            // جمع التوصيات من أعلى 3 ذكاءات
            const allLearningMethods = [...new Set(topThree.flatMap(intel => intel.details.learningMethods))];
            const allActivities = [...new Set(topThree.flatMap(intel => intel.details.activities))];
            const allCareers = [...new Set(topThree.flatMap(intel => intel.details.careers))];

            personalRecommendations.innerHTML = `
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h4 class="text-xl font-bold text-indigo-800 mb-4 flex items-center gap-2">
                        <span class="text-2xl">📚</span> طرق التعلم الأنسب لك
                    </h4>
                    <div class="space-y-3">
                        ${allLearningMethods.slice(0, 6).map(method => `
                            <div class="flex items-center gap-3 p-3 bg-indigo-50 rounded-lg">
                                <span class="w-2 h-2 bg-indigo-500 rounded-full"></span>
                                <span class="text-gray-700">${method}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h4 class="text-xl font-bold text-green-800 mb-4 flex items-center gap-2">
                        <span class="text-2xl">🎯</span> أنشطة مقترحة لك
                    </h4>
                    <div class="space-y-3">
                        ${allActivities.slice(0, 6).map(activity => `
                            <div class="flex items-center gap-3 p-3 bg-green-50 rounded-lg">
                                <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                <span class="text-gray-700">${activity}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg md:col-span-2">
                    <h4 class="text-xl font-bold text-purple-800 mb-4 flex items-center gap-2">
                        <span class="text-2xl">💼</span> مجالات مهنية مناسبة لك
                    </h4>
                    <div class="grid md:grid-cols-3 gap-3">
                        ${allCareers.slice(0, 12).map(career => `
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-3 text-center">
                                <span class="text-purple-800 font-medium">${career}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        // عرض خطة التطوير
        function showDevelopmentPlan(scores) {
            const developmentPlan = document.getElementById('developmentPlan');

            // الحصول على أعلى 3 ذكاءات
            const topThree = Object.keys(scores)
                .map(key => ({
                    type: key,
                    score: scores[key],
                    ...intelligences[key],
                    details: intelligenceDetails[key]
                }))
                .sort((a, b) => b.score - a.score)
                .slice(0, 3);

            // الحصول على أقل 2 ذكاءات للتطوير
            const bottomTwo = Object.keys(scores)
                .map(key => ({
                    type: key,
                    score: scores[key],
                    ...intelligences[key],
                    details: intelligenceDetails[key]
                }))
                .sort((a, b) => a.score - b.score)
                .slice(0, 2);

            developmentPlan.innerHTML = `
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h4 class="text-xl font-bold text-green-800 mb-4 flex items-center gap-2">
                        <span class="text-2xl">🚀</span> استثمر نقاط قوتك
                    </h4>
                    <p class="text-gray-600 mb-4">ركز على تطوير هذه الذكاءات القوية لديك:</p>
                    <div class="space-y-4">
                        ${topThree.map((intel, index) => `
                            <div class="border-l-4 pl-4" style="border-color: ${intel.color}">
                                <div class="flex items-center gap-3 mb-2">
                                    <span class="text-2xl">${intel.icon}</span>
                                    <h5 class="font-semibold" style="color: ${intel.color}">${intel.name} (${intel.score}%)</h5>
                                </div>
                                <ul class="text-sm text-gray-700 space-y-1">
                                    ${intel.details.activities.slice(0, 2).map(activity => `<li>• ${activity}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h4 class="text-xl font-bold text-orange-800 mb-4 flex items-center gap-2">
                        <span class="text-2xl">💪</span> طور نقاط الضعف
                    </h4>
                    <p class="text-gray-600 mb-4">هذه المجالات تحتاج لمزيد من التطوير:</p>
                    <div class="space-y-4">
                        ${bottomTwo.map(intel => `
                            <div class="border-l-4 border-gray-300 pl-4">
                                <div class="flex items-center gap-3 mb-2">
                                    <span class="text-2xl">${intel.icon}</span>
                                    <h5 class="font-semibold text-gray-700">${intel.name} (${intel.score}%)</h5>
                                </div>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    ${intel.details.learningMethods.slice(0, 2).map(method => `<li>• جرب: ${method}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                    </div>
                </div>
            `;
        }

        // إنشاء الرسم البياني
        function createResultsChart(scores) {
            const ctx = document.getElementById('resultsChart').getContext('2d');

            const labels = Object.keys(intelligences).map(key => intelligences[key].name);
            const data = Object.keys(intelligences).map(key => scores[key]);
            const colors = Object.keys(intelligences).map(key => intelligences[key].color);

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'نسبة الذكاء',
                        data: data,
                        backgroundColor: 'rgba(79, 70, 229, 0.2)',
                        borderColor: 'rgba(79, 70, 229, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: colors,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    }
                }
            });
        }

        // أحداث أزرار الإجراءات
        function setupActionButtons() {
            // زر تحميل PDF
            const downloadBtn = document.getElementById('downloadPdfBtn');
            if (downloadBtn) {
                downloadBtn.addEventListener('click', function () {
                    // alert('ميزة تحميل PDF ستكون متاحة قريباً!');
                    print()
                });
            }



            // زر إعادة الاختبار
            const retakeBtn = document.getElementById('retakeBtn');
            if (retakeBtn) {
                retakeBtn.addEventListener('click', function () {
                    // if (confirm('هل أنت متأكد من أنك تريد إعادة الاختبار؟ ستفقد النتائج الحالية.')) {
                    // location.href = "/rate";
                    // }
                });
            }
        }

        // تهيئة الأحداث عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function () {
            setupActionButtons();
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'9803f8a7a36f0d4b',t:'MTc1ODA2MzUzNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>