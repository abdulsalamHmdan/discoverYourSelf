<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุงูุดุฎุตูุฉ ุงููุชูุฏู - ุฎูุณุฉ ูุณุงุฑุงุช ูุฎุชููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow: hidden;
        }

        .gradient-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.08)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.3;
        }

        .card-shadow {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1), 0 10px 20px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        .fade-out {
            animation: fadeOut 0.4s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            to {
                opacity: 0;
                transform: translateY(-20px) scale(0.98);
            }
        }

        .selected-option {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;
            border: 3px solid #1e40af !important;
            color: white !important;
            font-weight: bold !important;
            transform: scale(1.02) !important;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4) !important;
            position: relative;
        }

        .selected-option::before {
            content: 'โ';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 20px;
            font-weight: bold;
        }

        .timer-display {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            font-size: 14px;
        }

        .test-takers-counter {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 12px 20px;
            border-radius: 15px;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .checkbox-selected {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            border: 3px solid #047857 !important;
            color: white !important;
        }

        .ranking-item.selected {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;
            color: white !important;
            border: 3px solid #1e40af !important;
        }

        .scale-selected {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            border: 3px solid #047857 !important;
            color: white !important;
            transform: scale(1.1) !important;
        }

        @media print {
            .noP {
                display: none;
            }


        }
    </style>
</head>

<body class="min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-6">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl font-bold text-center mb-2">๐ ุชูุฑูุฑ ุฃููุงุท ุงูุดุฎุตูุฉ โ ูููุงุณ MBTI</h1>
            <p class="text-center opacity-200">ุถูู ููุงููุณ ููุตุฉ ุจุตูุฑุฉ ูุงูุชุดุงู ุงูุฐุงุช</p>

        </div>
    </header>

    <!-- Progress Bar -->
    <div id="progressContainer" class="bg-white shadow-sm py-4 hidden">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center mb-2">
                <span id="progressText" class="text-sm font-medium text-gray-600">ุงูุณุคุงู 1 ูู 24</span>
            </div>

            <!-- Current Path Progress -->
            <div class="w-full bg-gray-200 rounded-full h-2 mb-3">
                <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300"
                    style="width: 4%"></div>
            </div>

            <!-- Overall Paths Progress -->
            <div id="pathsProgress" class="mb-2">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-medium text-gray-500">ุชูุฏู ุงููุณุงุฑุงุช ุงูุฅุฌูุงูู</span>
                    <span id="currentPathName" class="text-xs font-medium text-blue-600">ุงููุณุงุฑ ุงูุดุงูู</span>
                </div>
                <div class="flex space-x-1 space-x-reverse">
                    <div id="pathIndicator1" class="flex-1 h-1 bg-gray-200 rounded-full">
                        <div class="h-1 bg-blue-600 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <div id="pathIndicator2" class="flex-1 h-1 bg-gray-200 rounded-full">
                        <div class="h-1 bg-green-600 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <div id="pathIndicator3" class="flex-1 h-1 bg-gray-200 rounded-full">
                        <div class="h-1 bg-purple-600 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <div id="pathIndicator4" class="flex-1 h-1 bg-gray-200 rounded-full">
                        <div class="h-1 bg-pink-600 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                    <div id="pathIndicator5" class="flex-1 h-1 bg-gray-200 rounded-full">
                        <div class="h-1 bg-orange-600 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>
                <div class="flex justify-between text-xs text-gray-400 mt-1">
                    <span>ุดุงูู</span>
                    <span>ุณุฑูุน</span>
                    <span>ุนูู</span>
                    <span>ุนูุงูุงุช</span>
                    <span>ุชุฃููุฏ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Results Screen -->
            <div class="max-w-4xl mx-auto">
                <div class="bg-blue-50 card-shadow p-6">
                    <div class="text-center mb-8">
                        </div>
                       <div class="bg-gradient-to-r from-slate-500 to-slate-500 rounded-3xl shadow-2xl p-8 mb-8 text-white text-center">
                        <h1 class="text-4xl font-bold mb-4">
    <div class="text-3xl mb-4">
      ๐ ูุฑุญุจูุง  
      <span id="result-name" class="text-yellow-300"><%= name %></span>
      
    </div>
  </h1>

  <div class="bg-gradient-to-br from-slate-800/90 via-slate-600 to-gray-700 backdrop-blur-xl border border-indigo-400/20 rounded-3xl shadow-2xl p-12 text-white leading-relaxed mt-12">
  <h2 class="text-4xl font-bold mb-10 text-center text-indigo-300 drop-shadow">
    <h3 class="text-3xl font-bold text-white mb-6 text-center">๐ ูุฑุญุจูุง ุจู ูู ุชูุฑูุฑู ุงูุฎุงุต ููููุงุณ ุฃููุงุท ุงูุดุฎุตูุฉ (MBTI)</h3>

    <p class="text-xl mb-6 opacity-90">
      ูุณุนุฏูุง ุฃู ููุฏูู ูู ุชูุฑูุฑู ุงูุฎุงุต ุจูููุงุณ 
      <span class="text-indigo-300 font-semibold">ุฃููุงุท ุงูุดุฎุตูุฉ (MBTI)</span> ุถูู ููุงููุณ ููุตุฉ 
      <span class="text-indigo-300 font-semibold">ุจุตูุฑุฉ</span> ูุงูุชุดุงู ุงูุฐุงุช.
      ููุฏู ูุฐุง ุงูุชูุฑูุฑ ุฅูู ูุณุงุนุฏุชู ุนูู ููู ุดุฎุตูุชู ุจุนูู ูุงูุชุนุฑูู ุนูู ุงูุทุฑููุฉ ุงูุชู 
      <span class="text-indigo-200 font-semibold">ุชูููุฑุ ูุชุชูุงุนูุ ูุชุชูุฎุฐ ุจูุง ูุฑุงุฑุงุชู</span>ุ
      ููุง ูุชูุญ ูู ุจูุงุก ูุณุงุฑ ุฏุฑุงุณู ููููู ูุชูุงุณุจ ูุน ุฃุณููุจู ุงูุทุจูุนู ูู ุงูุญูุงุฉ ูุงูุนูู.
    </p>

    <p class="text-xl mb-6 opacity-90">
      ูุนุชูุฏ ูุฐุง ุงููููุงุณ ุนูู <span class="font-semibold text-indigo-300">ูุธุฑูุฉ ูุงุฑู ุบูุณุชุงู ูููุบ (Carl G. Jung)</span> 
      ุงูุชู ุทููุฑูุง ูููุง ุจุนุฏ 
      <span class="italic text-indigo-200">ุฅูุฒุงุจูู ูุงูุฑุฒ ููุงุซุฑูู ุจุฑูุบุฒ (Isabel Myers & Katharine Briggs)</span>ุ
      ูุชููู ููุฑุชู ุนูู ุฃู ุงููุงุณ ูุฎุชูููู ูู ุงูุทุฑููุฉ ุงูุชู 
      <span class="text-indigo-300 font-semibold">ูุฏุฑููู ุจูุง ุงูุนุงูู ููุชุนุงูููู ูุนู.</span>
    </p>

    <p class="text-xl mb-6 opacity-90">
      ูููุณ ุงููููุงุณ ุฃุฑุจุน ุซูุงุฆูุงุช ุฑุฆูุณูุฉ ุชุญุฏุฏ ููุท ุงูุดุฎุตูุฉ ุงููููููู ูู ุฃุฑุจุนุฉ ุญุฑูู:
    </p>

    <ul class="text-right text-xl opacity-90 space-y-4 max-w-3xl mx-auto list-disc list-inside">
      <li><span class="text-indigo-300 font-semibold">ุงูุงูุจุณุงุท (E)</span> โ <span class="text-indigo-300 font-semibold">ุงูุงูุทูุงุก (I)</span> โ ููู ุชูุถูู ุงูุชูุงุนู ูุน ุงูุนุงูู ูุงููุงุณ.</li>
      <li><span class="text-indigo-300 font-semibold">ุงูุญุฏุณ (N)</span> โ <span class="text-indigo-300 font-semibold">ุงูุงุณุชุดุนุงุฑ (S)</span> โ ููู ุชูุถู ุฌูุน ุงููุนูููุงุช ูููู ุงููุงูุน.</li>
      <li><span class="text-indigo-300 font-semibold">ุงูุชูููุฑ (T)</span> โ <span class="text-indigo-300 font-semibold">ุงููุดุงุนุฑ (F)</span> โ ููู ุชุชุฎุฐ ูุฑุงุฑุงุชู ูุชุชุนุงูู ูุน ุงูููู.</li>
      <li><span class="text-indigo-300 font-semibold">ุงูุญูู (J)</span> โ <span class="text-indigo-300 font-semibold">ุงูุฅุฏุฑุงู (P)</span> โ ููู ุชูุธูู ุญูุงุชู ูุชุชูุงุนู ูุน ุงูููุงูู.</li>
    </ul>

    <p class="text-xl mt-8 opacity-90">
      ููู ุฎูุงู ุฌูุน ูุชุงุฆุฌู ูู ูุฐู ุงูุฃุจุนุงุฏุ ูุญุฏูุฏ ุงููููุงุณ 
      <span class="font-semibold text-indigo-300">ููุท ุดุฎุตูุชู ุงููููุฒ</span> 
      (ูุซู: INFJุ ESTPุ ENFP...)
      ูููุฏูู ูู ุชุญููููุง ุดุงููุงู ูุฃุณููุจู ุงูุดุฎุตู ูู ุงูุชูููุฑ ูุงูุชูุงุตู ูุงูุนููุ
      ุฅุถุงูุฉู ุฅูู <span class="font-semibold text-indigo-300">ุชูุตูุงุช ููููุฉ ูุฃูุงุฏูููุฉ</span> 
      ุชุณุงุนุฏู ุนูู ุชุญููู ุงูุชูุงุฒู ุจูู ุดุฎุตูุชูุ ุฃูุฏุงููุ ูุจูุฆุชู ุงูุฏุฑุงุณูุฉ ุฃู ุงูุนูููุฉ.
    </p>
  </div>
  <div class="bg-gradient-to-br from-slate-800/90 via-slate-600 to-gray-700 backdrop-blur-xl border border-indigo-400/20 rounded-3xl shadow-2xl p-12 text-white leading-relaxed mt-12">
  <h2 class="text-4xl font-bold mb-10 text-center text-indigo-300 drop-shadow">
    ๐ก ูุตุงุฆุญ ูุจู ูุฑุงุกุฉ ุงูุชูุฑูุฑ
  </h2>

  <ul class="list-disc list-inside text-right text-xl opacity-95 space-y-4 mx-auto max-w-4xl">
    <li>ุชุฐููุฑ ุฃู ูุชุงุฆุฌ ูุฐุง ุงูุชูุฑูุฑ ุชูุซูู ุงูุนูุงุณูุง ูููููู ุงูุญุงููุฉุ ูููุณุช ุญูููุง ุซุงุจุชูุง ุนูู ุดุฎุตูุชู ุฃู ูุฏุฑุงุชู.</li>
    <li>ูุณุงุนุฏู ุงูุชูุฑูุฑ ุนูู ููู ุฐุงุชู ูุชูุณูุน ูุนูู ุงูููููุ ูููุณ ุนูู ุญุตุฑ ุงุฎุชูุงุฑุงุชู.</li>
    <li>ุงูุฑุฃ ุงููุชุงุฆุฌ ุจุนูู ูููุชุญ ูุงุนุชุจุฑูุง ูุฑุตุฉ ูุงูุชุดุงู ุฒูุงูุง ุฌุฏูุฏุฉ ูู ุดุฎุตูุชู.</li>
    <li>ุฑููุฒ ุนูู ุงููููู ุงูุฃุนูู ุฏูู ุฅููุงู ุงููููู ุงููุชูุณุทุฉ ุฃู ุงูุซุงูููุฉุ ููุฏ ุชููู ุฏุงุนูุฉ ููุณุงุฑู ุงููููู.</li>
    <li>ุชุฐููุฑ ุฃู ุงูุงูุชูุงูุงุช ุชุชุบููุฑ ุจูุฑูุฑ ุงูููุชุ ูุฐูู ูููุถูู ุฅุนุงุฏุฉ ุงูููุงุณ ุจุนุฏ ูุฑุญูุฉ ุฏุฑุงุณูุฉ ุฃู ุนูููุฉ ุฌุฏูุฏุฉ.</li>
    <li>ูุงูุด ูุชุงุฆุฌู ูุน ูุณุชุดุงุฑู ุงููููู ุฃู ุงูุฃูุงุฏููู ูุชุญุฏูุฏ ุงููุณุงุฑ ุงูุฃูุณุจ ูู.</li>
    <li>ุงุณุชุฎุฏู ูุง ุณุชูุฑุฃู ูุชุฎุทูุท ููุณุงุฑ ูุฌูุน ุจูู ุงูุดุบูุ ุงูููุงุฑุฉุ ูุงููุฑุตุฉ.</li>
  </ul>

  <p class="font-semibold text-indigo-300 text-2xl mt-10 text-center">
    ๐ฏ ูุฏู ูุฐุง ุงูุชูุฑูุฑ ูู ุฃู ุชุนุฑู ููุณู ูุชุฎุชุงุฑ ุจูุนูุ ูุง ุฃู ุชููููุฏ ููุณู ุจูุชูุฌุฉ ูุงุญุฏุฉ.
  </p>
</div>

<!-- ุงููุณุงูุฉ ุงููุงุตูุฉ ูุจู ุงูุฃูุณุงู ุงูุชุงููุฉ -->
<div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">

</div>
                    <div id="personalityResult" class="mb-8">
                        <div
                            class="bg-gradient-to-r from-blue-300 to-purple-222 text-white p-8 rounded-lg text-center mb-6">
                            <div id="" class="text-5xl font-bold mb-3">ููุทู ุงูุดุฎุตู</div>
                            <div id="personalityType" class="text-5xl font-bold mb-3">ENFP</div>
                            <div id="personalityName" class="text-2xl mb-4">ุงููููููู ุงููุจุฏุน</div>
                            <div class="bg-white bg-opacity-20 rounded-full px-6 py-2 inline-block">
                                <span class="text-lg font-medium">ูุณุชูู ุงูุซูุฉ: <span
                                        id="confidenceLevel">92</span>%</span>
                            </div>
                        </div>

                        
                        <!-- ุฃุฏุงุก ุงููุณุงุฑุงุช -->
                        <div class="bg-white p-4 rounded-lg border border-gray-200 mb-6">
                            <h4 class="font-semibold text-gray-800 mb-4 text-lg text-center">๐ค๏ธ ุฃุฏุงุก ุงููุณุงุฑุงุช</h4>
                            <div id="pathPerformance" class="grid grid-cols-5 gap-2"></div>
                        </div>

                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-green-50 p-6 rounded-lg">
                                <h4 class="font-semibold text-green-800 mb-3 text-lg">โจ ููุงุท ุงูููุฉ</h4>
                                <ul id="strengths" class="text-green-700 space-y-2"></ul>
                            </div>
                            <div class="bg-orange-50 p-6 rounded-lg">
                                <h4 class="font-semibold text-orange-800 mb-3 text-lg">๐ฏ ูุฌุงูุงุช ุงูุชุทููุฑ</h4>
                                <ul id="improvements" class="text-orange-700 space-y-2"></ul>
                            </div>
                        </div>

                        <div class="bg-gray-50 p-6 rounded-lg mb-6">
                            <h4 class="font-semibold text-gray-800 mb-4 text-lg">๐ ุชุญููู ุงููุญุงูุฑ ุงูุฃุฑุจุนุฉ</h4>
                            <div id="dimensionsAnalysis" class="space-y-4"></div>
                        </div>

                        <!-- ุงูุฑุณู ุงูุจูุงูู ุงููุฑูู ุงูุฑุฆูุณู -->
                        <div class="mb-6">
                            <div id="scoresChart" class="space-y-3"></div>
                        </div>

                        <!-- ูุณุชูู ูุถูุญ ุงูุฃุจุนุงุฏ ุชุญุช ุงูุฑุณู ูุจุงุดุฑุฉ -->
                        <div class="mb-6">
                            <div id="clarityChart" class="space-y-3"></div>
                        </div>

                        <!-- ุดุฑุญ ููุตู ูููุท ุงูุดุฎุตูุฉ -->
                        <div
                            class="bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-xl p-8 mb-8">
                            <div class="flex items-center mb-6">
                                <div class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center ml-4">
                                    <span class="text-white font-bold text-xl">๐ง</span>
                                </div>
                                <h3 class="text-2xl font-bold text-indigo-800">ุดุฑุญ ููุท ุดุฎุตูุชู ุจุงูุชูุตูู</h3>
                            </div>

                            <div id="personalityExplanation" class="space-y-6">
                                <!-- ุณูุชู ููุคูุง ุจูุงุณุทุฉ JavaScript -->
                            </div>
                        </div>

                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="bg-blue-50 p-6 rounded-lg">
                                <h4 class="font-semibold text-blue-800 mb-3">๐ผ ูู ุงูุนูู</h4>
                                <p id="workAdvice" class="text-blue-700 text-sm"></p>
                            </div>
                            <div class="bg-purple-50 p-6 rounded-lg">
                                <h4 class="font-semibold text-purple-800 mb-3">๐ ูู ุงูุฏุฑุงุณุฉ</h4>
                                <p id="studyAdvice" class="text-purple-700 text-sm"></p>
                            </div>
                            <div class="bg-pink-50 p-6 rounded-lg">
                                <h4 class="font-semibold text-pink-800 mb-3">โค๏ธ ูู ุงูุนูุงูุงุช</h4>
                                <p id="relationshipAdvice" class="text-pink-700 text-sm"></p>
                            </div>
                        </div>
                    </div>


                    <!-- Timing Statistics -->
                    <div class="mb-6">
                        <div id="timingStats">
                            <!-- Will be populated by JavaScript -->
                        </div>
                      <div class="bg-gradient-to-br from-slate-800/90 via-slate-600 to-gray-800 backdrop-blur-xl border border-indigo-400/20 rounded-3xl shadow-2xl p-12 text-white leading-relaxed mt-12">
  <h2 class="text-4xl font-bold mb-10 text-center text-indigo-300 drop-shadow">
    ๐งญ ูุตุงุฆุญ ุนูููุฉ ุจุนุฏ ูุฑุงุกุฉ ุงูุชูุฑูุฑ
  </h2>

  <p class="text-1xl text-center mb-10 opacity-95 max-w-2xl mx-auto">
    ุจุนุฏ ุงูุชูุงุฆู ูู ูุฑุงุกุฉ ูุฐุง ุงูุชูุฑูุฑ ูููู ูุชุงุฆุฌูุ ุงุฌุนู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุชุทุจูููุฉ ููุงุนูุฉ.  
    ูุงููููุฉ ุงูุญููููุฉ ูููููุงุณ ุชููู ูู <span class="text-indigo-300 font-semibold">ุชุญููู ุงููุนุฑูุฉ ุฅูู ูุนูู ููููุณ</span> ูููุฏู ูุญู ุชุทููุฑ ุฐุงุชู ููุณุงุฑู ุงููููู.
  </p>

  <div class="text-right text-2xl opacity-100 space-y-6 mx-auto max-w-5xl">
    <p>โ๏ธ <span class="font-semibold text-indigo-300">ุงูุชุจ ุฎูุงุตุฉ ูุง ุชุนูููุชู ุนู ููุณู</span> ูู ููุงุท ูุญุฏุฏุฉ โ ูุง ุงูุฐู ุฌุฐุจูุ ููุง ุงูุฐู ูุงุฌุฃูุ</p>

    <p>๐ฏ <span class="font-semibold text-indigo-300">ุงุฎุชุฑ ูุณุงุฑูู ูุญุชูููู</span> ูู ุงูุชุฎุตุตุงุช ุฃู ุงูููู ุงูููุชุฑุญุฉุ ูุงุจุฏุฃ ุจุงูุจุญุซ ุงูุฌุงุฏ ุนููุง (ุงููุชุทูุจุงุชุ ุจูุฆุฉ ุงูุนููุ ูุฑุต ุงูุชุทูุฑ).</p>

    <p>๐ฃ๏ธ <span class="font-semibold text-indigo-300">ูุงูุด ูุชุงุฆุฌู</span> ูุน ุดุฎุต ูุฎุชุต ุฃู ููุฌูู ูููู ููุณุงุนุฏู ุนูู ููู ุงููุชุงุฆุฌ ูุฑุจุทูุง ุจูุฏุฑุงุชู ุงููุงูุนูุฉ.</p>

    <p>๐งฉ <span class="font-semibold text-indigo-300">ุฌุฑูุจ ุงูุฃูุดุทุฉ ุงููุฑุชุจุทุฉ ุจููููู</span> (ุชุทูุนุ ุชุฏุฑูุจุ ูุดุฑูุน ุตุบูุฑ) ูุชุชุฃูุฏ ุฃูู ุชุณุชูุชุน ูุนูุงู ุจูุฐุง ุงููุฌุงู.</p>

    <p>๐ <span class="font-semibold text-indigo-300">ุถุน ุฎุทุฉ ูุตูุฑุฉ ุงููุฏู (30 ููููุง)</span> ูุชุทููุฑ ููุงุฑุฉ ุฃู ูุนุฑูุฉ ูู ูุฌุงู ููููู ุงูุฃุนูู.</p>

    <p>๐๏ธ <span class="font-semibold text-indigo-300">ุชุฐููุฑ ุฃู ุงููููุงุณ ุฏููู ูุง ูุฑุงุฑ</span> โ ุงุณุชุฎุฏูู ูุฎุฑูุทุฉ ุชุฑุดุฏูุ ูุง ูููุฏ ูุญุฏูู.</p>

    <p>๐ก <span class="font-semibold text-indigo-300">ุฃุนุฏ ุงูููุงุณ ูุณุชูุจูุงู</span> ุจุนุฏ ูุฑุญูุฉ ุฏุฑุงุณูุฉ ุฃู ููููุฉ ุฌุฏูุฏุฉ ูุชุชุงุจุน ุชุทูุฑ ููููู ูุงุชุฌุงูุงุชู.</p>
  </div>

  <hr class="border-t border-indigo-500/30 my-12 w-3/4 mx-auto">

  <p class="text-3xl text-center text-indigo-300 font-semibold">
    ๐ ูุฏู <span class="text-white font-bold">ยซุจุตูุฑุฉยป</span> ุฃู ุชุจูู ูุณุชูุจูู ุจุฎุทูุงุช ูุงุนูุฉ  
    ุชุฌูุน ุจูู <span class="text-indigo-200 font-semibold">ุดุบููุ ูุฏุฑุงุชูุ ููุฑุตู ุงูุญููููุฉ</span>.
  </p>
</div>

    </div>
                    </div>
                    <% if(from=="show" ) { %>
                        <div class="text-center space-x-4 space-x-reverse noP">
                            <button onclick="downloadPDF()"
                                class="bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 transform hover:scale-105">
                                ๐ ุญูุธ ูู PDF
                            </button>
                            <button onclick="(()=>{history.back()})()"
                                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition-colors">
                                <span>โช๏ธ</span>
                                <span>ุนูุฏุฉ</span>
                            </button>

                        </div>
                        <% } %>

                </div>
                
            </div>
        </div>
    </main>
    

    <script>
        // Test state
        let testState = <%-p2 %>;
        let currentQuestion = testState.currentQuestion;
        let answers = testState.answers;
        let scores = testState.scores;
        let userName = testState.userName;
        let currentPath = testState.currentPath;
        let completedPaths = testState.completedPaths;
        let allPathAnswers = testState.allPathAnswers;
        let currentQuestions = testState.currentQuestions;
        let questionStartTime = testState.questionStartTime;
        let timerInterval = testState.timerInterval;
        let totalStartTime = testState.totalStartTime;
        let questionTimes = testState.questionTimes;
        let fastestQuestion = testState.fastestQuestion;
        let slowestQuestion = testState.slowestQuestion;
        let warningShown = testState.warningShown;
        let currentRanking = testState.currentRanking;
        let selectedCheckboxes = testState.selectedCheckboxes;
        let quickAnswerCount = testState.quickAnswerCount;
        let randomAnswerPattern = testState.randomAnswerPattern;
        let contradictionFlags = testState.contradictionFlags;
        let lastAnswerTime = testState.lastAnswerTime;
        let consistencyScore = testState.consistencyScore;
        let focusBreaksShown = testState.focusBreaksShown;
        const endTime = testState.endTime

        // Path 1: Comprehensive (24 questions)
        const path1Questions = [
            // E vs I (6 questions)
            {
                question: "ูู ุงูููุงุณุจุงุช ุงูุงุฌุชูุงุนูุฉุ ุฃุดุนุฑ ุจุงูุฑุงุญุฉ ุฃูุซุฑ ุนูุฏูุง:",
                type: "binary",
                options: [
                    { text: "ุฃุชูุงุนู ูุน ุฃุดุฎุงุต ูุซูุฑูู ููุชููุนูู", dimension: "E" },
                    { text: "ุฃุชุญุฏุซ ูุน ูุฌููุนุฉ ุตุบูุฑุฉ ูู ุงูุฃุตุฏูุงุก ุงูููุฑุจูู", dimension: "I" }
                ]
            },
            {
                question: "ุนูุฏูุง ุฃุญุชุงุฌ ูุงุณุชุนุงุฏุฉ ุทุงูุชู ุจุนุฏ ููู ุทูููุ ุฃูุถู:",
                type: "binary",
                options: [
                    { text: "ุงูุฎุฑูุฌ ูุงูุชูุงุนู ูุน ุงูุขุฎุฑูู ูู ุฃูุดุทุฉ ุงุฌุชูุงุนูุฉ", dimension: "E" },
                    { text: "ูุถุงุก ููุช ูุงุฏุฆ ุจููุฑุฏู ูู ุงูููุฒู", dimension: "I" }
                ]
            },
            {
                question: "ูู ุงูุนูู ุงูุฌูุงุนูุ ุฃููู ุฅูู:",
                type: "binary",
                options: [
                    { text: "ุงูุชูููุฑ ุจุตูุช ุนุงูู ููุดุงุฑูุฉ ุงูุฃููุงุฑ ููุฑุงู", dimension: "E" },
                    { text: "ุงูุชูููุฑ ุจูุฏูุก ูุจู ูุดุงุฑูุฉ ุฃููุงุฑู", dimension: "I" }
                ]
            },
            {
                question: "ุฃุดุนุฑ ุจุงูุญูููุฉ ุฃูุซุฑ ุนูุฏูุง:",
                type: "binary",
                options: [
                    { text: "ุฃููู ูุญุงุทุงู ุจุงููุงุณ ูุงูุฃูุดุทุฉ", dimension: "E" },
                    { text: "ุฃููู ูู ุจูุฆุฉ ูุงุฏุฆุฉ ููุฑูุฒุฉ", dimension: "I" }
                ]
            },
            {
                question: "ุนูุฏ ููุงุฌูุฉ ูุดููุฉุ ุฃูุถู:",
                type: "binary",
                options: [
                    { text: "ููุงูุดุชูุง ูุน ุงูุขุฎุฑูู ููุญุตูู ุนูู ุขุฑุงุฆูู", dimension: "E" },
                    { text: "ุงูุชูููุฑ ูููุง ุจููุฑุฏู ุฃููุงู", dimension: "I" }
                ]
            },
            {
                question: "ูู ุงูุงุฌุชูุงุนุงุชุ ุฃููู ุฅูู:",
                type: "binary",
                options: [
                    { text: "ุงููุดุงุฑูุฉ ูุงูุชุนููู ุจุดูู ุชููุงุฆู", dimension: "E" },
                    { text: "ุงูุงุณุชูุงุน ุฃูุซุฑ ูุงูุชุญุฏุซ ุนูุฏ ุงูุถุฑูุฑุฉ", dimension: "I" }
                ]
            },

            // S vs N (6 questions)
            {
                question: "ุนูุฏ ุชุนูู ุดูุก ุฌุฏูุฏุ ุฃูุถู:",
                type: "binary",
                options: [
                    { text: "ุงูุจุฏุก ุจุงูุชูุงุตูู ูุงูุญูุงุฆู ุงูููููุณุฉ", dimension: "S" },
                    { text: "ููู ุงูุตูุฑุฉ ุงููุจูุฑุฉ ูุงูููุงููู ุงูุนุงูุฉ", dimension: "N" }
                ]
            },
            {
                question: "ุฃุซู ุฃูุซุฑ ูู:",
                type: "binary",
                options: [
                    { text: "ุงูุฎุจุฑุฉ ุงูุนูููุฉ ูุงูุชุฌุงุฑุจ ุงููุซุจุชุฉ", dimension: "S" },
                    { text: "ุงูุญุฏุณ ูุงูุฅููุงููุงุช ุงููุณุชูุจููุฉ", dimension: "N" }
                ]
            },
            {
                question: "ุนูุฏ ุญู ุงููุดุงููุ ุฃุฑูุฒ ุนูู:",
                type: "binary",
                options: [
                    { text: "ุงูุญููู ุงูุนูููุฉ ุงููุฌุฑุจุฉ", dimension: "S" },
                    { text: "ุงูุญููู ุงูุฅุจุฏุงุนูุฉ ูุงููุจุชูุฑุฉ", dimension: "N" }
                ]
            },
            {
                question: "ุฃุณุชูุชุน ุฃูุซุฑ ุจุงูุฃุนูุงู ุงูุชู:",
                type: "binary",
                options: [
                    { text: "ุชุชุทูุจ ุฏูุฉ ูู ุงูุชูุงุตูู ูุงูุชูููุฐ", dimension: "S" },
                    { text: "ุชุชุทูุจ ุฑุคูุฉ ูุชุฎุทูุท ูููุณุชูุจู", dimension: "N" }
                ]
            },
            {
                question: "ุนูุฏ ูุฑุงุกุฉ ุงูุชุนูููุงุชุ ุฃููู ุฅูู:",
                type: "binary",
                options: [
                    { text: "ุงุชุจุงุนูุง ุฎุทูุฉ ุจุฎุทูุฉ ุจุฏูุฉ", dimension: "S" },
                    { text: "ููู ุงููุฏู ุงูุนุงู ูุงูุงุฑุชุฌุงู", dimension: "N" }
                ]
            },
            {
                question: "ุฃูุถู ุงููุญุงุฏุซุงุช ุงูุชู ุชุฏูุฑ ุญูู:",
                type: "binary",
                options: [
                    { text: "ุงูุฃุญุฏุงุซ ุงูุญุงููุฉ ูุงูุชุฌุงุฑุจ ุงููุงูุนูุฉ", dimension: "S" },
                    { text: "ุงูุฃููุงุฑ ูุงูุงุญุชูุงูุงุช ุงููุณุชูุจููุฉ", dimension: "N" }
                ]
            },

            // T vs F (6 questions)
            {
                question: "ุนูุฏ ุงุชุฎุงุฐ ูุฑุงุฑ ูููุ ุฃุนุทู ุงูุฃููููุฉ ูู:",
                type: "binary",
                options: [
                    { text: "ุงูุชุญููู ุงูููุทูู ูุงูุญูุงุฆู ุงูููุถูุนูุฉ", dimension: "T" },
                    { text: "ุงูููู ุงูุดุฎุตูุฉ ูุชุฃุซูุฑ ุงููุฑุงุฑ ุนูู ุงูุขุฎุฑูู", dimension: "F" }
                ]
            },
            {
                question: "ูู ุงูููุงุดุงุชุ ุฃุฑูุฒ ุนูู:",
                type: "binary",
                options: [
                    { text: "ุงูุญุฌุฌ ุงูููุทููุฉ ูุงูุฃุฏูุฉ", dimension: "T" },
                    { text: "ูุดุงุนุฑ ุงูุฃุดุฎุงุต ููุฌูุงุช ูุธุฑูู", dimension: "F" }
                ]
            },
            {
                question: "ุนูุฏ ุชูููู ุงูุฃุฏุงุกุ ุฃูุชู ุฃูุซุฑ ุจู:",
                type: "binary",
                options: [
                    { text: "ุงูููุงุกุฉ ูุงููุชุงุฆุฌ ุงููุญููุฉ", dimension: "T" },
                    { text: "ุงูุฌูุฏ ุงููุจุฐูู ูุงูุธุฑูู ุงูุดุฎุตูุฉ", dimension: "F" }
                ]
            },
            {
                question: "ุฃุดุนุฑ ุจุงูุฑุถุง ุฃูุซุฑ ุนูุฏูุง:",
                type: "binary",
                options: [
                    { text: "ุฃุญู ูุดููุฉ ูุนูุฏุฉ ุจุทุฑููุฉ ููุทููุฉ", dimension: "T" },
                    { text: "ุฃุณุงุนุฏ ุดุฎุตุงู ูู ุชุญุณูู ุญุงูุชู", dimension: "F" }
                ]
            },
            {
                question: "ูู ุจูุฆุฉ ุงูุนููุ ุฃูุฏุฑ:",
                type: "binary",
                options: [
                    { text: "ุงูุนุฏุงูุฉ ูุงููุนุงููุฑ ุงูููุญุฏุฉ", dimension: "T" },
                    { text: "ุงูุชููู ูุงููุฑููุฉ ูุน ุงูุธุฑูู ุงููุฑุฏูุฉ", dimension: "F" }
                ]
            },
            {
                question: "ุนูุฏ ุชูุฏูู ุงูููุฏุ ุฃููู ุฅูู:",
                type: "binary",
                options: [
                    { text: "ุงูุชุฑููุฒ ุนูู ุงูุฃุฎุทุงุก ูุงูุญููู ุงูููุทููุฉ", dimension: "T" },
                    { text: "ูุฑุงุนุงุฉ ูุดุงุนุฑ ุงูุดุฎุต ูุชูุฏูู ุงูุฏุนู", dimension: "F" }
                ]
            },

            // J vs P (6 questions)
            {
                question: "ุฃูุถู ุฃู ุชููู ุฎุทุทู:",
                type: "binary",
                options: [
                    { text: "ูุญุฏุฏุฉ ูููุธูุฉ ูุน ุฌุฏูู ุฒููู ูุงุถุญ", dimension: "J" },
                    { text: "ูุฑูุฉ ููุงุจูุฉ ููุชุนุฏูู ุญุณุจ ุงูุธุฑูู", dimension: "P" }
                ]
            },
            {
                question: "ูู ุงููุดุงุฑูุนุ ุฃูุถู:",
                type: "binary",
                options: [
                    { text: "ุฅููุงุก ุงูููุงู ูุจูุฑุงู ูุชุฌูุจ ุถุบุท ุงูููุช", dimension: "J" },
                    { text: "ุงูุนูู ุชุญุช ุถุบุท ุงูููุช ููุญุตูู ุนูู ุฃูุถู ุงููุชุงุฆุฌ", dimension: "P" }
                ]
            },
            {
                question: "ุนูุฏ ุงูุชุณููุ ุฃููู ุฅูู:",
                type: "binary",
                options: [
                    { text: "ุฅุนุฏุงุฏ ูุงุฆูุฉ ูุญุฏุฏุฉ ูุงูุงูุชุฒุงู ุจูุง", dimension: "J" },
                    { text: "ุงูุชุฌูู ูุงุณุชูุดุงู ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ", dimension: "P" }
                ]
            },
            {
                question: "ุฃุดุนุฑ ุจุงูุฑุงุญุฉ ุฃูุซุฑ ุนูุฏูุง:",
                type: "binary",
                options: [
                    { text: "ุชููู ุงูุฃููุฑ ููุฑุฑุฉ ููุญุณููุฉ", dimension: "J" },
                    { text: "ุชุจูู ุงูุฎูุงุฑุงุช ููุชูุญุฉ ููุชุบููุฑ", dimension: "P" }
                ]
            },
            {
                question: "ูู ุฅุฏุงุฑุฉ ุงูููุชุ ุฃูุถู:",
                type: "binary",
                options: [
                    { text: "ุฌุฏููุฉ ุงูููุงู ูุงูุงูุชุฒุงู ุจุงูููุงุนูุฏ", dimension: "J" },
                    { text: "ุงููุฑููุฉ ูุงูุชููู ูุน ูุง ูุญุฏุซ", dimension: "P" }
                ]
            },
            {
                question: "ุนูุฏ ุงูุณูุฑุ ุฃูุถู:",
                type: "binary",
                options: [
                    { text: "ุงูุชุฎุทูุท ุงููุณุจู ูุญุฌุฒ ูู ุดูุก ููุฏูุงู", dimension: "J" },
                    { text: "ุงูุฐูุงุจ ุจุฑูุญ ุงููุบุงูุฑุฉ ูุงุชุฎุงุฐ ุงููุฑุงุฑุงุช ุฃุซูุงุก ุงูุณูุฑ", dimension: "P" }
                ]
            }
        ];

        // Path 2: Quick (10 questions) - ูููุงุณ ูู 1 ุฅูู 5
        const path2Questions = [
            {
                question: "ุนูุฏ ุงูุดุนูุฑ ุจุงูุชุนุจ ูุงูุฅุฑูุงูุ ูุง ูุฏู ุชูุถููู ููุฃูุดุทุฉ ุงูุงุฌุชูุงุนูุฉ ููุงุจู ุงูููุช ุงููููุฑุฏุ",
                type: "scale",
                scaleType: "EI",
                leftLabel: "ุฃูุถู ุงููุฏูุก ูุงูุนุฒูุฉ ุงูุชุงูุฉ (ุงูุทูุงุฆู)",
                rightLabel: "ุฃูุถู ุงูุฃูุดุทุฉ ุงูุงุฌุชูุงุนูุฉ ูุงูุชูุงุนู (ุงูุจุณุงุทู)"
            },
            {
                question: "ุนูุฏ ุงุชุฎุงุฐ ูุฑุงุฑ ูููุ ูุง ูุฏู ุงุนุชูุงุฏู ุนูู ุงูุญูุงุฆู ุงูููููุณุฉ ููุงุจู ุงูุญุฏุณ ูุงูุฅููุงููุงุชุ",
                type: "scale",
                scaleType: "SN",
                leftLabel: "ุฃุนุชูุฏ ุนูู ุงูุญูุงุฆู ูุงูุชุฌุงุฑุจ (ุญุณูู)",
                rightLabel: "ุฃุนุชูุฏ ุนูู ุงูุญุฏุณ ูุงูุฅููุงููุงุช (ุญุฏุณู)"
            },
            {
                question: "ูู ุงูููุงูู ุงูุตุนุจุฉุ ูุง ูุฏู ุงุนุชูุงุฏู ุนูู ุงูุชุญููู ุงูููุทูู ููุงุจู ูุฑุงุนุงุฉ ุงููุดุงุนุฑุ",
                type: "scale",
                scaleType: "TF",
                leftLabel: "ุฃุนุชูุฏ ุนูู ุงูููุทู ูุงูุชุญููู (ุชูููุฑ)",
                rightLabel: "ุฃุฑุงุนู ุงููุดุงุนุฑ ูุงูููู (ุดุนูุฑ)"
            },
            {
                question: "ูู ุชูุธูู ุญูุงุชู ุงูููููุฉุ ูุง ูุฏู ุชูุถููู ููุชุฎุทูุท ุงููุณุจู ููุงุจู ุงููุฑููุฉุ",
                type: "scale",
                scaleType: "JP",
                leftLabel: "ุฃูุถู ุงูุชุฎุทูุท ูุงูุฌุฏุงูู ุงูุซุงุจุชุฉ (ุญูู)",
                rightLabel: "ุฃูุถู ุงููุฑููุฉ ูุงูุชููู (ุฅุฏุฑุงู)"
            },
            {
                question: "ูู ุงูููุงุณุจุงุช ุงูุงุฌุชูุงุนูุฉ ุงููุจูุฑุฉุ ูุง ูุฏู ุดุนูุฑู ุจุงูุฑุงุญุฉ ูุงูุญูููุฉุ",
                type: "scale",
                scaleType: "EI",
                leftLabel: "ุฃุดุนุฑ ุจุงูุชุนุจ ูุฃูุถู ุงููุบุงุฏุฑุฉ ูุจูุฑุงู (ุงูุทูุงุฆู)",
                rightLabel: "ุฃุดุนุฑ ุจุงูุญูููุฉ ูุฃุณุชูุชุน ุจุงูุชูุงุนู (ุงูุจุณุงุทู)"
            },
            {
                question: "ุนูุฏ ููุงุฌูุฉ ูุดููุฉ ุฌุฏูุฏุฉุ ูุง ูุฏู ุงุนุชูุงุฏู ุนูู ุงูุฎุจุฑุฉ ุงูุณุงุจูุฉ ููุงุจู ุงูุญููู ุงูุฅุจุฏุงุนูุฉุ",
                type: "scale",
                scaleType: "SN",
                leftLabel: "ุฃุนุชูุฏ ุนูู ุงูุฎุจุฑุฉ ูุงูุทุฑู ุงููุฌุฑุจุฉ (ุญุณูู)",
                rightLabel: "ุฃุจุญุซ ุนู ุญููู ุฅุจุฏุงุนูุฉ ุฌุฏูุฏุฉ (ุญุฏุณู)"
            },
            {
                question: "ุนูุฏ ุญู ุงููุฒุงุนุงุชุ ูุง ูุฏู ุชุฑููุฒู ุนูู ุงูุนุฏุงูุฉ ููุงุจู ุงูุญูุงุธ ุนูู ุงููุดุงุนุฑุ",
                type: "scale",
                scaleType: "TF",
                leftLabel: "ุฃุฑูุฒ ุนูู ุงูุนุฏุงูุฉ ูุงูุญู (ุชูููุฑ)",
                rightLabel: "ุฃุฑูุฒ ุนูู ุงููุดุงุนุฑ ูุงูุงูุณุฌุงู (ุดุนูุฑ)"
            },
            {
                question: "ูู ุฅูุฌุงุฒ ุงููุดุงุฑูุนุ ูุง ูุฏู ุชูุถููู ููุฅููุงุก ุงููุจูุฑ ููุงุจู ุงูุนูู ุชุญุช ุงูุถุบุทุ",
                type: "scale",
                scaleType: "JP",
                leftLabel: "ุฃูุถู ุงูุฅููุงุก ุงููุจูุฑ ูุงูุชุฎุทูุท (ุญูู)",
                rightLabel: "ุฃุนูู ุจููุงุกุฉ ุฃูุจุฑ ุชุญุช ุงูุถุบุท (ุฅุฏุฑุงู)"
            },
            {
                question: "ูู ุงูููุงูุดุงุชุ ูุง ูุฏู ุชูุถููู ููุชูููุฑ ุงูุตุงูุช ููุงุจู ุงูุชูููุฑ ุจุตูุช ุนุงููุ",
                type: "scale",
                scaleType: "EI",
                leftLabel: "ุฃููุฑ ุจุตูุช ุซู ุฃุชุญุฏุซ (ุงูุทูุงุฆู)",
                rightLabel: "ุฃููุฑ ุจุตูุช ุนุงูู ุฃุซูุงุก ุงูุญุฏูุซ (ุงูุจุณุงุทู)"
            },
            {
                question: "ูู ุงูุชุนูู ูุงูุนููุ ูุง ูุฏู ุชูุถููู ููุฃุณุงููุจ ุงูุชูููุฏูุฉ ููุงุจู ุงูุทุฑู ุงููุจุชูุฑุฉุ",
                type: "scale",
                scaleType: "SN",
                leftLabel: "ุฃูุถู ุงูุฃุณุงููุจ ุงููุฌุฑุจุฉ ูุงูุชูููุฏูุฉ (ุญุณูู)",
                rightLabel: "ุฃูุถู ุงูุทุฑู ุงููุจุชูุฑุฉ ูุงูุฌุฏูุฏุฉ (ุญุฏุณู)"
            }
        ];

        // Path 3: Work Focus (6 questions)
        const path3Questions = [
            {
                question: "ูู ุจูุฆุฉ ุงูุนููุ ุฃุญูู ุฃูุถู ุฃุฏุงุก ุนูุฏูุง:",
                type: "binary",
                options: [
                    { text: "ุฃุนูู ุถูู ูุฑูู ูุชูุงุนู ูุน ุชุจุงุฏู ูุณุชูุฑ ููุฃููุงุฑ", dimension: "E" },
                    { text: "ุฃุนูู ุจุดูู ูุณุชูู ูุน ุชุฑููุฒ ุนููู ููุฏูุก", dimension: "I" }
                ]
            },
            {
                question: "ุนูุฏ ููุงุฌูุฉ ุชุญุฏูุงุช ููููุฉ ุฌุฏูุฏุฉุ ุฃููู ุฅูู:",
                type: "binary",
                options: [
                    { text: "ุงูุงุนุชูุงุฏ ุนูู ุงูุฎุจุฑุงุช ุงููุซุจุชุฉ ูุงูุฅุฌุฑุงุกุงุช ุงูููุซููุฉ", dimension: "S" },
                    { text: "ุงุณุชูุดุงู ุญููู ูุจุชูุฑุฉ ูุทุฑู ุบูุฑ ุชูููุฏูุฉ", dimension: "N" }
                ]
            },
            {
                question: "ุนูุฏ ุชูููู ุงูุฃุฏุงุก ูู ุงูุนููุ ุฃุนุทู ุงูุฃููููุฉ ูู:",
                type: "binary",
                options: [
                    { text: "ุงููุชุงุฆุฌ ุงููุญููุฉ ูุงููุนุงููุฑ ุงูููุถูุนูุฉ ููุฃุฏุงุก", dimension: "T" },
                    { text: "ุงูุฌูุฏ ุงููุจุฐูู ูุงูุธุฑูู ุงูุดุฎุตูุฉ ููููุธู", dimension: "F" }
                ]
            },
            {
                question: "ูู ุงูุชุนุงูู ูุน ุงูููุงุนูุฏ ุงูููุงุฆูุฉ ูุงููุดุงุฑูุน:",
                type: "binary",
                options: [
                    { text: "ุฃุถุน ุฎุทุฉ ููุตูุฉ ูุฃูุชุฒู ุจูุง ุจุฏูุฉ", dimension: "J" },
                    { text: "ุฃุญุชูุธ ุจูุฑููุฉ ููุชููู ูุน ุงููุชุบูุฑุงุช", dimension: "P" }
                ]
            },
            {
                question: "ุฃูุฏุฑ ุฃูุซุฑ ูู ุงูููุงุฏุฉ ุงูููููุฉ:",
                type: "binary",
                options: [
                    { text: "ุงูุชุฑููุฒ ุนูู ุชุญููู ุงูุฃูุฏุงู ุจููุงุกุฉ ุนุงููุฉ", dimension: "T" },
                    { text: "ุงูุงูุชูุงู ุจุชูููุฉ ุงููุฑูู ูุจูุงุก ุงูุนูุงูุงุช", dimension: "F" }
                ]
            },
            {
                question: "ูู ุงุฌุชูุงุนุงุช ุงูุนููุ ุณูููู ุงููุนุชุงุฏ ูู:",
                type: "binary",
                options: [
                    { text: "ุงููุจุงุฏุฑุฉ ุจุทุฑุญ ุงูุฃููุงุฑ ูุงููุดุงุฑูุฉ ุงููุดุทุฉ", dimension: "E" },
                    { text: "ุงูุงุณุชูุงุน ุจุนูุงูุฉ ูุงูุชูููุฑ ูุจู ุงููุณุงููุฉ", dimension: "I" }
                ]
            }
        ];

        // Path 4: Relationships (6 questions)
        const path4Questions = [
            {
                question: "ุฑุชุจ ูุฐู ุงูุฃูุดุทุฉ ุงูุงุฌุชูุงุนูุฉ ุญุณุจ ุชูุถููู (ูู ุงูุฃูุซุฑ ุฅูู ุงูุฃูู ุชูุถููุงู):",
                type: "ranking",
                items: [
                    { text: "ุญููุฉ ูุจูุฑุฉ ูุน ุฃุดุฎุงุต ุฌุฏุฏ", dimension: "E", points: 4 },
                    { text: "ุนุดุงุก ูุงุฏุฆ ูุน ุตุฏูู ููุฑุจ", dimension: "I", points: 4 },
                    { text: "ูุดุงุท ุฌูุงุนู ููุธู", dimension: "E", points: 3 },
                    { text: "ูุถุงุก ููุช ูููุฑุฏ ูู ุงูููุฒู", dimension: "I", points: 3 }
                ]
            },
            {
                question: "ุงุฎุชุฑ 3 ุฎูุงุฑุงุช ุฃู ุฃูุซุฑ ุงูุชู ุชุตู ุทุฑููุชู ูู ุงูุชูุงุตู ูุน ุงูุขุฎุฑูู:",
                type: "checkbox",
                minSelections: 3,
                options: [
                    { text: "ุฃุญุจ ูุดุงุฑูุฉ ุงูุชูุงุตูู ุงูููููุฉ", dimension: "S" },
                    { text: "ุฃูุงูุด ุงูุฃููุงุฑ ูุงูููุงููู ุงููุฌุฑุฏุฉ", dimension: "N" },
                    { text: "ุฃุฑูุฒ ุนูู ุงูุญูุงุฆู ูุงูุฃุญุฏุงุซ", dimension: "S" },
                    { text: "ุฃุชุญุฏุซ ุนู ุงูุฃุญูุงู ูุงูุทููุญุงุช", dimension: "N" },
                    { text: "ุฃูุถู ุงููุญุงุฏุซุงุช ุงูุนูููุฉ", dimension: "S" },
                    { text: "ุฃุณุชูุชุน ุจุงูููุงุดุงุช ุงูููุณููุฉ", dimension: "N" }
                ]
            },
            {
                question: "ุฑุชุจ ูุฐู ุงูุทุฑู ูุญู ุงูุฎูุงูุงุช ุญุณุจ ูุง ุชูุถูู:",
                type: "ranking",
                items: [
                    { text: "ุชุญููู ุงููุดููุฉ ููุทููุงู", dimension: "T", points: 4 },
                    { text: "ุงูุชุฑููุฒ ุนูู ูุดุงุนุฑ ุงูุฌููุน", dimension: "F", points: 4 },
                    { text: "ุงูุจุญุซ ุนู ุญู ุนุงุฏู", dimension: "T", points: 3 },
                    { text: "ุงูุญูุงุธ ุนูู ุงูุงูุณุฌุงู", dimension: "F", points: 3 }
                ]
            },
            {
                question: "ุงุฎุชุฑ 3 ุฎูุงุฑุงุช ุฃู ุฃูุซุฑ ุงูุชู ุชุตู ุชูุถููุงุชู ูู ุงูุชุฎุทูุท ุงูุงุฌุชูุงุนู:",
                type: "checkbox",
                minSelections: 3,
                options: [
                    { text: "ุฃุฎุทุท ููุฃูุดุทุฉ ูุณุจูุงู", dimension: "J" },
                    { text: "ุฃูุถู ุงููุฑุงุฑุงุช ุงูุนูููุฉ", dimension: "P" },
                    { text: "ุฃุญุจ ุงูุฌุฏุงูู ุงููุญุฏุฏุฉ", dimension: "J" },
                    { text: "ุฃุชููู ูุน ูุง ูุญุฏุซ", dimension: "P" },
                    { text: "ุฃุญุฌุฒ ุงูุฃูุงูู ููุฏูุงู", dimension: "J" },
                    { text: "ุฃูุฑุฑ ูู ุงููุญุธุฉ ุงูุฃุฎูุฑุฉ", dimension: "P" }
                ]
            },
            {
                question: "ุฑุชุจ ูุฐู ุงูุตูุงุช ูู ุงูุฃุตุฏูุงุก ุญุณุจ ุฃูููุชูุง ูู:",
                type: "ranking",
                items: [
                    { text: "ููุฏู ูุตุงุฆุญ ููุทููุฉ", dimension: "T", points: 4 },
                    { text: "ูุชููู ูุดุงุนุฑู", dimension: "F", points: 4 },
                    { text: "ุตุงุฏู ููุจุงุดุฑ", dimension: "T", points: 3 },
                    { text: "ุฏุงุนู ููุชุนุงุทู", dimension: "F", points: 3 }
                ]
            },
            {
                question: "ุงุฎุชุฑ 3 ุฎูุงุฑุงุช ุฃู ุฃูุซุฑ ุงูุชู ุชุตู ุณูููู ูู ุงูููุงุณุจุงุช ุงูุงุฌุชูุงุนูุฉ:",
                type: "checkbox",
                minSelections: 3,
                options: [
                    { text: "ุฃุชุญุฏุซ ูุน ุฃุดุฎุงุต ูุซูุฑูู", dimension: "E" },
                    { text: "ุฃุฑูุฒ ุนูู ูุญุงุฏุซุงุช ุนูููุฉ", dimension: "I" },
                    { text: "ุฃููู ูุฑูุฒ ุงูุงูุชูุงู", dimension: "E" },
                    { text: "ุฃุณุชูุน ุฃูุซุฑ ููุง ุฃุชุญุฏุซ", dimension: "I" },
                    { text: "ุฃูุชูู ุจูู ุงููุฌููุนุงุช", dimension: "E" },
                    { text: "ุฃุจูู ูุน ููุณ ุงูุฃุดุฎุงุต", dimension: "I" }
                ]
            }
        ];

        // Path 5: Validation (4 questions)
        const path5Questions = [
            {
                question: "ุจุดูู ุนุงูุ ุฃุณุชูุฏ ุทุงูุชู ูู:",
                type: "binary",
                options: [
                    { text: "ุงูุชูุงุนู ุงูุงุฌุชูุงุนู ูุงูุฃูุดุทุฉ ุงูุฎุงุฑุฌูุฉ", dimension: "E" },
                    { text: "ุงูุชุฃูู ุงูุฏุงุฎูู ูุงูุฃูุดุทุฉ ุงููุฑุฏูุฉ", dimension: "I" }
                ]
            },
            {
                question: "ุนูุฏ ููุงุฌูุฉ ูููู ุฌุฏูุฏุ ุฃุนุชูุฏ ุฃูุซุฑ ุนูู:",
                type: "binary",
                options: [
                    { text: "ุงูุฎุจุฑุฉ ุงูุณุงุจูุฉ ูุงูุญูุงุฆู ุงูููููุณุฉ", dimension: "S" },
                    { text: "ุงูุญุฏุณ ูุงูุฅููุงููุงุช ุงููุณุชูุจููุฉ", dimension: "N" }
                ]
            },
            {
                question: "ูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช ุงููููุฉุ ุงูุฃููููุฉ ูุฏู:",
                type: "binary",
                options: [
                    { text: "ุงูุชุญููู ุงูููุทูู ูุงูููุถูุนูุฉ", dimension: "T" },
                    { text: "ุงูููู ุงูุดุฎุตูุฉ ูุงูุชุฃุซูุฑ ุนูู ุงูุขุฎุฑูู", dimension: "F" }
                ]
            },
            {
                question: "ุฃุดุนุฑ ุจุงูุฑุงุญุฉ ุฃูุซุฑ ุนูุฏูุง ุชููู ุญูุงุชู:",
                type: "binary",
                options: [
                    { text: "ููุธูุฉ ููุฎุทุทุฉ ูุน ุฃูุฏุงู ูุงุถุญุฉ", dimension: "J" },
                    { text: "ูุฑูุฉ ูููุชูุญุฉ ูููุฑุต ูุงูุชุบููุฑุงุช", dimension: "P" }
                ]
            }
        ];

        // Personality types database
        const personalityTypes = {
            "ENFP": {
                name: "ุงููููููู ุงููุจุฏุน",
                strengths: ["ูุชุญูุณ ููุจุฏุน", "ููุชุงุฒ ูู ุงูุชูุงุตู", "ูุฑู ููุชููู", "ูููู ุงูุขุฎุฑูู", "ูุชูุงุฆู ูุฅูุฌุงุจู"],
                improvements: ["ูุฏ ููุชูุฑ ููุชุฑููุฒ", "ูุญุชุงุฌ ูุชุทููุฑ ุงููุซุงุจุฑุฉ", "ูุฏ ูุชุฌูุจ ุงูุชูุงุตูู ุงูุฑูุชูููุฉ", "ูุญุชุงุฌ ูุชุญุณูู ุฅุฏุงุฑุฉ ุงูููุช"],
                work: "ูุฒุฏูุฑ ูู ุงูุจูุฆุงุช ุงูุฅุจุฏุงุนูุฉ ูุงูุชุนุงูููุฉุ ูุซู ุงูุชุณููู ูุงูุฅุนูุงู ูุงูุงุณุชุดุงุฑุงุช ูุงูุชุฏุฑูุจ",
                study: "ููุถู ุงูุชุนูู ุงูุชูุงุนูู ูุงููุดุงุฑูุน ุงูุฌูุงุนูุฉ ูุงูููุงุถูุน ุงููุชููุนุฉ ูุงูููุงุดุงุช ุงูููุชูุญุฉ",
                relationships: "ุงุฌุชูุงุนู ููุชูููุ ููุฏุฑ ุงูุนูุงูุงุช ุงูุนูููุฉ ูุงูููุงุดุงุช ุงููุนูููุฉ ููุญุจ ูุณุงุนุฏุฉ ุงูุขุฎุฑูู"
            },
            "INTJ": {
                name: "ุงููููุฏุณ ุงููุนูุงุฑู",
                strengths: ["ุงุณุชุฑุงุชูุฌู ููุฎุทุท", "ูุณุชูู ููุฑูุฒ", "ูุจุฏุน ูู ุญู ุงููุดุงูู", "ูุณุนู ููุชููุฒ", "ูุงุซู ูู ููุณู"],
                improvements: ["ูุฏ ูุจุฏู ููุนุฒูุงู", "ูุญุชุงุฌ ูุชุทููุฑ ุงููุฑููุฉ", "ูุฏ ูุชุฌุงูู ุงููุดุงุนุฑ ุฃุญูุงูุงู", "ุบูุฑ ุตุจูุฑ ูุน ุนุฏู ุงูููุงุกุฉ"],
                work: "ููุชุงุฒ ูู ุงูุฃุฏูุงุฑ ุงูุงุณุชุฑุงุชูุฌูุฉ ูุงูุชูููุฉ ูุซู ุงูููุฏุณุฉ ูุงูุจุญุซ ูุงูุฅุฏุงุฑุฉ ุงูุนููุง ูุงูุชุฎุทูุท",
                study: "ููุถู ุงูุชุนูู ุงููุณุชูู ูุงูููุงุถูุน ุงููุนูุฏุฉ ูุงูุชุญููู ุงูุนููู ูุงูุชุฎุตุต ุงูุฏููู",
                relationships: "ููุฏุฑ ุงูุนูุงูุงุช ุงูููููุฉ ูุงูุนูููุฉุ ููุญุชุงุฌ ูุดุฑูู ูุญุชุฑู ุงุณุชููุงููุชู ูุฃูุฏุงูู"
            },
            "ENFJ": {
                name: "ุงููุนูู ุงููููู",
                strengths: ["ูุงุฆุฏ ุทุจูุนู", "ูุชููู ููุชุนุงุทู", "ููุชุงุฒ ูู ุงูุชุญููุฒ", "ูุทูุฑ ุงูุขุฎุฑูู", "ุฑุคูุฉ ูุงุถุญุฉ"],
                improvements: ["ูุฏ ูููู ุงุญุชูุงุฌุงุชู ุงูุดุฎุตูุฉ", "ุญุณุงุณ ููููุฏ", "ูุฏ ูููู ูุซุงููุงู ุฃูุซุฑ ูู ุงููุงุฒู", "ูุญุชุงุฌ ูุชุนูู ููู ูุง"],
                work: "ูุชููู ูู ุงูุชุนููู ูุงูุฅุฑุดุงุฏ ูุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุงูุนูุงูุงุช ุงูุนุงูุฉ ูุงูููุงุฏุฉ",
                study: "ูุญุจ ุงูุชุนูู ุงูุชุนุงููู ูุงูููุงุถูุน ุงูุฅูุณุงููุฉ ูุงูููุงุดุงุช ุงูุฌูุงุนูุฉ ูุงููุดุงุฑูุน ุฐุงุช ุงููุนูู",
                relationships: "ุฏุงุนู ููุฎูุตุ ูุณุชุซูุฑ ุจุนูู ูู ุนูุงูุงุชู ููุณุงุนุฏ ุงูุขุฎุฑูู ุนูู ุงูููู"
            },
            "INFP": {
                name: "ุงููุณูุท ุงููุซุงูู",
                strengths: ["ูุจุฏุน ูุฃุตูู", "ูุชููู ููุชุนุงุทู", "ูุฑู ููููุชุญ", "ููุฏุฑ ุงูุฃุตุงูุฉ", "ูุฏููุน ุจุงูููู"],
                improvements: ["ูุฏ ูููู ุญุณุงุณุงู ุฌุฏุงู", "ูุชุฌูุจ ุงูุตุฑุงุนุงุช", "ูุฏ ูุคุฌู ุงูููุงู", "ูุญุชุงุฌ ููุชุญููุฒ ุงูุฎุงุฑุฌู"],
                work: "ูุฒุฏูุฑ ูู ุงููุชุงุจุฉ ูุงููููู ูุงูุงุณุชุดุงุฑุฉ ุงูููุณูุฉ ูุงูุนูู ุงูุฎูุฑู ูุงูุชุตููู",
                study: "ููุถู ุงูุชุนูู ุงูุฐุงุชู ูุงูููุงุถูุน ุงูุชู ุชุชูุงุดู ูุน ูููู ูุงูุชุนุจูุฑ ุงูุฅุจุฏุงุนู",
                relationships: "ูุฎูุต ูุฏุงุนูุ ููุฏุฑ ุงูุนูู ูุงูุฃุตุงูุฉ ูู ุงูุนูุงูุงุช ููุญุชุฑู ุงุณุชููุงููุฉ ุงูุขุฎุฑูู"
            },
            "ESTJ": {
                name: "ุงููุฏูุฑ ุงูุชูููุฐู",
                strengths: ["ููุธู ูููุก", "ูุงุฆุฏ ุทุจูุนู", "ุนููู ููุงูุนู", "ููุซูู ููุณุคูู", "ูุญูู ุงููุชุงุฆุฌ"],
                improvements: ["ูุฏ ูููู ุตุงุฑูุงู ุฌุฏุงู", "ููุงูู ุงูุชุบููุฑ ุฃุญูุงูุงู", "ูุฏ ูุชุฌุงูู ุงููุดุงุนุฑ", "ูุญุชุงุฌ ูุชุทููุฑ ุงููุฑููุฉ"],
                work: "ูุชููู ูู ุงูุฅุฏุงุฑุฉ ูุงูุฃุนูุงู ูุงููุงููู ูุงูููุฏุณุฉ ูุงูุฎุฏูุงุช ุงููุงููุฉ",
                study: "ููุถู ุงูุชุนูู ุงูููุธู ูุงูููุงุถูุน ุงูุนูููุฉ ูุงูุฃูุฏุงู ุงููุงุถุญุฉ ูุงูุชุทุจูู ุงููุจุงุดุฑ",
                relationships: "ูุฎูุต ููุณุคููุ ููุฏุฑ ุงูุงุณุชูุฑุงุฑ ูุงูุชูุงููุฏ ููุนูู ุจุฌุฏ ูุฏุนู ุฃุญุจุงุฆู"
            },
            "ISTP": {
                name: "ุงูุญุฑูู ุงููุจุฏุน",
                strengths: ["ุนููู ูููุงุฑู", "ูุฑู ููุชููู", "ูุณุชูู ููุงุฏุฆ", "ูุญู ุงููุดุงูู ุจููุงุกุฉ", "ูุงูุนู"],
                improvements: ["ูุฏ ูููู ููุนุฒูุงู", "ูุชุฌูุจ ุงูุงูุชุฒุงูุงุช ุทูููุฉ ุงููุฏู", "ูุฏ ูุจุฏู ุบูุฑ ูุจุงูู", "ูุญุชุงุฌ ูุชุทููุฑ ุงูุชูุงุตู"],
                work: "ูุฒุฏูุฑ ูู ุงูููุฏุณุฉ ูุงูุญุฑู ูุงูุฑูุงุถุฉ ูุงูุทุจ ูุงูุชูููููุฌูุง",
                study: "ููุถู ุงูุชุนูู ุงูุนููู ูุงูุชุฌุฑูุจ ุงููุจุงุดุฑ ูุงูููุงุถูุน ุงูุชูููุฉ ูุงูุนูู ุงููุฑุฏู",
                relationships: "ูุฎูุต ูุฏุงุนู ุจุทุฑููุฉ ุนูููุฉุ ููุฏุฑ ุงูุญุฑูุฉ ูุงูุงุณุชููุงููุฉ ูู ุงูุนูุงูุงุช"
            },
            "ESFP": {
                name: "ุงููุคุฏู ุงููุชุญูุณ",
                strengths: ["ูุชุญูุณ ููุฑุญ", "ุงุฌุชูุงุนู ูุฏูุฏ", "ูุฑู ูุนููู", "ูููู ุงูุขุฎุฑูู", "ูุชูุงุฆู"],
                improvements: ["ูุฏ ููุชูุฑ ููุชุฎุทูุท", "ุญุณุงุณ ููููุฏ", "ูุฏ ูุชุฌูุจ ุงูุตุฑุงุนุงุช", "ูุญุชุงุฌ ููุชุฑููุฒ"],
                work: "ูุชููู ูู ุงูุชุฑููู ูุงูุชุนููู ูุงููุจูุนุงุช ูุงูุฎุฏูุงุช ูุงููููู",
                study: "ูุญุจ ุงูุชุนูู ุงูุชูุงุนูู ูุงูููุงุถูุน ุงูููุชุนุฉ ูุงูุนูู ุงูุฌูุงุนู ูุงูุฃูุดุทุฉ ุงูุนูููุฉ",
                relationships: "ุฏุงูุฆ ููุญุจุ ูุฌูุจ ุงููุฑุญ ูุงูุญูููุฉ ููุนูุงูุงุช ูููุฏุฑ ุงููุญุธุงุช ุงูุฌูููุฉ"
            },
            "INFJ": {
                name: "ุงููุฏุงูุน ุงูุญููู",
                strengths: ["ุจุตูุฑุฉ ุนูููุฉ", "ูุซุงูู ููุจุฏุฆู", "ูุจุฏุน ููุชููู", "ูุตูู ููุซุงุจุฑ", "ูููู ุงูุชุบููุฑ"],
                improvements: ["ูุฏ ูููู ูุซุงููุงู ุฌุฏุงู", "ุญุณุงุณ ููููุฏ", "ูุญุชุงุฌ ูููุช ูุญุฏู", "ูุฏ ูุชุฌูุจ ุงูุตุฑุงุนุงุช"],
                work: "ูุฒุฏูุฑ ูู ุงูุงุณุชุดุงุฑุฉ ูุงููุชุงุจุฉ ูุงูุชุนููู ูุงูุนูู ุงูุฎูุฑู ูุงููููู",
                study: "ููุถู ุงูุชุนูู ุงูุนููู ูุงูููุงุถูุน ุฐุงุช ุงููุนูู ูุงูุชุฃูู ูุงูุจุญุซ ุงููุณุชูู",
                relationships: "ูุฎูุต ูุนูููุ ูุณุนู ูุนูุงูุงุช ุฐุงุช ูุนูู ููุฏุนู ููู ุงูุขุฎุฑูู"
            },
            "ESTP": {
                name: "ุงูููุงูู ุงููุบุงูุฑ",
                strengths: ["ุนููู ููุดุท", "ูุฑู ููุงุจู ููุชููู", "ุงุฌุชูุงุนู ููุฏูุฏ", "ูุญู ุงููุดุงูู ุจุณุฑุนุฉ", "ูุชูุงุฆู"],
                improvements: ["ูุฏ ููุชูุฑ ููุชุฎุทูุท ุทููู ุงููุฏู", "ููู ูู ุงูุฑูุชูู", "ูุฏ ูุชุฎุฐ ูุฑุงุฑุงุช ูุชุณุฑุนุฉ", "ูุญุชุงุฌ ููุตุจุฑ"],
                work: "ูุชููู ูู ุงููุจูุนุงุช ูุงูุฑูุงุถุฉ ูุงูุทูุงุฑุฆ ูุงูุฃุนูุงู ูุงูุชุฑููู",
                study: "ููุถู ุงูุชุนูู ุงูุนููู ูุงูุชูุงุนูู ูุงูููุงุถูุน ุงูุชุทุจูููุฉ ูุงูุฃูุดุทุฉ ุงูุฌูุงุนูุฉ",
                relationships: "ูุฑุญ ูุนูููุ ูุฌูุจ ุงูุญูููุฉ ูุงููุชุนุฉ ููุนูุงูุงุช ูููุฏุฑ ุงููุญุธุฉ ุงูุญุงููุฉ"
            },
            "ISFP": {
                name: "ุงููุบุงูุฑ ุงูููุงู",
                strengths: ["ูุจุฏุน ูุญุณุงุณ", "ูุฑู ููููุชุญ", "ูุชููู ููุชุนุงุทู", "ููุฏุฑ ุงูุฌูุงู", "ูุงุฏุฆ ููุชูุงุถุน"],
                improvements: ["ูุฏ ูููู ุญุณุงุณุงู ุฌุฏุงู", "ูุชุฌูุจ ุงูุตุฑุงุนุงุช", "ูุฏ ูุคุฌู ุงููุฑุงุฑุงุช", "ูุญุชุงุฌ ููุชุญููุฒ"],
                work: "ูุฒุฏูุฑ ูู ุงููููู ูุงูุชุตููู ูุงูุตุญุฉ ูุงูุชุนููู ูุงูุฎุฏูุงุช ุงูุงุฌุชูุงุนูุฉ",
                study: "ููุถู ุงูุชุนูู ุงูุฐุงุชู ูุงูููุงุถูุน ุงูุฅุจุฏุงุนูุฉ ูุงูุจูุฆุฉ ุงูุฏุงุนูุฉ ูุงูุชุนุจูุฑ ุงูุดุฎุตู",
                relationships: "ูุฎูุต ููุชูููุ ููุฏุฑ ุงูุฃุตุงูุฉ ูุงูุนูู ูู ุงูุนูุงูุงุช ููุฏุนู ุฃุญูุงู ุงูุขุฎุฑูู"
            },
            "ENTJ": {
                name: "ุงููุงุฆุฏ ุงูุทููุญ",
                strengths: ["ูุงุฆุฏ ุทุจูุนู", "ุงุณุชุฑุงุชูุฌู ูุญุงุณู", "ูุงุซู ููุตูู", "ูุญูุฒ ุงูุขุฎุฑูู", "ููุก ูููุธู"],
                improvements: ["ูุฏ ูููู ุตุงุฑูุงู ุฌุฏุงู", "ุบูุฑ ุตุจูุฑ ูุน ุนุฏู ุงูููุงุกุฉ", "ูุฏ ูุชุฌุงูู ุงููุดุงุนุฑ", "ูุญุชุงุฌ ููุงุณุชูุงุน ุฃูุซุฑ"],
                work: "ูุชููู ูู ุงูููุงุฏุฉ ูุงูุฅุฏุงุฑุฉ ูุงูุฃุนูุงู ูุงูุงุณุชุดุงุฑุงุช ูุงูุณูุงุณุฉ",
                study: "ููุถู ุงูุชุญุฏู ุงูููุฑู ูุงูููุงุถูุน ุงููุนูุฏุฉ ูุงูููุงุฏุฉ ูู ุงููุดุงุฑูุน ูุงูุฃูุฏุงู ุงูุทููุญุฉ",
                relationships: "ูุฎูุต ูุฏุงุนูุ ูุดุฌุน ุงูููู ูุงูุชุทูุฑ ูููุฏุฑ ุงูุดุฑุงูุฉ ุงููููุฉ"
            },
            "INTP": {
                name: "ุงููููุฑ ุงูููุทูู",
                strengths: ["ูููุฑ ุนููู", "ูุจุฏุน ููุจุชูุฑ", "ูุณุชูู ููุฑู", "ูุญุจ ุงูุชุนูู", "ููุถูุนู ูููุทูู"],
                improvements: ["ูุฏ ูููู ููุนุฒูุงู", "ูุคุฌู ุงููุฑุงุฑุงุช ุฃุญูุงูุงู", "ูุฏ ูุชุฌุงูู ุงููุดุงุนุฑ", "ูุญุชุงุฌ ููุชุญููุฒ ุงูุนููู"],
                work: "ูุฒุฏูุฑ ูู ุงูุจุญุซ ูุงูุชุทููุฑ ูุงูุชูููููุฌูุง ูุงูุฃูุงุฏูููุง ูุงูุชุญููู",
                study: "ููุถู ุงูุชุนูู ุงููุณุชูู ูุงูููุงุถูุน ุงููุนูุฏุฉ ูุงููุธุฑูุงุช ูุงูุงุณุชูุดุงู ุงูููุฑู",
                relationships: "ูุฎูุต ูุฏุงุนู ููุฑูุงูุ ููุฏุฑ ุงูุงุณุชููุงููุฉ ูุงูุนูู ูู ุงูููุงุดุงุช"
            },
            "ESFJ": {
                name: "ุงููุณุงุนุฏ ุงููุฎูุต",
                strengths: ["ูุชุนุงุทู ูููุชู", "ููุธู ูููุซูู", "ุงุฌุชูุงุนู ูุฏูุฏ", "ูุฏุนู ุงูุขุฎุฑูู", "ุนููู ููุณุคูู"],
                improvements: ["ูุฏ ูููู ุงุญุชูุงุฌุงุชู ุงูุดุฎุตูุฉ", "ุญุณุงุณ ููููุฏ", "ููุงูู ุงูุชุบููุฑ ุฃุญูุงูุงู", "ูุญุชุงุฌ ููุชูุฏูุฑ"],
                work: "ูุชููู ูู ุงูุชุนููู ูุงูุตุญุฉ ูุงูุฎุฏูุงุช ูุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุงูุนูู ุงูุงุฌุชูุงุนู",
                study: "ููุถู ุงูุชุนูู ุงูุชุนุงููู ูุงูููุงุถูุน ุงูุนูููุฉ ูุงูุจูุฆุฉ ุงูุฏุงุนูุฉ ูุงูุชุทุจูู ุงููุจุงุดุฑ",
                relationships: "ูุฎูุต ููุชูุงููุ ููุชู ุจุณุนุงุฏุฉ ุงูุขุฎุฑูู ููุฎูู ุจูุฆุฉ ุฏุงูุฆุฉ ููุฑุญุจุฉ"
            },
            "ISFJ": {
                name: "ุงููุฏุงูุน ุงููุฎูุต",
                strengths: ["ูุฎูุต ููุชูุงูู", "ูุชุนุงุทู ููุชููู", "ุนููู ูููุซูู", "ุตุจูุฑ ููุซุงุจุฑ", "ูุชูุงุถุน ููุชุนุงูู"],
                improvements: ["ูุฏ ูููู ุงุญุชูุงุฌุงุชู ุงูุดุฎุตูุฉ", "ูุชุฌูุจ ุงูุตุฑุงุนุงุช", "ุญุณุงุณ ููููุฏ", "ููุงูู ุงูุชุบููุฑ"],
                work: "ูุฒุฏูุฑ ูู ุงูุตุญุฉ ูุงูุชุนููู ูุงูุฎุฏูุงุช ูุงูุฅุฏุงุฑุฉ ูุงูุนูู ุงูุงุฌุชูุงุนู",
                study: "ููุถู ุงูุชุนูู ุงูููุธู ูุงูููุงุถูุน ุงูุนูููุฉ ูุงูุจูุฆุฉ ุงููุงุฏุฆุฉ ูุงูุฏุนู ุงูุดุฎุตู",
                relationships: "ูุฎูุต ูุฏุงุนูุ ููุชู ุจุชูุงุตูู ุญูุงุฉ ุงูุขุฎุฑูู ูููุฏู ุงูุฏุนู ุงูุนููู ูุงูุนุงุทูู"
            },
            "ENTP": {
                name: "ุงูููุงูุด ุงููุจุฏุน",
                strengths: ["ูุจุฏุน ููุจุชูุฑ", "ุฐูู ูุณุฑูุน ุงูุจุฏููุฉ", "ูุชุญูุณ ููุชูุงุฆู", "ูุฑู ููุชููู", "ูุญุจ ุงูุชุญุฏู"],
                improvements: ["ูุฏ ููุชูุฑ ูููุชุงุจุนุฉ", "ููู ูู ุงูุฑูุชูู", "ูุฏ ูุชุฌุงูู ุงูุชูุงุตูู", "ูุญุชุงุฌ ููุชุฑููุฒ"],
                work: "ูุชููู ูู ุฑูุงุฏุฉ ุงูุฃุนูุงู ูุงูุงุณุชุดุงุฑุงุช ูุงูุชุณููู ูุงูุฅุนูุงู ูุงูุงุจุชูุงุฑ",
                study: "ููุถู ุงูุชุนูู ุงูุชูุงุนูู ูุงูููุงุถูุน ุงููุชููุนุฉ ูุงูููุงุดุงุช ูุงููุดุงุฑูุน ุงูุฅุจุฏุงุนูุฉ",
                relationships: "ูุซูุฑ ููุญูุฒุ ูุฌูุจ ุงูุฃููุงุฑ ุงูุฌุฏูุฏุฉ ูุงูุทุงูุฉ ุงูุฅูุฌุงุจูุฉ ููุนูุงูุงุช"
            },
            "ISTJ": {
                name: "ุงูููุทูู ุงููุณุคูู",
                strengths: ["ููุซูู ููุณุคูู", "ููุธู ููููุฌู", "ุนููู ููุงูุนู", "ูุซุงุจุฑ ููุตูู", "ูุฎูุต ููุชูุงูู"],
                improvements: ["ูุฏ ููุงูู ุงูุชุบููุฑ", "ูุญุชุงุฌ ูุชุทููุฑ ุงููุฑููุฉ", "ูุฏ ูุชุฌุงูู ุงูุฅููุงููุงุช ุงูุฌุฏูุฏุฉ", "ูุญุชุงุฌ ููุงููุชุงุญ"],
                work: "ูุชููู ูู ุงููุญุงุณุจุฉ ูุงูุฅุฏุงุฑุฉ ูุงููุงููู ูุงูุทุจ ูุงูุฎุฏูุงุช ุงูุญููููุฉ",
                study: "ููุถู ุงูุชุนูู ุงูููุธู ูุงูููุงุถูุน ุงูุนูููุฉ ูุงูุทุฑู ุงูุชูููุฏูุฉ ูุงูุฃูุฏุงู ุงููุงุถุญุฉ",
                relationships: "ูุฎูุต ูููุซููุ ููุฏุฑ ุงูุงุณุชูุฑุงุฑ ูุงูุชูุงููุฏ ููุฏุนู ุฃุญุจุงุฆู ุจุทุฑููุฉ ุนูููุฉ"
            }
        };

        const pathNames = {
            1: "ุงููุณุงุฑ ุงูุดุงูู",
            2: "ุงููุณุงุฑ ุงูุณุฑูุน",
            3: "ูุณุงุฑ ุงูุนูู",
            4: "ูุณุงุฑ ุงูุนูุงูุงุช",
            5: "ูุณุงุฑ ุงูุชุฃููุฏ"
        };




        function getAllAnswers() {
            const allAnswers = [...answers];
            Object.values(allPathAnswers).forEach(pathAnswers => {
                allAnswers.push(...pathAnswers);
            });
            return allAnswers;
        }

        function showResults() {
            console.log('๐ฏ showResults() called');
            console.log('Current scores:', scores);
            console.log('All path answers:', allPathAnswers);
            console.log('Completed paths:', completedPaths);

            try {
                stopTimer();

                // Increment completed tests counter
                incrementCompletedTests();

                // ุฅุฎูุงุก ุดุงุดุฉ ุงูุงุฎุชุจุงุฑ ูุฅุธูุงุฑ ุงููุชุงุฆุฌ
                const testScreen = document.getElementById('testScreen');
                const progressContainer = document.getElementById('progressContainer');
                const resultsScreen = document.getElementById('resultsScreen');

                console.log('๐ Elements found:', {
                    testScreen: !!testScreen,
                    progressContainer: !!progressContainer,
                    resultsScreen: !!resultsScreen
                });

                if (testScreen) testScreen.classList.add('fade-out');

                setTimeout(() => {
                    try {
                        if (testScreen) {
                            testScreen.classList.add('hidden');
                            testScreen.classList.remove('fade-out');
                        }
                        if (progressContainer) progressContainer.classList.add('hidden');
                        if (resultsScreen) {
                            resultsScreen.classList.remove('hidden');
                            resultsScreen.classList.add('fade-in');
                        }

                        console.log('โ Screen transition completed, calling populateResults...');

                        // ููุก ุงูุจูุงูุงุช
                        populateResults();

                    } catch (error) {
                        console.error('โ Error in screen transition:', error);
                        // Fallback: show results directly
                        forceShowResults();
                    }
                }, 400);

            } catch (error) {
                console.error('โ Critical error in showResults:', error);
                // Fallback: show results directly
                forceShowResults();
            }
        }

        function forceShowResults() {
            console.log('๐จ Force showing results...');

            // ุฅุฎูุงุก ุฌููุน ุงูุดุงุดุงุช ุงูุฃุฎุฑู
            const allScreens = ['welcomeScreen', 'testScreen', 'progressContainer'];
            allScreens.forEach(screenId => {
                const screen = document.getElementById(screenId);
                if (screen) {
                    screen.classList.add('hidden');
                    screen.classList.remove('fade-in', 'fade-out');
                }
            });

            // ุฅุธูุงุฑ ุดุงุดุฉ ุงููุชุงุฆุฌ ูุจุงุดุฑุฉ
            const resultsScreen = document.getElementById('resultsScreen');
            if (resultsScreen) {
                resultsScreen.classList.remove('hidden');
                resultsScreen.classList.add('fade-in');

                // ููุก ุงูุจูุงูุงุช ูุจุงุดุฑุฉ
                setTimeout(() => {
                    populateResults();
                }, 100);
            } else {
                console.error('โ Results screen not found!');
                // alert('ุญุฏุซ ุฎุทุฃ ูู ุนุฑุถ ุงููุชุงุฆุฌ. ูุฑุฌู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ.');
            }
        }
        let personality;
        let type;
        calcS()
        function calcS() {
            if (scores.E) {
                populateResults();
                return;

            }

            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            let allAnswers = getAllAnswers();
            allAnswers = allAnswers.map(x => {
                if (x.path == 4) {
                    return JSON.parse(x["dimension"]);
                } else if (x.path == 2) {
                    return Object.fromEntries(x.dimension.split(',').map(s => s.split(':')));;
                } else {
                    return x["dimension"]
                }
            })
            allAnswers.forEach(x => {
                if (typeof (x) == "string") {
                    scores[x]++
                } else {
                    Object.keys(x).forEach(dim => {
                        scores[dim] += +x[dim];
                    })
                }
            })
            populateResults()
        }
        function populateResults() {
            try {
                type = calculatePersonalityType();
                console.log('โ Calculated personality type:', type);

                personality = personalityTypes[type] || personalityTypes['ENFP'];
                console.log('โ Personality data:', personality);

                const totalQuestions = Object.values(allPathAnswers).reduce((sum, pathAnswers) => sum + pathAnswers.length, 0);
                const totalTimeSpent = Math.floor(endTime / 1000 / 60);

                console.log('๐ Stats:', { totalQuestions, totalTimeSpent, type });

                // ุชุญุฏูุซ ุงูุนูุงุตุฑ ูุน ูุญุต ูุฌูุฏูุง
                const elements = {
                    userNameDisplay: document.getElementById('userNameDisplay'),
                    pathUsed: document.getElementById('pathUsed'),
                    personalityType: document.getElementById('personalityType'),
                    personalityName: document.getElementById('personalityName'),
                    confidenceLevel: document.getElementById('confidenceLevel'),
                    strengths: document.getElementById('strengths'),
                    improvements: document.getElementById('improvements'),
                    workAdvice: document.getElementById('workAdvice'),
                    studyAdvice: document.getElementById('studyAdvice'),
                    relationshipAdvice: document.getElementById('relationshipAdvice')
                };

                console.log('๐ Elements check:', Object.keys(elements).map(key => `${key}: ${!!elements[key]}`));

                // ุชุญุฏูุซ ุงูุนูุงุตุฑ ุงูุฃุณุงุณูุฉ
                if (elements.userNameDisplay) {
                    elements.userNameDisplay.innerHTML = `ููุทู ุงูุดุฎุตู ูุง <strong>${userName}</strong> ูู:`;
                    console.log('โ Updated userNameDisplay');
                }

                if (elements.pathUsed) {
                    let timingInfo = `ุชู ุฅููุงู ุฌููุน ุงููุณุงุฑุงุช ุงูุฎูุณุฉ (${totalQuestions} ุณุคุงู ูู ${totalTimeSpent} ุฏูููุฉ)`;
                    elements.pathUsed.innerHTML = timingInfo;
                    console.log('โ Updated pathUsed');
                }

                if (elements.personalityType) {
                    elements.personalityType.textContent = type;
                    console.log('โ Updated personalityType:', type);
                }

                if (elements.personalityName) {
                    elements.personalityName.textContent = personality.name;
                    console.log('โ Updated personalityName:', personality.name);
                }

                const confidenceLevel = calculateConfidenceLevel();
                if (elements.confidenceLevel) {
                    elements.confidenceLevel.textContent = confidenceLevel;
                    console.log('โ Updated confidenceLevel:', confidenceLevel);
                }

                if (elements.strengths) {
                    elements.strengths.innerHTML = personality.strengths.map(strength =>
                        `<li class="flex items-center"><span class="text-green-600 ml-2">โ</span>${strength}</li>`
                    ).join('');
                    console.log('โ Updated strengths');
                }

                if (elements.improvements) {
                    elements.improvements.innerHTML = personality.improvements.map(improvement =>
                        `<li class="flex items-center"><span class="text-orange-600 ml-2">โ</span>${improvement}</li>`
                    ).join('');
                    console.log('โ Updated improvements');
                }

                if (elements.workAdvice) {
                    elements.workAdvice.textContent = personality.work;
                    console.log('โ Updated workAdvice');
                }

                if (elements.studyAdvice) {
                    elements.studyAdvice.textContent = personality.study;
                    console.log('โ Updated studyAdvice');
                }

                if (elements.relationshipAdvice) {
                    elements.relationshipAdvice.textContent = personality.relationships;
                    console.log('โ Updated relationshipAdvice');
                }

                // ุนุฑุถ ุงูุชุญูููุงุช ุงููุชูุฏูุฉ
                console.log('๐ Starting advanced analytics...');
                try {
                    showPersonalityExplanation(type);
                    console.log('โ showPersonalityExplanation completed');

                    showDimensionsAnalysis();
                    console.log('โ showDimensionsAnalysis completed');

                    showAdvancedAnalytics();
                    console.log('โ showAdvancedAnalytics completed');

                    showPathPerformance();
                    console.log('โ showPathPerformance completed');

                    showTimingStatistics();
                    console.log('โ showTimingStatistics completed');

                } catch (error) {
                    console.error('โ Error in advanced analytics:', error);
                    // Continue even if advanced analytics fail
                }

                // ุนุฑุถ ุชุญุฐูุฑุงุช ุงูุตุญุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ
                try {
                    // const validationResult = validateResults();
                    // if (!validationResult.isValid) {
                    //     showValidationWarnings(validationResult.issues);
                    //     console.log('โ๏ธ Validation warnings shown');
                    // }
                } catch (error) {
                    console.error('โ Error in validation:', error);
                }



                // ุฅุธูุงุฑ ุฑุณุงูุฉ ูุฌุงุญ ูููุณุชุฎุฏู
                // showResultsSuccessMessage();

            } catch (error) {
                console.error('โ Critical error in populateResults:', error);

                // Fallback: show basic results
                showBasicResults();
            }
        }
        async function downloadPDF() {
            print()
        }

        // ูุธููุฉ ุงุญุชูุงุทูุฉ ูุนุฑุถ ุงููุชุงุฆุฌ ุงูุฃุณุงุณูุฉ
        function showBasicResults() {
            console.log('๐จ Showing basic results as fallback...');

            try {
                const type = calculatePersonalityType();
                const personality = personalityTypes[type] || personalityTypes['ENFP'];

                // ุฅูุดุงุก ูุญุชูู ุฃุณุงุณู ูููุชุงุฆุฌ
                const resultsScreen = document.getElementById('resultsScreen');
                if (resultsScreen) {
                    resultsScreen.innerHTML = `
                        <div class="max-w-4xl mx-auto">
                            <div class="bg-white rounded-lg card-shadow p-8">
                                <div class="text-center mb-8">
                                    <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                    </div>
                                    <h2 class="text-3xl font-bold text-gray-800 mb-4">๐ ุชูุงูููุง! ุงูุชูู ุงูุงุฎุชุจุงุฑ</h2>
                                    <div class="text-2xl font-semibold text-blue-600 mb-4">ููุทู ุงูุดุฎุตู ูุง <strong>${userName}</strong> ูู:</div>
                                </div>

                                <div class="mb-8">
                                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-8 rounded-lg text-center mb-6">
                                        <div class="text-5xl font-bold mb-3">${type}</div>
                                        <div class="text-2xl mb-4">${personality.name}</div>
                                        <div class="bg-white bg-opacity-20 rounded-full px-6 py-2 inline-block">
                                            <span class="text-lg font-medium">ูุณุชูู ุงูุซูุฉ: ${calculateConfidenceLevel()}%</span>
                                        </div>
                                    </div>

                                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                                        <div class="bg-green-50 p-6 rounded-lg">
                                            <h4 class="font-semibold text-green-800 mb-3 text-lg">โจ ููุงุท ุงูููุฉ</h4>
                                            <ul class="text-green-700 space-y-2">
                                                ${personality.strengths.map(strength => `<li class="flex items-center"><span class="text-green-600 ml-2">โ</span>${strength}</li>`).join('')}
                                            </ul>
                                        </div>
                                        <div class="bg-orange-50 p-6 rounded-lg">
                                            <h4 class="font-semibold text-orange-800 mb-3 text-lg">๐ฏ ูุฌุงูุงุช ุงูุชุทููุฑ</h4>
                                            <ul class="text-orange-700 space-y-2">
                                                ${personality.improvements.map(improvement => `<li class="flex items-center"><span class="text-orange-600 ml-2">โ</span>${improvement}</li>`).join('')}
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="grid md:grid-cols-3 gap-6">
                                        <div class="bg-blue-50 p-6 rounded-lg">
                                            <h4 class="font-semibold text-blue-800 mb-3">๐ผ ูู ุงูุนูู</h4>
                                            <p class="text-blue-700 text-sm">${personality.work}</p>
                                        </div>
                                        <div class="bg-purple-50 p-6 rounded-lg">
                                            <h4 class="font-semibold text-purple-800 mb-3">๐ ูู ุงูุฏุฑุงุณุฉ</h4>
                                            <p class="text-purple-700 text-sm">${personality.study}</p>
                                        </div>
                                        <div class="bg-pink-50 p-6 rounded-lg">
                                            <h4 class="font-semibold text-pink-800 mb-3">โค๏ธ ูู ุงูุนูุงูุงุช</h4>
                                            <p class="text-pink-700 text-sm">${personality.relationships}</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="text-center space-x-4 space-x-reverse">
                                    <button onclick="downloadPDF()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 transform hover:scale-105">
                                        ๐ ุญูุธ ูู PDF
                                    </button>
                                    <button onclick="restartTest()" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300">
                                        ุงูุงูุชูุงู ููุงุฎุชุจุงุฑ ุงูุซุงูุซ (ุงูุฐูุงุกุงุช) 
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;

                    console.log('โ Basic results displayed successfully');
                }
            } catch (error) {
                console.error('โ Even basic results failed:', error);
                // alert('ุชู ุฅููุงู ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ!\n\nููุท ุดุฎุตูุชู: ' + calculatePersonalityType() + '\n\nูุฑุฌู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุนุฑุถ ุงูุชูุงุตูู ุงููุงููุฉ.');
            }
        }

        // ุฑุณุงูุฉ ูุฌุงุญ ุนุฑุถ ุงููุชุงุฆุฌ
        function showResultsSuccessMessage() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg z-50 max-w-sm';
            messageDiv.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <div class="font-bold">ุชู ุนุฑุถ ุงููุชุงุฆุฌ ุจูุฌุงุญ!</div>
                        <div class="text-sm opacity-90">ุชุญููู ุดุงูู ูููุท ุดุฎุตูุชู</div>
                    </div>
                </div>
            `;
            document.body.appendChild(messageDiv);

            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.parentNode.removeChild(messageDiv);
                }
            }, 4000);
        }

        // ูุธููุฉ ุงูุชุญูู ูู ุตุญุฉ ุงููุชุงุฆุฌ
        function validateResults() {
            const issues = [];
            let isValid = true;

            // ุฌูุน ุฌููุน ุงูุฅุฌุงุจุงุช ููุชุญููู
            const allAnswers = getAllAnswers();
            const totalAnswers = allAnswers.length;

            // ุงูุชุญูู ูู ูุฌูุฏ ุฅุฌุงุจุงุช ูุงููุฉ
            if (totalAnswers < 30) {
                issues.push(`ุนุฏุฏ ุงูุฅุฌุงุจุงุช ูููู: ${totalAnswers} (ุงูุญุฏ ุงูุฃุฏูู: 30)`);
                isValid = false;
            }

            // ุญุณุงุจ ุงูุฃูุฒุงู ุงููุญุณูุฉ ููุชุญูู
            const dimensionWeights = calculateDimensionWeights(allAnswers);
            const totalWeights = Object.values(dimensionWeights).reduce((sum, weight) => sum + weight, 0);

            if (totalWeights === 0) {
                issues.push('ูุง ุชูุฌุฏ ููุงุท ููุฒููุฉ ูุญุณูุจุฉ');
                isValid = false;
            }

            // ุงูุชุญูู ูู ุชูุงุฒู ุงูุฃุจุนุงุฏ ุจูุงุกู ุนูู ุงูุฃูุฒุงู ุงููุญุณูุฉ
            const dimensions = [
                { name: 'EI', dims: ['E', 'I'] },
                { name: 'SN', dims: ['S', 'N'] },
                { name: 'TF', dims: ['T', 'F'] },
                { name: 'JP', dims: ['J', 'P'] }
            ];

            let validDimensions = 0;
            let totalClarity = 0;

            dimensions.forEach(dim => {
                const result = calculateDimensionType(dim.dims, dimensionWeights);
                const total = Object.values(result.scores).reduce((sum, score) => sum + score, 0);

                if (total === 0) {
                    issues.push(`ูุง ุชูุฌุฏ ุจูุงูุงุช ูู ุงูุจูุนุฏ ${dim.name}`);
                    isValid = false;
                } else if (total < 2) {
                    issues.push(`ุจูุงูุงุช ููููุฉ ูู ุงูุจูุนุฏ ${dim.name}: ${total.toFixed(1)}`);
                } else {
                    validDimensions++;
                    totalClarity += result.difference;

                    // ุชุญุฐูุฑ ููุฃุจุนุงุฏ ุบูุฑ ุงููุงุถุญุฉ
                    if (result.difference < 5) {
                        issues.push(`ุงูุจูุนุฏ ${dim.name} ุบูุฑ ูุงุถุญ (${result.difference.toFixed(1)}% ูุฑู)`);
                    }
                }
            });

            // ุญุณุงุจ ูุชูุณุท ุงููุถูุญ
            const avgClarity = validDimensions > 0 ? totalClarity / validDimensions : 0;

            // ุงูุชุญูู ูู ุงูุงุชุณุงู ุงูุฒููู ุงููุญุณู
            const timings = allAnswers.map(a => a.timeSpent).filter(t => t > 0);
            if (timings.length > 0) {
                const avgTime = timings.reduce((sum, t) => sum + t, 0) / timings.length;
                const veryFastCount = timings.filter(t => t < 2).length;
                const fastRatio = veryFastCount / timings.length;
                const verySlowCount = timings.filter(t => t > 60).length;
                const slowRatio = verySlowCount / timings.length;

                if (fastRatio > 0.4) {
                    issues.push(`ูุณุจุฉ ุนุงููุฉ ูู ุงูุฅุฌุงุจุงุช ุงูุณุฑูุนุฉ ุฌุฏุงู: ${(fastRatio * 100).toFixed(1)}%`);
                }

                if (slowRatio > 0.2) {
                    issues.push(`ูุณุจุฉ ุนุงููุฉ ูู ุงูุฅุฌุงุจุงุช ุงูุจุทูุฆุฉ ุฌุฏุงู: ${(slowRatio * 100).toFixed(1)}%`);
                }

                if (avgTime < 4) {
                    issues.push(`ูุชูุณุท ููุช ุงูุฅุฌุงุจุฉ ููุฎูุถ: ${avgTime.toFixed(1)} ุซุงููุฉ`);
                }
            }

            // ุงูุชุญูู ูู ุงูุชูุงู ุงููุณุงุฑุงุช
            if (completedPaths.length < 5) {
                issues.push(`ูู ูุชู ุฅููุงู ุฌููุน ุงููุณุงุฑุงุช: ${completedPaths.length}/5`);
                isValid = false;
            }

            // ุงูุชุญูู ูู ุฌูุฏุฉ ุงูุฅุฌุงุจุงุช ุงููุญุณู
            if (consistencyScore < 60) {
                issues.push(`ูุณุชูู ุงุชุณุงู ููุฎูุถ: ${consistencyScore}%`);
            }

            // ุงูุชุญูู ูู ูุถูุญ ุงููุชุงุฆุฌ
            if (avgClarity < 15) {
                issues.push(`ูุถูุญ ุงููุชุงุฆุฌ ููุฎูุถ: ${avgClarity.toFixed(1)}%`);
            }

            // ุงูุชุญูู ูู ุงูุชูุงูุถุงุช
            if (contradictionFlags.length > 3) {
                issues.push(`ุนุฏุฏ ูุจูุฑ ูู ุงูุชูุงูุถุงุช: ${contradictionFlags.length}`);
            }

            // ุงูุชุญูู ูู ุงูุฃููุงุท ุงูุนุดูุงุฆูุฉ
            if (randomAnswerPattern > 2) {
                issues.push(`ุฃููุงุท ุฅุฌุงุจุฉ ุนุดูุงุฆูุฉ ูุดุชุจูุฉ: ${randomAnswerPattern}`);
            }

            // ุงูุชุญูู ูู ุชููุน ุงููุณุงุฑุงุช
            const pathDiversity = new Set(allAnswers.map(a => a.path)).size;
            if (pathDiversity < 4) {
                issues.push(`ุชููุน ูููู ูู ุงููุณุงุฑุงุช: ${pathDiversity}/5`);
            }

            // ุชูููู ุงูุฌูุฏุฉ ุงูุฅุฌูุงููุฉ
            let qualityScore = 100;
            qualityScore -= (fastRatio * 30); // ุฎุตู ููุฅุฌุงุจุงุช ุงูุณุฑูุนุฉ
            qualityScore -= (contradictionFlags.length * 5); // ุฎุตู ููุชูุงูุถุงุช
            qualityScore -= ((100 - consistencyScore) * 0.3); // ุฎุตู ูุนุฏู ุงูุงุชุณุงู
            qualityScore += (avgClarity * 0.2); // ููุงูุฃุฉ ูููุถูุญ

            if (qualityScore < 70) {
                issues.push(`ููุงุท ุงูุฌูุฏุฉ ุงูุฅุฌูุงููุฉ ููุฎูุถุฉ: ${qualityScore.toFixed(1)}/100`);
            }

            console.log('ูุชุงุฆุฌ ุงูุชุญูู ุงููุญุณู:', {
                isValid,
                issues,
                totalAnswers,
                avgClarity: avgClarity.toFixed(1),
                consistencyScore,
                qualityScore: qualityScore.toFixed(1),
                fastRatio: (fastRatio * 100).toFixed(1) + '%'
            });

            return { isValid, issues, qualityScore: Math.round(qualityScore) };
        }

        // ูุธููุฉ ุนุฑุถ ุชุญุฐูุฑุงุช ุงูุตุญุฉ
        function showValidationWarnings(issues) {
            const warningContainer = document.createElement('div');
            warningContainer.className = 'bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 mb-6';
            warningContainer.innerHTML = `
                <div class="flex items-center mb-3">
                    <span class="text-2xl ml-2">โ๏ธ</span>
                    <h4 class="text-lg font-bold text-yellow-800">ุชูุจูู ุญูู ุฌูุฏุฉ ุงููุชุงุฆุฌ</h4>
                </div>
                <div class="text-yellow-700 text-sm space-y-1">
                    <p class="font-medium mb-2">ุชู ุงูุชุดุงู ุจุนุถ ุงููุดุงูู ุงูุชู ูุฏ ุชุคุซุฑ ุนูู ุฏูุฉ ุงููุชุงุฆุฌ:</p>
                    <ul class="list-disc list-inside space-y-1">
                        ${issues.map(issue => `<li>${issue}</li>`).join('')}
                    </ul>
                    <p class="mt-3 font-medium">๐ก ููุญุตูู ุนูู ูุชุงุฆุฌ ุฃูุซุฑ ุฏูุฉุ ูููุตุญ ุจุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ ูุน ูุฑุงุกุฉ ุงูุฃุณุฆูุฉ ุจุนูุงูุฉ ุฃูุจุฑ.</p>
                </div>
            `;

            // ุฅุฏุฑุงุฌ ุงูุชุญุฐูุฑ ูุจู ุงููุชุงุฆุฌ
            const resultsContainer = document.querySelector('#personalityResult');
            if (resultsContainer) {
                resultsContainer.insertBefore(warningContainer, resultsContainer.firstChild);
            }
        }

        function showPersonalityExplanation(type) {
            const explanationContainer = document.getElementById('personalityExplanation');

            // ุชุญููู ูู ุจูุนุฏ ูู ุฃุจุนุงุฏ ุงูุดุฎุตูุฉ
            const dimensions = [
                {
                    name: 'ูุตุฏุฑ ุงูุทุงูุฉ',
                    icon: 'โก',
                    e_letter: 'E',
                    i_letter: 'I',
                    e_name: 'ุงูุงูุจุณุงุท (Extraversion)',
                    i_name: 'ุงูุงูุทูุงุก (Introversion)',
                    e_score: scores.E,
                    i_score: scores.I,
                    e_desc: 'ุชุณุชูุฏ ุทุงูุชู ูู ุงูุชูุงุนู ูุน ุงูุนุงูู ุงูุฎุงุฑุฌู ูุงูุฃุดุฎุงุต. ุชุญุจ ุงูููุงุณุจุงุช ุงูุงุฌุชูุงุนูุฉ ูุชููุฑ ุจุตูุช ุนุงูู.',
                    i_desc: 'ุชุณุชูุฏ ุทุงูุชู ูู ุงูุนุงูู ุงูุฏุงุฎูู ูุงูุชุฃูู. ุชูุถู ุงูุชูููุฑ ูุจู ุงูุชุญุฏุซ ูุชุญุชุงุฌ ูููุช ูููุฑุฏ ูุฅุนุงุฏุฉ ุดุญู ุทุงูุชู.',
                    tie_desc: 'ูุฏูู ุชูุงุฒู ุจูู ุงูุงูุจุณุงุท ูุงูุงูุทูุงุก. ุชุณุชุทูุน ุงูุชููู ูุน ุงูููุงูู ุงูุงุฌุชูุงุนูุฉ ูุงููุงุฏุฆุฉ ุจููุณ ุงูุฏุฑุฌุฉ.'
                },
                {
                    name: 'ุฌูุน ุงููุนูููุงุช',
                    icon: '๐',
                    e_letter: 'S',
                    i_letter: 'N',
                    e_name: 'ุงูุญุณูู (Sensing)',
                    i_name: 'ุงูุญุฏุณู (Intuition)',
                    e_score: scores.S,
                    i_score: scores.N,
                    e_desc: 'ุชุฑูุฒ ุนูู ุงูุญูุงุฆู ูุงูุชูุงุตูู ุงูููููุณุฉ. ุชุซู ูู ุงูุฎุจุฑุฉ ุงูุนูููุฉ ูุชูุถู ุงููุนูููุงุช ุงููุงุถุญุฉ ูุงููุญุฏุฏุฉ.',
                    i_desc: 'ุชุฑูุฒ ุนูู ุงูุฃููุงุท ูุงูุฅููุงููุงุช ุงููุณุชูุจููุฉ. ุชุซู ูู ุญุฏุณู ูุชุญุจ ุงุณุชูุดุงู ุงูุฃููุงุฑ ูุงูููุงููู ุงููุฌุฑุฏุฉ.',
                    tie_desc: 'ุชุฌูุน ุจูู ุงูุชุฑููุฒ ุนูู ุงูุชูุงุตูู ูุงูุฑุคูุฉ ุงูุดุงููุฉ. ุชุณุชุทูุน ุงูุชุนุงูู ูุน ุงูุญูุงุฆู ูุงูุฃููุงุฑ ุงููุฌุฑุฏุฉ ุจููุณ ุงูููุงุกุฉ.'
                },
                {
                    name: 'ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช',
                    icon: 'โ๏ธ',
                    e_letter: 'T',
                    i_letter: 'F',
                    e_name: 'ุงูุชูููุฑ (Thinking)',
                    i_name: 'ุงูุดุนูุฑ (Feeling)',
                    e_score: scores.T,
                    i_score: scores.F,
                    e_desc: 'ุชุชุฎุฐ ูุฑุงุฑุงุชู ุจูุงุกู ุนูู ุงูุชุญููู ุงูููุทูู ูุงูููุถูุนูุฉ. ุชูุฏุฑ ุงูุนุฏุงูุฉ ูุงูููุงุกุฉ ูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช.',
                    i_desc: 'ุชุชุฎุฐ ูุฑุงุฑุงุชู ุจูุงุกู ุนูู ุงูููู ุงูุดุฎุตูุฉ ูุงูุชุฃุซูุฑ ุนูู ุงูุขุฎุฑูู. ุชูุฏุฑ ุงูุงูุณุฌุงู ูุงูุชููู ูู ุงูุชุนุงูู.',
                    tie_desc: 'ุชูุงุฒู ุจูู ุงูููุทู ูุงููุดุงุนุฑ ูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช. ุชุณุชุทูุน ุชูุฏูุฑ ุงูุฌูุงูุจ ุงูููุถูุนูุฉ ูุงูุฅูุณุงููุฉ ูุนุงู.'
                },
                {
                    name: 'ููุท ุงูุญูุงุฉ',
                    icon: '๐',
                    e_letter: 'J',
                    i_letter: 'P',
                    e_name: 'ุงูุญูู (Judging)',
                    i_name: 'ุงูุฅุฏุฑุงู (Perceiving)',
                    e_score: scores.J,
                    i_score: scores.P,
                    e_desc: 'ุชูุถู ุงูุญูุงุฉ ุงูููุธูุฉ ูุงููุฎุทุทุฉ. ุชุญุจ ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช ุจุณุฑุนุฉ ูุฅููุงุก ุงูููุงู ูู ููุงุนูุฏูุง.',
                    i_desc: 'ุชูุถู ุงูุญูุงุฉ ุงููุฑูุฉ ูุงูุนูููุฉ. ุชุญุจ ุฅุจูุงุก ุงูุฎูุงุฑุงุช ููุชูุญุฉ ูุชุชููู ูุน ุงูุธุฑูู ุงููุชุบูุฑุฉ.',
                    tie_desc: 'ุชุฌูุน ุจูู ุงูุชูุธูู ูุงููุฑููุฉ. ุชุณุชุทูุน ุงูุชุฎุทูุท ุนูุฏ ุงูุญุงุฌุฉ ูุงูุชููู ูุน ุงูุชุบููุฑุงุช ุจุณูููุฉ.'
                }
            ];

            let explanationHTML = '';

            dimensions.forEach((dim, index) => {
                const total = dim.e_score + dim.i_score;
                const e_percent = total > 0 ? Math.round((dim.e_score / total) * 100) : 50;
                const i_percent = 100 - e_percent;

                let dominantType, dominantDesc, dominantPercent;
                let isDominant = true;

                if (dim.e_score > dim.i_score) {
                    dominantType = dim.e_name;
                    dominantDesc = dim.e_desc;
                    dominantPercent = e_percent;
                } else if (dim.i_score > dim.e_score) {
                    dominantType = dim.i_name;
                    dominantDesc = dim.i_desc;
                    dominantPercent = i_percent;
                } else {
                    dominantType = `${dim.e_name} / ${dim.i_name}`;
                    dominantDesc = dim.tie_desc;
                    dominantPercent = 50;
                    isDominant = false;
                }

                const bgColor = index % 2 === 0 ? 'bg-white' : 'bg-indigo-25';
                const borderColor = isDominant ? 'border-indigo-300' : 'border-yellow-300';
                const headerColor = isDominant ? 'text-indigo-800' : 'text-yellow-800';

                explanationHTML += `
                    <div class="${bgColor} ${borderColor} border-2 rounded-xl p-6">
                        <div class="flex items-center mb-4">
                            <span class="text-2xl ml-3">${dim.icon}</span>
                            <div class="flex-1">
                                <h4 class="text-lg font-bold ${headerColor}">${dim.name}</h4>
                                <div class="text-sm text-gray-600">
                                    ${dim.e_letter}: ${dim.e_score} ููุทุฉ | ${dim.i_letter}: ${dim.i_score} ููุทุฉ
                                </div>
                            </div>
                            ${isDominant ? `
                                <div class="bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium">
                                    ${dominantPercent}%
                                </div>
                            ` : `
                                <div class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium">
                                    ูุชูุงุฒู 50/50
                                </div>
                            `}
                        </div>
                        
                        <div class="mb-4">
                            <div class="font-semibold text-gray-800 mb-2">
                                ${isDominant ? '๐ฏ ุงูููุท ุงูููููู:' : 'โ๏ธ ุงูุชูุงุฒู:'} ${dominantType}
                            </div>
                            <p class="text-gray-700 leading-relaxed">${dominantDesc}</p>
                        </div>
                        
                        <!-- ุดุฑูุท ุงูุชูุฏู ุงููุฑุฆู -->
                        <div class="mb-3">
                            <div class="flex justify-between text-xs text-gray-600 mb-1">
                                <span>${dim.e_name}</span>
                                <span>${dim.i_name}</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3 relative">
                                <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-3 rounded-full transition-all duration-1000" 
                                     style="width: ${e_percent}%"></div>
                                ${!isDominant ? `
                                    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-3 bg-yellow-400"></div>
                                ` : ''}
                            </div>
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>${e_percent}%</span>
                                <span>${i_percent}%</span>
                            </div>
                        </div>
                        
                        ${!isDominant ? `
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-3">
                                <div class="flex items-center text-yellow-800 text-sm">
                                    <span class="ml-2">โก</span>
                                    <strong>ููุฒุฉ ุงูุชูุงุฒู:</strong> ูุฏูู ูุฑููุฉ ุนุงููุฉ ูู ุงูุชููู ูุน ูุฎุชูู ุงูููุงูู ูุงูุฃุดุฎุงุต
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
            });

            // ุฅุถุงูุฉ ููุฎุต ุดุงูู
            const typeLetters = type.split('').join(' - ');
            explanationHTML += `
                <div class="bg-gradient-to-r from-purple-100 to-indigo-100 border-2 border-purple-300 rounded-xl p-6 mt-6">
                    <div class="text-center mb-4">
                        <h4 class="text-xl font-bold text-purple-800 mb-2">๐ญ ููุฎุต ููุท ุดุฎุตูุชู</h4>
                        <div class="text-2xl font-bold text-purple-900 mb-2">${typeLetters}</div>
                        <div class="text-purple-700">${personalityTypes[type]?.name || 'ููุท ุดุฎุตูุฉ ูููุฒ'}</div>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-white rounded-lg p-4">
                            <h5 class="font-semibold text-purple-800 mb-2">๐ ุฎุตุงุฆุตู ุงููููุฒุฉ</h5>
                            <ul class="text-sm text-purple-700 space-y-1">
                                <li>โข ููุท ุดุฎุตูุฉ ูุงุถุญ ููุญุฏุฏ</li>
                                <li>โข ุชูุงุฒู ูู ุงูุฃุจุนุงุฏ ุงูุดุฎุตูุฉ</li>
                                <li>โข ูุฏุฑุฉ ุนูู ุงูุชููู ูุน ุงูููุงูู ุงููุฎุชููุฉ</li>
                                <li>โข ููู ุนููู ููุฐุงุช ูุงูุขุฎุฑูู</li>
                            </ul>
                        </div>
                        
                        <div class="bg-white rounded-lg p-4">
                            <h5 class="font-semibold text-purple-800 mb-2">๐ก ูุตุงุฆุญ ููุชุทููุฑ</h5>
                            <ul class="text-sm text-purple-700 space-y-1">
                                <li>โข ุทูุฑ ููุงุท ููุชู ุงูุทุจูุนูุฉ</li>
                                <li>โข ุงุนูู ุนูู ุชุญุณูู ููุงุท ุงูุถุนู</li>
                                <li>โข ุงุณุชูุฏ ูู ูููู ูููุท ุดุฎุตูุชู</li>
                                <li>โข ุทุจู ูุง ุชุนููุชู ูู ุญูุงุชู ุงูููููุฉ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;

            explanationContainer.innerHTML = explanationHTML;
        }



        function calculatePersonalityType() {
            let type = '';

            // ุญุณุงุจ ุงูููุท ุจูุงุกู ุนูู ุงูููุงุท ูุน ูุธุงู ููุซูููุฉ ูุญุณู
            console.log('ุงูููุงุท ุงูููุงุฆูุฉ:', scores);

            // ุฌูุน ุฌููุน ุงูุฅุฌุงุจุงุช ูุชุญููู ุฃุนูู
            const allAnswers = getAllAnswers();
            const dimensionWeights = calculateDimensionWeights(allAnswers);

            // E vs I - ูุตุฏุฑ ุงูุทุงูุฉ
            const eiResult = calculateDimensionType(['E', 'I'], dimensionWeights);
            type += eiResult.type;

            // S vs N - ุฌูุน ุงููุนูููุงุช  
            const snResult = calculateDimensionType(['S', 'N'], dimensionWeights);
            type += snResult.type;

            // T vs F - ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช
            const tfResult = calculateDimensionType(['T', 'F'], dimensionWeights);
            type += tfResult.type;

            // J vs P - ููุท ุงูุญูุงุฉ
            const jpResult = calculateDimensionType(['J', 'P'], dimensionWeights);
            type += jpResult.type;

            console.log('ุงูููุท ุงููุญุณูุจ:', type);
            console.log('ุชูุงุตูู ุงูุญุณุงุจ:', {
                EI: eiResult,
                SN: snResult,
                TF: tfResult,
                JP: jpResult
            });

            return type;
        }

        // ุญุณุงุจ ุฃูุฒุงู ุงูุฃุจุนุงุฏ ุจูุงุกู ุนูู ุฌูุฏุฉ ุงูุฅุฌุงุจุงุช
        function calculateDimensionWeights(allAnswers) {
            const weights = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

            allAnswers.forEach(answer => {
                // ุญุณุงุจ ูุฒู ุงูุฅุฌุงุจุฉ ุจูุงุกู ุนูู ุนุฏุฉ ุนูุงูู
                let weight = 1.0;

                // ุชูููู ุงููุฒู ููุฅุฌุงุจุงุช ุงูุณุฑูุนุฉ ุฌุฏุงู
                if (answer.timeSpent < 2) {
                    weight *= 0.3;
                } else if (answer.timeSpent < 4) {
                    weight *= 0.7;
                } else if (answer.timeSpent > 60) {
                    weight *= 0.8; // ุชูููู ุทููู ููุฅุฌุงุจุงุช ุงูุจุทูุฆุฉ ุฌุฏุงู
                }

                // ุฒูุงุฏุฉ ุงููุฒู ูููุณุงุฑุงุช ุงููุชุฎุตุตุฉ
                if (answer.path === 3 || answer.path === 4) { // ูุณุงุฑ ุงูุนูู ูุงูุนูุงูุงุช
                    weight *= 1.2;
                }

                // ุฒูุงุฏุฉ ุงููุฒู ููุฃุณุฆูุฉ ุงููุนูุฏุฉ (ุชุฑุชูุจุ ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ)
                if (answer.type === 'ranking' || answer.type === 'checkbox') {
                    weight *= 1.3;
                }

                // ุฒูุงุฏุฉ ุงููุฒู ููุฃุณุฆูุฉ ุงููููุงุณูุฉ
                if (answer.type === 'scale') {
                    weight *= 1.1;
                }

                // ุชูุฒูุน ุงููุฒู ุนูู ุงูุฃุจุนุงุฏ
                if (typeof answer.dimension === 'string' && weights.hasOwnProperty(answer.dimension)) {
                    weights[answer.dimension] += weight;
                } else if (answer.dimension && (typeof answer.dimension === 'object' || answer.dimension.includes(':'))) {
                    try {
                        let dimensionScores;
                        if (answer.dimension.includes(':')) {
                            dimensionScores = {};
                            const parts = answer.dimension.split(',');
                            parts.forEach(part => {
                                const [dim, score] = part.split(':');
                                if (weights.hasOwnProperty(dim)) {
                                    dimensionScores[dim] = parseInt(score);
                                }
                            });
                        } else {
                            dimensionScores = JSON.parse(answer.dimension);
                        }

                        Object.keys(dimensionScores).forEach(dim => {
                            if (weights.hasOwnProperty(dim)) {
                                weights[dim] += dimensionScores[dim] * weight;
                            }
                        });
                    } catch (e) {
                        console.log('Could not parse complex dimension for weighting');
                    }
                }
            });

            return weights;
        }

        // ุญุณุงุจ ููุน ุงูุจูุนุฏ ุจูุงุกู ุนูู ุงูุฃูุฒุงู ุงููุญุณูุฉ
        function calculateDimensionType(dimensions, weights) {
            const [dim1, dim2] = dimensions;
            const score1 = weights[dim1];
            const score2 = weights[dim2];
            const total = score1 + score2;

            if (total === 0) {
                // ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ุจูุงูุงุชุ ุงุณุชุฎุฏู ุงูุชูุถูู ุงูุงูุชุฑุงุถู
                return {
                    type: dim1,
                    confidence: 0,
                    percentage: 50,
                    reason: 'no_data_default'
                };
            }

            const percentage1 = Math.round((score1 / total) * 100);
            const percentage2 = 100 - percentage1;
            const difference = Math.abs(percentage1 - percentage2);

            // ุชุญุฏูุฏ ุงูููุน ุงูููููู
            let dominantType, dominantPercentage;
            if (score1 > score2) {
                dominantType = dim1;
                dominantPercentage = percentage1;
            } else if (score2 > score1) {
                dominantType = dim2;
                dominantPercentage = percentage2;
            } else {
                // ูู ุญุงูุฉ ุงูุชุนุงุฏู ุงูุชุงูุ ุงุณุชุฎุฏู ุงูุฅุฌุงุจุงุช ุงูุฃุญุฏุซ
                const recentPreference = getRecentPreference(dimensions);
                dominantType = recentPreference || dim1;
                dominantPercentage = 50;
            }

            // ุญุณุงุจ ูุณุชูู ุงูุซูุฉ
            let confidence;
            if (difference >= 40) {
                confidence = 'high'; // ุซูุฉ ุนุงููุฉ
            } else if (difference >= 20) {
                confidence = 'medium'; // ุซูุฉ ูุชูุณุทุฉ
            } else if (difference >= 10) {
                confidence = 'low'; // ุซูุฉ ููุฎูุถุฉ
            } else {
                confidence = 'balanced'; // ูุชูุงุฒู
            }

            return {
                type: dominantType,
                confidence: confidence,
                percentage: dominantPercentage,
                difference: difference,
                scores: { [dim1]: score1, [dim2]: score2 },
                reason: difference < 5 ? 'very_close' : 'clear_preference'
            };
        }

        // ูุธููุฉ ูุณุงุนุฏุฉ ูุงุฎุชูุงุฑ ุงูุชูุถูู ุงูุฃุญุฏุซ ูู ุญุงูุฉ ุงูุชูุงุฒู
        function getRecentPreference(dimensions) {
            const allAnswers = getAllAnswers();
            const recentAnswers = allAnswers.slice(-10); // ุขุฎุฑ 10 ุฅุฌุงุจุงุช

            let counts = {};
            dimensions.forEach(dim => counts[dim] = 0);

            recentAnswers.forEach(answer => {
                if (typeof answer.dimension === 'string' && dimensions.includes(answer.dimension)) {
                    counts[answer.dimension]++;
                } else if (typeof answer.dimension === 'object' || (answer.dimension && answer.dimension.includes(':'))) {
                    // ูุนุงูุฌุฉ ุงูุฅุฌุงุจุงุช ุงููุนูุฏุฉ (ูููุงุณุ ุชุฑุชูุจุ ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ)
                    try {
                        let dimensionScores;
                        if (answer.dimension.includes(':')) {
                            dimensionScores = {};
                            const parts = answer.dimension.split(',');
                            parts.forEach(part => {
                                const [dim, score] = part.split(':');
                                if (dimensions.includes(dim)) {
                                    dimensionScores[dim] = parseInt(score);
                                }
                            });
                        } else {
                            dimensionScores = JSON.parse(answer.dimension);
                        }

                        Object.keys(dimensionScores).forEach(dim => {
                            if (dimensions.includes(dim)) {
                                counts[dim] += dimensionScores[dim];
                            }
                        });
                    } catch (e) {
                        console.log('Could not parse complex dimension');
                    }
                }
            });

            // ุฅุฑุฌุงุน ุงูุจูุนุฏ ุงูุฃุนูู ููุงุทุงู
            return Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
        }

        function calculateConfidenceLevel() {
            const totalQuestions = Object.values(allPathAnswers).reduce((sum, pathAnswers) => sum + pathAnswers.length, 0);

            // ูุดู ุงูุชูุงูุถุงุช
            detectContradictions();

            // ุฌูุน ุฌููุน ุงูุฅุฌุงุจุงุช ูุชุญููู ุฃุนูู
            const allAnswers = getAllAnswers();
            const dimensionWeights = calculateDimensionWeights(allAnswers);

            // ุญุณุงุจ ูุถูุญ ูู ุจูุนุฏ ุจูุงุกู ุนูู ุงูุฃูุฒุงู ุงููุญุณูุฉ
            const dimensions = [
                { name: 'EI', dims: ['E', 'I'] },
                { name: 'SN', dims: ['S', 'N'] },
                { name: 'TF', dims: ['T', 'F'] },
                { name: 'JP', dims: ['J', 'P'] }
            ];

            let totalClarity = 0;
            let validDimensions = 0;
            let dimensionResults = [];

            dimensions.forEach(dim => {
                const result = calculateDimensionType(dim.dims, dimensionWeights);
                if (result.scores) {
                    const total = Object.values(result.scores).reduce((sum, score) => sum + score, 0);
                    if (total > 0) {
                        totalClarity += result.difference;
                        validDimensions++;
                        dimensionResults.push({
                            name: dim.name,
                            clarity: result.difference,
                            confidence: result.confidence,
                            total: total
                        });
                        console.log(`${dim.name}: ูุถูุญ ${result.difference}%, ุซูุฉ: ${result.confidence}`);
                    }
                }
            });

            const avgClarity = validDimensions > 0 ? totalClarity / validDimensions : 0;
            console.log('ูุชูุณุท ุงููุถูุญ ุงููุญุณู:', avgClarity.toFixed(1) + '%');

            // ุญุณุงุจ ูุณุชูู ุงูุซูุฉ ุงููุญุณู ุจูุงุกู ุนูู ุนูุงูู ูุชุนุฏุฏุฉ
            let baseConfidence = 70; // ูุงุนุฏุฉ ุฃูุซุฑ ูุงูุนูุฉ

            // ููุงูุฃุฉ ุงููุถูุญ ุงููุญุณู (ุจูุงุกู ุนูู ุงูุฃูุฒุงู)
            const clarityBonus = Math.min(25, (avgClarity / 100) * 25);

            // ููุงูุฃุฉ ุนุฏุฏ ุงูุฃุณุฆูุฉ ูุน ุญุฏ ุฃูุตู ูุงูุนู
            const questionBonus = Math.min(8, (totalQuestions / 50) * 8);

            // ููุงูุฃุฉ ุฅููุงู ุฌููุน ุงููุณุงุฑุงุช
            const pathCompletionBonus = (completedPaths.length / 5) * 6;

            // ููุงูุฃุฉ ุฌูุฏุฉ ุงูุฅุฌุงุจุงุช (ููุช ููุงุณุจ)
            const timings = allAnswers.map(a => a.timeSpent).filter(t => t > 0);
            let qualityBonus = 0;
            if (timings.length > 0) {
                const avgTime = timings.reduce((sum, t) => sum + t, 0) / timings.length;
                const goodTimingRatio = timings.filter(t => t >= 4 && t <= 30).length / timings.length;
                qualityBonus = goodTimingRatio * 8; // ููุงูุฃุฉ ููุฃููุงุช ุงูููุงุณุจุฉ
            }

            // ููุงูุฃุฉ ุงูุชููุน ูู ุงููุณุงุฑุงุช
            const pathDiversityBonus = completedPaths.length >= 4 ? 3 : 0;

            // ุฎุตู ููุฅุฌุงุจุงุช ุงูุณุฑูุนุฉ ุงูููุฑุทุฉ (ุฃูุซุฑ ุฏูุฉ)
            const quickRatio = totalQuestions > 0 ? quickAnswerCount / totalQuestions : 0;
            const quickAnswerPenalty = Math.min(20, quickRatio * 35);

            // ุฎุตู ููุฃููุงุท ุงูุนุดูุงุฆูุฉ (ุฃูุซุฑ ุตุฑุงูุฉ)
            const randomPatternPenalty = Math.min(15, randomAnswerPattern * 6);

            // ุฎุตู ููุชูุงูุถุงุช (ูุชุฏุฑุฌ)
            const contradictionPenalty = Math.min(18, contradictionFlags.length * 4);

            // ุฎุตู ูุนุฏู ุงูุงุชุณุงู (ูุญุณู)
            const consistencyPenalty = ((100 - consistencyScore) / 100) * 25;

            // ุฎุตู ููุฃุจุนุงุฏ ุบูุฑ ุงููุงุถุญุฉ
            const unclearDimensionsCount = dimensionResults.filter(d => d.clarity < 15).length;
            const unclearPenalty = unclearDimensionsCount * 5;

            // ุญุณุงุจ ุงูุซูุฉ ุงูููุงุฆูุฉ
            const finalConfidence = baseConfidence
                + clarityBonus
                + questionBonus
                + pathCompletionBonus
                + qualityBonus
                + pathDiversityBonus
                - quickAnswerPenalty
                - randomPatternPenalty
                - contradictionPenalty
                - consistencyPenalty
                - unclearPenalty;

            // ุชุทุจูู ุญุฏูุฏ ูุงูุนูุฉ ููุซูุฉ
            let confidence = Math.round(finalConfidence);

            // ุชุทุจูู ููุงุนุฏ ุฅุถุงููุฉ ููุซูุฉ
            if (quickRatio > 0.6) confidence = Math.min(confidence, 75); // ุญุฏ ุฃูุตู ููุฅุฌุงุจุงุช ุงูุณุฑูุนุฉ
            if (contradictionFlags.length > 5) confidence = Math.min(confidence, 70); // ุญุฏ ุฃูุตู ููุชูุงูุถุงุช
            if (avgClarity < 20) confidence = Math.min(confidence, 80); // ุญุฏ ุฃูุตู ูููุถูุญ ุงูููุฎูุถ
            if (totalQuestions < 30) confidence = Math.min(confidence, 85); // ุญุฏ ุฃูุตู ููุฃุณุฆูุฉ ุงูููููุฉ

            confidence = Math.min(98, Math.max(55, confidence)); // ุญุฏูุฏ ููุงุฆูุฉ ูุงูุนูุฉ

            console.log('ุชูุงุตูู ุญุณุงุจ ุงูุซูุฉ ุงููุญุณู:', {
                baseConfidence,
                clarityBonus: clarityBonus.toFixed(1),
                questionBonus: questionBonus.toFixed(1),
                pathCompletionBonus: pathCompletionBonus.toFixed(1),
                qualityBonus: qualityBonus.toFixed(1),
                pathDiversityBonus,
                quickAnswerPenalty: quickAnswerPenalty.toFixed(1),
                randomPatternPenalty: randomPatternPenalty.toFixed(1),
                contradictionPenalty: contradictionPenalty.toFixed(1),
                consistencyPenalty: consistencyPenalty.toFixed(1),
                unclearPenalty,
                finalConfidence: confidence,
                avgClarity: avgClarity.toFixed(1),
                quickRatio: (quickRatio * 100).toFixed(1) + '%'
            });

            return confidence;
        }

        function detectContradictions() {
            contradictionFlags = [];

            // ุฌูุน ุฌููุน ุงูุฅุฌุงุจุงุช ูู ูู ุงููุณุงุฑุงุช
            const allAnswers = [];
            Object.values(allPathAnswers).forEach(pathAnswers => {
                allAnswers.push(...pathAnswers);
            });

            if (allAnswers.length === 0) {
                consistencyScore = 100;
                return;
            }

            // ุชุญููู ุฃููุงุท ุงูุฅุฌุงุจุฉ ููู ุจูุนุฏ
            const dimensionScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            const dimensionCounts = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

            allAnswers.forEach(answer => {
                if (typeof answer.dimension === 'string' && dimensionScores.hasOwnProperty(answer.dimension)) {
                    dimensionScores[answer.dimension]++;
                    dimensionCounts[answer.dimension]++;
                } else if (answer.dimension && (typeof answer.dimension === 'object' || answer.dimension.includes(':'))) {
                    // ูุนุงูุฌุฉ ุงูุฅุฌุงุจุงุช ุงููุนูุฏุฉ
                    try {
                        let dimensionData;
                        if (answer.dimension.includes(':')) {
                            dimensionData = {};
                            const parts = answer.dimension.split(',');
                            parts.forEach(part => {
                                const [dim, score] = part.split(':');
                                if (dimensionScores.hasOwnProperty(dim)) {
                                    dimensionData[dim] = parseInt(score);
                                }
                            });
                        } else {
                            dimensionData = JSON.parse(answer.dimension);
                        }

                        Object.keys(dimensionData).forEach(dim => {
                            if (dimensionScores.hasOwnProperty(dim)) {
                                dimensionScores[dim] += dimensionData[dim];
                                dimensionCounts[dim]++;
                            }
                        });
                    } catch (e) {
                        console.log('Could not parse complex dimension for contradiction detection');
                    }
                }
            });

            // ูุดู ุงูุชูุงูุถุงุช ูู ุงูููุช
            const timings = allAnswers.map(a => a.timeSpent).filter(t => t > 0);
            if (timings.length > 10) {
                const avgTime = timings.reduce((sum, t) => sum + t, 0) / timings.length;
                const stdDev = Math.sqrt(timings.reduce((sum, t) => sum + Math.pow(t - avgTime, 2), 0) / timings.length);

                const veryFast = timings.filter(t => t < 2).length;
                const verySlow = timings.filter(t => t > avgTime + (2 * stdDev)).length;
                const inconsistentTiming = (veryFast + verySlow) / timings.length;

                if (inconsistentTiming > 0.3) { // ุฃูุซุฑ ูู 30% ุฅุฌุงุจุงุช ุบูุฑ ูุชุณูุฉ ุฒูููุงู
                    contradictionFlags.push('timing_inconsistency');
                }
            }

            // ูุดู ุงูุชูุงูุถุงุช ูู ุงูุฃุจุนุงุฏ ุงููุชุถุงุฏุฉ
            const contradictoryPairs = [
                ['E', 'I'], ['S', 'N'], ['T', 'F'], ['J', 'P']
            ];

            contradictoryPairs.forEach(([dim1, dim2]) => {
                const score1 = dimensionScores[dim1];
                const score2 = dimensionScores[dim2];
                const total = score1 + score2;

                if (total > 5) { // ููุท ุฅุฐุง ูุงู ููุงู ุนุฏุฏ ูุงูู ูู ุงูุฅุฌุงุจุงุช
                    const difference = Math.abs(score1 - score2);
                    const ratio = difference / total;

                    // ุฅุฐุง ูุงูุช ุงููุชุงุฆุฌ ูุชูุงุฑุจุฉ ุฌุฏุงู (ุฃูู ูู 10% ูุฑู) ูุน ุนุฏุฏ ูุจูุฑ ูู ุงูุฅุฌุงุจุงุช
                    if (ratio < 0.1 && total > 15) {
                        contradictionFlags.push(`dimension_balance_${dim1}_${dim2}`);
                    }

                    // ูุดู ุงูุชุฐุจุฐุจ ุงูุดุฏูุฏ (ุชุบููุฑ ููุงุฌุฆ ูู ุงูููุท)
                    const recentAnswers = allAnswers.slice(-Math.min(10, Math.floor(allAnswers.length / 2)));
                    let recentDim1 = 0, recentDim2 = 0;

                    recentAnswers.forEach(answer => {
                        if (answer.dimension === dim1) recentDim1++;
                        if (answer.dimension === dim2) recentDim2++;
                    });

                    const recentTotal = recentDim1 + recentDim2;
                    if (recentTotal > 3) {
                        const overallRatio = score1 / (score1 + score2);
                        const recentRatio = recentDim1 / (recentDim1 + recentDim2);

                        if (Math.abs(overallRatio - recentRatio) > 0.4) { // ุชุบููุฑ ูุจูุฑ ูู ุงูููุท
                            contradictionFlags.push(`pattern_shift_${dim1}_${dim2}`);
                        }
                    }
                }
            });

            // ูุดู ุงูุฅุฌุงุจุงุช ุงูุนุดูุงุฆูุฉ ุงููุญุชููุฉ
            if (allAnswers.length > 20) {
                const pathConsistency = {};
                Object.keys(allPathAnswers).forEach(pathNum => {
                    const pathAnswers = allPathAnswers[pathNum];
                    if (pathAnswers.length > 5) {
                        const pathTimings = pathAnswers.map(a => a.timeSpent).filter(t => t > 0);
                        const avgPathTime = pathTimings.reduce((sum, t) => sum + t, 0) / pathTimings.length;
                        const veryQuickInPath = pathTimings.filter(t => t < 3).length;

                        pathConsistency[pathNum] = {
                            avgTime: avgPathTime,
                            quickRatio: veryQuickInPath / pathTimings.length
                        };
                    }
                });

                // ุฅุฐุง ูุงู ููุงู ูุณุงุฑ ูุงุญุฏ ุฃู ุฃูุซุฑ ุจูุณุจุฉ ุฅุฌุงุจุงุช ุณุฑูุนุฉ ุนุงููุฉ
                const suspiciousPaths = Object.values(pathConsistency).filter(p => p.quickRatio > 0.6);
                if (suspiciousPaths.length > 0) {
                    contradictionFlags.push('potential_random_answers');
                }
            }

            // ุญุณุงุจ ููุงุท ุงูุงุชุณุงู ุงููุญุณู
            consistencyScore = 100;

            // ุฎุตู ููุฅุฌุงุจุงุช ุงูุณุฑูุนุฉ ุงูููุฑุทุฉ
            const quickRatio = allAnswers.length > 0 ? quickAnswerCount / allAnswers.length : 0;
            if (quickRatio > 0.3) consistencyScore -= Math.min(25, quickRatio * 50);

            // ุฎุตู ููุฃููุงุท ุงูุนุดูุงุฆูุฉ
            if (randomAnswerPattern > 2) consistencyScore -= Math.min(20, randomAnswerPattern * 8);

            // ุฎุตู ููุชูุงูุถุงุช
            if (contradictionFlags.length > 0) {
                const contradictionPenalty = Math.min(30, contradictionFlags.length * 8);
                consistencyScore -= contradictionPenalty;
            }

            // ููุงูุฃุฉ ููุงุชุณุงู ุงูุฒููู
            if (timings.length > 10) {
                const avgTime = timings.reduce((sum, t) => sum + t, 0) / timings.length;
                const consistentTimings = timings.filter(t => t >= avgTime * 0.5 && t <= avgTime * 2).length;
                const timeConsistencyRatio = consistentTimings / timings.length;

                if (timeConsistencyRatio > 0.7) {
                    consistencyScore += 5; // ููุงูุฃุฉ ุตุบูุฑุฉ ููุงุชุณุงู ุงูุฒููู
                }
            }

            consistencyScore = Math.max(30, Math.min(100, consistencyScore));

            console.log('ุชุญููู ุงูุชูุงูุถุงุช:', {
                contradictionFlags,
                quickRatio: (quickRatio * 100).toFixed(1) + '%',
                randomPatterns: randomAnswerPattern,
                consistencyScore
            });
        }

        function showDimensionsAnalysis() {
            const dimensionsContainer = document.getElementById('dimensionsAnalysis');

            // ุฌูุน ุฌููุน ุงูุฅุฌุงุจุงุช ูุญุณุงุจ ุงูุฃูุฒุงู ุงููุญุณูุฉ
            const allAnswers = getAllAnswers();
            const dimensionWeights = calculateDimensionWeights(allAnswers);

            const dimensions = [
                {
                    name: 'ูุตุฏุฑ ุงูุทุงูุฉ',
                    dims: ['E', 'I'],
                    labels: ['ุงูุจุณุงุท (E)', 'ุงูุทูุงุก (I)'],
                    icon: 'โก'
                },
                {
                    name: 'ุฌูุน ุงููุนูููุงุช',
                    dims: ['S', 'N'],
                    labels: ['ุญุณูู (S)', 'ุญุฏุณู (N)'],
                    icon: '๐'
                },
                {
                    name: 'ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช',
                    dims: ['T', 'F'],
                    labels: ['ุชูููุฑ (T)', 'ุดุนูุฑ (F)'],
                    icon: 'โ๏ธ'
                },
                {
                    name: 'ููุท ุงูุญูุงุฉ',
                    dims: ['J', 'P'],
                    labels: ['ุญูู (J)', 'ุฅุฏุฑุงู (P)'],
                    icon: '๐'
                }
            ];

            dimensionsContainer.innerHTML = dimensions.map((dim, index) => {
                const result = calculateDimensionType(dim.dims, dimensionWeights);
                const [dim1, dim2] = dim.dims;
                const [label1, label2] = dim.labels;

                // ุญุณุงุจ ุงููุณุจ ุงููุฆููุฉ ุจูุงุกู ุนูู ุงูุฃูุฒุงู ุงููุญุณูุฉ
                const score1 = result.scores[dim1];
                const score2 = result.scores[dim2];
                const total = score1 + score2;

                let percent1, percent2, dominant, dominantPercent, confidenceText, confidenceColor;

                if (total > 0) {
                    percent1 = Math.round((score1 / total) * 100);
                    percent2 = 100 - percent1;
                    dominant = percent1 > percent2 ? label1 : percent2 > percent1 ? label2 : 'ูุชูุงุฒู';
                    dominantPercent = Math.max(percent1, percent2);
                } else {
                    percent1 = percent2 = 50;
                    dominant = 'ุบูุฑ ูุญุฏุฏ';
                    dominantPercent = 50;
                }

                // ุชุญุฏูุฏ ููู ููุต ุงูุซูุฉ
                switch (result.confidence) {
                    case 'high':
                        confidenceText = 'ุซูุฉ ุนุงููุฉ';
                        confidenceColor = 'text-green-600 bg-green-100';
                        break;
                    case 'medium':
                        confidenceText = 'ุซูุฉ ูุชูุณุทุฉ';
                        confidenceColor = 'text-blue-600 bg-blue-100';
                        break;
                    case 'low':
                        confidenceText = 'ุซูุฉ ููุฎูุถุฉ';
                        confidenceColor = 'text-yellow-600 bg-yellow-100';
                        break;
                    case 'balanced':
                        confidenceText = 'ูุชูุงุฒู';
                        confidenceColor = 'text-purple-600 bg-purple-100';
                        break;
                    default:
                        confidenceText = 'ุบูุฑ ูุญุฏุฏ';
                        confidenceColor = 'text-gray-600 bg-gray-100';
                }

                // ุชุญุฏูุฏ ููู ุงูุดุฑูุท ุจูุงุกู ุนูู ูุณุชูู ุงููุถูุญ
                let barColorClass;
                if (result.difference >= 40) {
                    barColorClass = 'from-green-500 to-green-600'; // ูุงุถุญ ุฌุฏุงู
                } else if (result.difference >= 20) {
                    barColorClass = 'from-blue-500 to-blue-600'; // ูุงุถุญ
                } else if (result.difference >= 10) {
                    barColorClass = 'from-yellow-500 to-yellow-600'; // ูุชูุณุท
                } else {
                    barColorClass = 'from-gray-500 to-gray-600'; // ูุชูุงุฒู
                }

                return `
                    <div class="bg-white p-5 rounded-lg border-2 border-gray-200 hover:border-blue-300 transition-all duration-300 shadow-sm hover:shadow-md">
                        <div class="flex justify-between items-start mb-3">
                            <div class="flex items-center">
                                <span class="text-xl ml-2">${dim.icon}</span>
                                <h5 class="font-semibold text-gray-800">${dim.name}</h5>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-bold text-gray-800">${dominant}</div>
                                <div class="text-xs ${confidenceColor} px-2 py-1 rounded-full font-medium">${confidenceText}</div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <div class="flex items-center justify-between mb-2 text-sm text-gray-600">
                                <span class="font-medium">${label1}</span>
                                <span class="font-medium">${label2}</span>
                            </div>
                            <div class="w-full bg-blue-200 rounded-full h-4 mb-2 relative overflow-hidden">
                                <div class="bg-gradient-to-r ${barColorClass} h-4 rounded-full transition-all duration-1000 shadow-inner" 
                                     style="width: ${percent1}%"></div>
                                ${result.difference < 10 ? `
                                    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-1 h-4 bg-white opacity-80"></div>
                                ` : ''}
                            </div>
                            <div class="flex justify-between text-xs font-medium">
                                <span class="text-gray-700">${percent1}%</span>
                                <span class="text-gray-700">${percent2}%</span>
                            </div>
                        </div>
                       
                `;
            }).join('');
            console.log("JJJJJJJJJJJJJJJJJJJJJJJ", personality.name, type)
        }

        function showAdvancedAnalytics() {
            // ุงูุฑุณู ุงูุจูุงูู ุงูุทููู ุงููุทูุฑ ูุน ุงููุณุจ ูุงูุดุฑุญ
            const scoresContainer = document.getElementById('scoresChart');
            console.log(scores)

            // ุชุฌููุน ุงูุฃุจุนุงุฏ ูู ุฃุฒูุงุฌ ูุชุถุงุฏุฉ ูุน ูุนูููุงุช ุดุงููุฉ
            const dimensionPairs = [
                {
                    name: 'ูุตุฏุฑ ุงูุทุงูุฉ',
                    icon: 'โก',
                    color: 'blue',
                    dimensions: [
                        {
                            key: 'E',
                            name: 'ุงูุงูุจุณุงุท',
                            fullName: 'ุงูุงูุจุณุงุท (Extraversion)',
                            value: scores.E,
                            description: 'ูุณุชูุฏ ุทุงูุชู ูู ุงูุชูุงุนู ูุน ุงูุนุงูู ุงูุฎุงุฑุฌู ูุงูุฃุดุฎุงุต',
                            characteristics: ['ูุญุจ ุงูููุงุณุจุงุช ุงูุงุฌุชูุงุนูุฉ', 'ูููุฑ ุจุตูุช ุนุงูู', 'ูุดุนุฑ ุจุงูุญูููุฉ ูุน ุงูุขุฎุฑูู', 'ูุจุงุฏุฑ ุจุงูุญุฏูุซ'],
                            gradient: 'from-blue-400 to-blue-600'
                        },
                        {
                            key: 'I',
                            name: 'ุงูุงูุทูุงุก',
                            fullName: 'ุงูุงูุทูุงุก (Introversion)',
                            value: scores.I,
                            description: 'ูุณุชูุฏ ุทุงูุชู ูู ุงูุนุงูู ุงูุฏุงุฎูู ูุงูุชุฃูู ุงูุฐุงุชู',
                            characteristics: ['ููุถู ุงูุฃูุดุทุฉ ุงููุงุฏุฆุฉ', 'ูููุฑ ูุจู ุงูุชุญุฏุซ', 'ูุญุชุงุฌ ููุช ูููุฑุฏ', 'ูุฑูุฒ ุจุนูู'],
                            gradient: 'from-blue-300 to-blue-500'
                        }
                    ]
                },
                {
                    name: 'ุฌูุน ุงููุนูููุงุช',
                    icon: '๐',
                    color: 'green',
                    dimensions: [
                        {
                            key: 'S',
                            name: 'ุงูุญุณูู',
                            fullName: 'ุงูุญุณูู (Sensing)',
                            value: scores.S,
                            description: 'ูุฑูุฒ ุนูู ุงูุญูุงุฆู ูุงูุชูุงุตูู ุงูููููุณุฉ ูุงูุฎุจุฑุฉ ุงูุนูููุฉ',
                            characteristics: ['ูุซู ูู ุงูุฎุจุฑุฉ ุงููุซุจุชุฉ', 'ูุญุจ ุงูุชูุงุตูู ุงูุฏูููุฉ', 'ููุถู ุงูุญููู ุงูุนูููุฉ', 'ูุฑูุฒ ุนูู ุงูุญุงุถุฑ'],
                            gradient: 'from-green-400 to-green-600'
                        },
                        {
                            key: 'N',
                            name: 'ุงูุญุฏุณู',
                            fullName: 'ุงูุญุฏุณู (Intuition)',
                            value: scores.N,
                            description: 'ูุฑูุฒ ุนูู ุงูุฃููุงุท ูุงูุฅููุงููุงุช ุงููุณุชูุจููุฉ ูุงูุฃููุงุฑ ุงููุฌุฑุฏุฉ',
                            characteristics: ['ูุซู ูู ุงูุญุฏุณ', 'ูุญุจ ุงูุฃููุงุฑ ุงูุฌุฏูุฏุฉ', 'ููุถู ุงูุญููู ุงูุฅุจุฏุงุนูุฉ', 'ูุฑูุฒ ุนูู ุงููุณุชูุจู'],
                            gradient: 'from-green-300 to-green-500'
                        }
                    ]
                },
                {
                    name: 'ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช',
                    icon: 'โ๏ธ',
                    color: 'purple',
                    dimensions: [
                        {
                            key: 'T',
                            name: 'ุงูุชูููุฑ',
                            fullName: 'ุงูุชูููุฑ (Thinking)',
                            value: scores.T,
                            description: 'ูุชุฎุฐ ุงููุฑุงุฑุงุช ุจูุงุกู ุนูู ุงูุชุญููู ุงูููุทูู ูุงูููุถูุนูุฉ',
                            characteristics: ['ููุฏุฑ ุงูุนุฏุงูุฉ', 'ูุญูู ุจููุถูุนูุฉ', 'ูุฑูุฒ ุนูู ุงูููุงุกุฉ', 'ููุฏู ุงูููุฏ ุงูุจูุงุก'],
                            gradient: 'from-purple-400 to-purple-600'
                        },
                        {
                            key: 'F',
                            name: 'ุงูุดุนูุฑ',
                            fullName: 'ุงูุดุนูุฑ (Feeling)',
                            value: scores.F,
                            description: 'ูุชุฎุฐ ุงููุฑุงุฑุงุช ุจูุงุกู ุนูู ุงูููู ุงูุดุฎุตูุฉ ูุงูุชุฃุซูุฑ ุนูู ุงูุขุฎุฑูู',
                            characteristics: ['ููุฏุฑ ุงูุงูุณุฌุงู', 'ูุฑุงุนู ุงููุดุงุนุฑ', 'ูุฑูุฒ ุนูู ุงูููู', 'ููุฏู ุงูุฏุนู ุงูุนุงุทูู'],
                            gradient: 'from-purple-300 to-purple-500'
                        }
                    ]
                },
                {
                    name: 'ููุท ุงูุญูุงุฉ',
                    icon: '๐',
                    color: 'pink',
                    dimensions: [
                        {
                            key: 'J',
                            name: 'ุงูุญูู',
                            fullName: 'ุงูุญูู (Judging)',
                            value: scores.J,
                            description: 'ููุถู ุงูุญูุงุฉ ุงูููุธูุฉ ูุงููุฎุทุทุฉ ูุน ูุฑุงุฑุงุช ุณุฑูุนุฉ',
                            characteristics: ['ูุญุจ ุงูุชุฎุทูุท ุงููุณุจู', 'ููุชุฒู ุจุงูููุงุนูุฏ', 'ููุถู ุงูุงุณุชูุฑุงุฑ', 'ูููู ุงูููุงู ูุจูุฑุงู'],
                            gradient: 'from-pink-400 to-pink-600'
                        },
                        {
                            key: 'P',
                            name: 'ุงูุฅุฏุฑุงู',
                            fullName: 'ุงูุฅุฏุฑุงู (Perceiving)',
                            value: scores.P,
                            description: 'ููุถู ุงูุญูุงุฉ ุงููุฑูุฉ ูุงูุนูููุฉ ูุน ุฎูุงุฑุงุช ููุชูุญุฉ',
                            characteristics: ['ูุญุจ ุงููุฑููุฉ', 'ูุชููู ูุน ุงูุชุบููุฑ', 'ููุถู ุงูุนูููุฉ', 'ูุนูู ุชุญุช ุงูุถุบุท'],
                            gradient: 'from-pink-300 to-pink-500'
                        }
                    ]
                }
            ];

            const totalScore = Object.values(scores).reduce((sum, score) => sum + score, 0);

            scoresContainer.innerHTML = `
                <div class="bg-gradient-to-br from-indigo-50 via-white to-purple-50 p-8 rounded-2xl border-2 border-indigo-200 shadow-2xl relative overflow-hidden">
                    <!-- ุฎูููุฉ ูุชุญุฑูุฉ -->
                    <div class="absolute inset-0 opacity-5">
                        <div class="absolute inset-0 bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 animate-pulse"></div>
                    </div>
                    
                    <div class="relative z-10">
                        <h5 class="text-2xl font-bold text-indigo-800 mb-6 text-center flex items-center justify-center">
                            <span class="text-3xl ml-3 animate-bounce">๐</span>
                            ุงูุฑุณู ุงูุจูุงูู ุงูุชูุตููู ููุฃุจุนุงุฏ ุงูุดุฎุตูุฉ
                        </h5>
                        
                        <!-- ูุคุดุฑ ุงูุฃุฏุงุก ุงูุนุงู -->
                        <div class="text-center mb-8">
                            <div class="inline-flex items-center bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-6 py-3 rounded-full shadow-lg">
                                <span class="text-lg font-bold ml-2">๐</span>
                                <span class="text-lg font-bold">ุฅุฌูุงูู ุงูููุงุท: ${totalScore}</span>
                            </div>
                        </div>
                        
                        <!-- ุงูุฑุณู ุงูุจูุงูู ุงูุทููู ููุฃุจุนุงุฏ -->
                        <div class="space-y-8">
                            ${dimensionPairs.map((pair, pairIndex) => {
                const dim1 = pair.dimensions[0];
                const dim2 = pair.dimensions[1];
                const pairTotal = dim1.value + dim2.value;
                const dim1Percentage = pairTotal > 0 ? Math.round((dim1.value / pairTotal) * 100) : 50;
                const dim2Percentage = 100 - dim1Percentage;
                const globalDim1Percentage = totalScore > 0 ? Math.round((dim1.value / totalScore) * 100) : 0;
                const globalDim2Percentage = totalScore > 0 ? Math.round((dim2.value / totalScore) * 100) : 0;

                // ุชุญุฏูุฏ ุงูุจูุนุฏ ุงูููููู
                const dominantDim = dim1.value > dim2.value ? dim1 : dim2.value > dim1.value ? dim2 : null;
                const isDominant = dominantDim !== null;
                const dominanceStrength = isDominant ? Math.abs(dim1Percentage - dim2Percentage) : 0;

                let dominanceLevel = '';
                let dominanceColor = '';
                if (dominanceStrength >= 70) {
                    dominanceLevel = 'ููููู ุจููุฉ';
                    dominanceColor = 'text-green-600 bg-green-100';
                } else if (dominanceStrength >= 50) {
                    dominanceLevel = 'ููููู';
                    dominanceColor = 'text-blue-600 bg-blue-100';
                } else if (dominanceStrength >= 30) {
                    dominanceLevel = 'ููู ุทููู';
                    dominanceColor = 'text-yellow-600 bg-yellow-100';
                } else {
                    dominanceLevel = 'ูุชูุงุฒู';
                    dominanceColor = 'text-purple-600 bg-purple-100';
                }

                return `
                                    <div class="bg-gradient-to-r from-white to-${pair.color}-50 border-2 border-${pair.color}-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-500 transform hover:scale-[1.02]" 
                                         style="animation: slideInFromLeft 0.8s ease-out ${pairIndex * 300}ms both;">
                                        
                                        <!-- ุนููุงู ุงูุจูุนุฏ -->
                                        <div class="flex items-center justify-between mb-6">
                                            <div class="flex items-center">
                                                <span class="text-3xl ml-3">${pair.icon}</span>
                                                <div>
                                                    <h6 class="text-xl font-bold text-${pair.color}-800">${pair.name}</h6>
                                                    <div class="text-sm text-gray-600">ุฅุฌูุงูู ุงูููุงุท: ${pairTotal}</div>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <div class="px-3 py-1 rounded-full text-sm font-bold ${dominanceColor}">
                                                    ${dominanceLevel}
                                                </div>
                                                ${isDominant ? `
                                                    <div class="text-xs text-gray-600 mt-1">
                                                        ${dominantDim.name}: ${dominanceStrength}%
                                                    </div>
                                                ` : ''}
                                            </div>
                                        </div>
                                        
                                        <!-- ุงูุฑุณู ุงูุจูุงูู ุงูุทููู -->
                                        <div class="grid md:grid-cols-2 gap-6">
                                            ${pair.dimensions.map((dim, dimIndex) => {
                    const isFirst = dimIndex === 0;
                    const percentage = isFirst ? dim1Percentage : dim2Percentage;
                    const globalPercentage = isFirst ? globalDim1Percentage : globalDim2Percentage;
                    const maxHeight = 200; // ุงูุญุฏ ุงูุฃูุตู ููุงุฑุชูุงุน ุจุงูุจูุณู
                    const barHeight = Math.max((percentage / 100) * maxHeight, 20);
                    const animationDelay = pairIndex * 300 + dimIndex * 150;

                    return `
                                                    <div class="bg-white rounded-xl p-4 border border-${pair.color}-200 shadow-md hover:shadow-lg transition-all duration-300 group">
                                                        <!-- ูุนูููุงุช ุงูุจูุนุฏ -->
                                                        <div class="text-center mb-4">
                                                            <div class="text-lg font-bold text-${pair.color}-800 mb-1">${dim.fullName}</div>
                                                            <div class="text-sm text-gray-600 leading-relaxed mb-3">${dim.description}</div>
                                                            
                                                            <!-- ุงูููุงุท ูุงููุณุจ -->
                                                            <div class="flex justify-center items-center space-x-4 space-x-reverse mb-4">
                                                                <div class="text-center">
                                                                    <div class="text-2xl font-bold text-${pair.color}-700">${dim.value}</div>
                                                                    <div class="text-xs text-gray-500">ููุทุฉ</div>
                                                                </div>
                                                                <div class="text-center">
                                                                    <div class="text-xl font-bold text-${pair.color}-600">${percentage}%</div>
                                                                    <div class="text-xs text-gray-500">ูู ุงูุจูุนุฏ</div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <!-- ุงูุนููุฏ ุงูุทููู -->
                                                        <div class="flex justify-center mb-4">
                                                            <div class="relative">
                                                                <!-- ุฎูููุฉ ุงูุนููุฏ -->
                                                                <div class="w-16 bg-gray-200 rounded-full relative overflow-hidden shadow-inner" style="height: ${maxHeight}px;">
                                                                    <!-- ุงูุนููุฏ ุงูููููุก -->
                                                                    <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t ${dim.gradient} rounded-full transition-all duration-1500 shadow-lg group-hover:shadow-xl" 
                                                                         style="height: ${barHeight}px;">
                                                                        
                                                                        <!-- ุชุฃุซูุฑุงุช ุจุตุฑูุฉ -->
                                                                        <div class="absolute inset-0 bg-gradient-to-t from-transparent via-white/20 to-white/40 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                                                                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
                                                                        
                                                                        <!-- ููุงุท ูุชุญุฑูุฉ -->
                                                                        <div class="absolute inset-0 opacity-30">
                                                                            <div class="absolute top-2 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full animate-ping" style="animation-delay: ${animationDelay}ms;"></div>
                                                                            <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-white rounded-full animate-ping" style="animation-delay: ${animationDelay + 500}ms;"></div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <!-- ูุคุดุฑ ุงููุณุจุฉ -->
                                                                    <div class="absolute top-2 left-1/2 transform -translate-x-1/2 bg-white text-${pair.color}-800 text-xs font-bold px-2 py-1 rounded-full shadow-md border border-${pair.color}-200 group-hover:bg-${pair.color}-100 transition-all duration-300">
                                                                        ${percentage}%
                                                                    </div>
                                                                </div>
                                                                
                                                                <!-- ูููุงุณ ุฌุงูุจู -->
                                                                <div class="absolute right-full mr-2 top-0 h-full flex flex-col justify-between text-xs text-gray-500">
                                                                    <span>100%</span>
                                                                    <span>75%</span>
                                                                    <span>50%</span>
                                                                    <span>25%</span>
                                                                    <span>0%</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        <!-- ุงูุฎุตุงุฆุต -->
                                                        <div class="bg-${pair.color}-50 rounded-lg p-3">
                                                            <div class="text-sm font-bold text-${pair.color}-800 mb-2">โจ ุงูุฎุตุงุฆุต ุงููููุฒุฉ:</div>
                                                            <ul class="text-xs text-${pair.color}-700 space-y-1">
                                                                ${dim.characteristics.map(char => `
                                                                    <li class="flex items-center">
                                                                        <span class="w-1 h-1 bg-${pair.color}-500 rounded-full ml-2 flex-shrink-0"></span>
                                                                        ${char}
                                                                    </li>
                                                                `).join('')}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                `;
                }).join('')}
                                        </div>
                                        
                                        <!-- ููุงุฑูุฉ ุงูุจูุนุฏูู -->
                                        <div class="mt-6 bg-gradient-to-r from-${pair.color}-100 to-white rounded-xl p-4 border border-${pair.color}-200">
                                            <div class="text-center mb-3">
                                                <div class="text-sm font-bold text-${pair.color}-800 mb-2">๐ ููุงุฑูุฉ ${pair.name}</div>
                                                <div class="flex items-center justify-center space-x-4 space-x-reverse">
                                                    <div class="text-center">
                                                        <div class="font-bold text-${pair.color}-700">${dim1.name}</div>
                                                        <div class="text-lg font-bold text-${pair.color}-600">${dim1Percentage}%</div>
                                                    </div>
                                                    <div class="text-2xl">โ๏ธ</div>
                                                    <div class="text-center">
                                                        <div class="font-bold text-${pair.color}-700">${dim2.name}</div>
                                                        <div class="text-lg font-bold text-${pair.color}-600">${dim2Percentage}%</div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <!-- ุดุฑูุท ุงูููุงุฑูุฉ ุงูุฃููู -->
                                            <div class="relative">
                                                <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden shadow-inner">
                                                    <div class="flex h-full">
                                                        <div class="bg-gradient-to-r ${dim1.gradient} transition-all duration-1500" 
                                                             style="width: ${dim1Percentage}%;"></div>
                                                        <div class="bg-gradient-to-r ${dim2.gradient} transition-all duration-1500" 
                                                             style="width: ${dim2Percentage}%;"></div>
                                                    </div>
                                                </div>
                                                <div class="flex justify-between text-xs text-gray-600 mt-1">
                                                    <span>${dim1.key}: ${dim1.value} ููุทุฉ</span>
                                                    <span>${dim2.key}: ${dim2.value} ููุทุฉ</span>
                                                </div>
                                            </div>
                                            
                                            <!-- ุชูุณูุฑ ุงููุชูุฌุฉ -->
                                            <div class="mt-3 text-center">
                                                ${isDominant ? `
                                                    <div class="text-sm text-${pair.color}-700">
                                                        <strong>ุงููุชูุฌุฉ:</strong> ูุฏูู ููู ูุงุถุญ ูุญู <strong>${dominantDim.name}</strong> 
                                                        ุจูุณุจุฉ <strong>${dominanceStrength}%</strong> ูู ${pair.name}
                                                    </div>
                                                ` : `
                                                    <div class="text-sm text-purple-700">
                                                        <strong>ุงููุชูุฌุฉ:</strong> ูุฏูู ุชูุงุฒู ููุชุงุฒ ูู ${pair.name} 
                                                        ููุง ูููุญู ูุฑููุฉ ูู ุงูุชููู ูุน ุงูููุงูู ุงููุฎุชููุฉ
                                                    </div>
                                                `}
                                            </div>
                                        </div>
                                    </div>
                                `;
            }).join('')}
                        </div>
                        
                        <!-- ููุฎุต ุฅุฌูุงูู -->
                        <div class="mt-8 bg-gradient-to-r from-indigo-100 to-purple-100 border-2 border-indigo-300 rounded-2xl p-6">
                            <h6 class="text-xl font-bold text-indigo-800 mb-4 text-center flex items-center justify-center">
                                <span class="text-2xl ml-2">๐ฏ</span>
                                ุงูููุฎุต ุงูุฅุฌูุงูู ููุฃุจุนุงุฏ
                            </h6>
                            
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="bg-white rounded-xl p-4 shadow-md">
                                    <h7 class="font-bold text-indigo-800 mb-3 flex items-center">
                                        <span class="ml-2">๐</span>
                                        ุงูุฃุจุนุงุฏ ุงููููููุฉ
                                    </h7>
                                    <div class="space-y-2">
                                        ${dimensionPairs.map(pair => {
                const dim1 = pair.dimensions[0];
                const dim2 = pair.dimensions[1];
                const dominant = dim1.value > dim2.value ? dim1 : dim2.value > dim1.value ? dim2 : null;
                const strength = dominant ? Math.abs(dim1.value - dim2.value) : 0;

                return `
                                                <div class="flex justify-between items-center p-2 bg-${pair.color}-50 rounded-lg">
                                                    <span class="text-sm font-medium text-${pair.color}-800">${pair.name}:</span>
                                                    <span class="text-sm font-bold text-${pair.color}-700">
                                                        ${dominant ? `${dominant.name} (+${strength})` : 'ูุชูุงุฒู'}
                                                    </span>
                                                </div>
                                            `;
            }).join('')}
                                    </div>
                                </div>
                                
                                <div class="bg-white rounded-xl p-4 shadow-md">
                                    <h7 class="font-bold text-indigo-800 mb-3 flex items-center">
                                        <span class="ml-2">๐</span>
                                        ุฃุนูู ุงูููุงุท
                                    </h7>
                                    <div class="space-y-2">
                                        ${Object.entries(scores)
                    .sort(([, a], [, b]) => b - a)
                    .slice(0, 4)
                    .map(([key, value], index) => {
                        const dimInfo = dimensionPairs
                            .flatMap(p => p.dimensions)
                            .find(d => d.key === key);
                        const percentage = Math.round((value / totalScore) * 100);
                        const medals = ['๐ฅ', '๐ฅ', '๐ฅ', '๐'];

                        return `
                                                    <div class="flex justify-between items-center p-2 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg">
                                                        <div class="flex items-center">
                                                            <span class="ml-2">${medals[index]}</span>
                                                            <span class="text-sm font-medium text-gray-800">${dimInfo?.name || key}:</span>
                                                        </div>
                                                        <span class="text-sm font-bold text-orange-700">${value} ููุทุฉ (${percentage}%)</span>
                                                    </div>
                                                `;
                    }).join('')}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <style>
                    @keyframes slideInFromLeft {
                        from {
                            opacity: 0;
                            transform: translateX(-50px) scale(0.95);
                        }
                        to {
                            opacity: 1;
                            transform: translateX(0) scale(1);
                        }
                    }
                    
                    @keyframes fillUp {
                        from {
                            height: 0;
                        }
                        to {
                            height: var(--target-height);
                        }
                    }
                    
                    @keyframes expandWidth {
                        from {
                            width: 0%;
                        }
                        to {
                            width: var(--target-width);
                        }
                    }
                </style>
            `;

            // Clarity Chart ูุญุณู - ูุฑุจุนุงุช ูุตุบุฑุฉ ุชุญุช ุงูุฑุณู ุงูุจูุงูู
            const clarityContainer = document.getElementById('clarityChart');
            const dimensions = [
                {
                    name: 'ูุตุฏุฑ ุงูุทุงูุฉ',
                    clarity: Math.abs(scores.E - scores.I),
                    icon: 'โก',
                    dominant: scores.E > scores.I ? 'ุงูุจุณุงุท' : scores.I > scores.E ? 'ุงูุทูุงุก' : 'ูุชูุงุฒู',
                    total: scores.E + scores.I,
                    color: 'blue'
                },
                {
                    name: 'ุฌูุน ุงููุนูููุงุช',
                    clarity: Math.abs(scores.S - scores.N),
                    icon: '๐',
                    dominant: scores.S > scores.N ? 'ุญุณูู' : scores.N > scores.S ? 'ุญุฏุณู' : 'ูุชูุงุฒู',
                    total: scores.S + scores.N,
                    color: 'green'
                },
                {
                    name: 'ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช',
                    clarity: Math.abs(scores.T - scores.F),
                    icon: 'โ๏ธ',
                    dominant: scores.T > scores.F ? 'ุชูููุฑ' : scores.F > scores.T ? 'ุดุนูุฑ' : 'ูุชูุงุฒู',
                    total: scores.T + scores.F,
                    color: 'purple'
                },
                {
                    name: 'ููุท ุงูุญูุงุฉ',
                    clarity: Math.abs(scores.J - scores.P),
                    icon: '๐',
                    dominant: scores.J > scores.P ? 'ุญูู' : scores.P > scores.J ? 'ุฅุฏุฑุงู' : 'ูุชูุงุฒู',
                    total: scores.J + scores.P,
                    color: 'pink'
                }
            ];

            clarityContainer.innerHTML = `
                <div class="bg-gradient-to-br from-purple-50 via-white to-pink-50 p-4 rounded-xl border-2 border-purple-200 shadow-lg">
                    <h5 class="text-lg font-bold text-purple-800 mb-4 text-center flex items-center justify-center">
                        <span class="text-xl ml-2">๐ฏ</span>
                        ูุณุชูู ูุถูุญ ุงูุฃุจุนุงุฏ
                    </h5>
                    
                    <!-- ูุฑุจุนุงุช ุงููุถูุญ ุงููุตุบุฑุฉ ูู ุดุจูุฉ 2x2 -->
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        ${dimensions.map(dim => {
                const actualPercentage = dim.total > 0 ? Math.round((dim.clarity / dim.total) * 100) : 0;

                let clarityLevel, colorClass, bgClass, textClass;

                if (actualPercentage >= 70) {
                    clarityLevel = 'ูุงุถุญ ุฌุฏุงู';
                    colorClass = 'bg-gradient-to-r from-green-500 to-green-600';
                    bgClass = `bg-${dim.color}-50 border-green-300`;
                    textClass = 'text-green-800';
                } else if (actualPercentage >= 50) {
                    clarityLevel = 'ูุงุถุญ';
                    colorClass = 'bg-gradient-to-r from-blue-500 to-blue-600';
                    bgClass = `bg-${dim.color}-50 border-blue-300`;
                    textClass = 'text-blue-800';
                } else if (actualPercentage >= 30) {
                    clarityLevel = 'ูุชูุณุท';
                    colorClass = 'bg-gradient-to-r from-yellow-500 to-yellow-600';
                    bgClass = `bg-${dim.color}-50 border-yellow-300`;
                    textClass = 'text-yellow-800';
                } else {
                    clarityLevel = 'ูุชูุงุฒู';
                    colorClass = 'bg-gradient-to-r from-gray-500 to-gray-600';
                    bgClass = `bg-${dim.color}-50 border-gray-300`;
                    textClass = 'text-gray-800';
                }

                return `
                                <div class="${bgClass} rounded-lg p-3 border-2 hover:shadow-md transition-all duration-300">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center">
                                            <span class="text-lg ml-2">${dim.icon}</span>
                                            <div>
                                                <div class="font-bold text-${dim.color}-800 text-sm">${dim.name}</div>
                                                <div class="text-xs text-gray-600">${dim.dominant}</div>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <div class="font-bold ${textClass} text-sm">${clarityLevel}</div>
                                            <div class="text-xs text-gray-600">${actualPercentage}%</div>
                                        </div>
                                    </div>
                                    
                                    <!-- ุดุฑูุท ุงูุชูุฏู ุงููุตุบุฑ -->
                                    <div class="w-full bg-gray-200 rounded-full h-2 relative overflow-hidden">
                                        <div class="${colorClass} h-2 rounded-full transition-all duration-1000 shadow-inner" 
                                             style="width: ${actualPercentage}%;">
                                        </div>
                                    </div>
                                    
                                    <!-- ูุนูููุงุช ุฅุถุงููุฉ ูุตุบุฑุฉ -->
                                    <div class="flex justify-between items-center text-xs text-gray-500 mt-1">
                                        <span>ูุฑู: ${dim.clarity}</span>
                                        <span>ุฅุฌูุงูู: ${dim.total}</span>
                                    </div>
                                </div>
                            `;
            }).join('')}
                    </div>
                    
                    <!-- ููุฎุต ุนุงู ูุตุบุฑ -->
                    <div class="bg-white rounded-lg p-3 border border-purple-200">
                        <div class="text-center">
                            <div class="text-sm font-bold text-purple-800 mb-2">๐ ูุชูุณุท ุงููุถูุญ ุงูุนุงู</div>
                            <div class="text-lg font-bold text-purple-700">
                                ${Math.round(dimensions.reduce((sum, dim) => {
                const actualPercentage = dim.total > 0 ? (dim.clarity / dim.total) * 100 : 0;
                return sum + actualPercentage;
            }, 0) / dimensions.length)}%
                            </div>
                            <div class="text-xs text-gray-600">ูู ุฌููุน ุงูุฃุจุนุงุฏ ุงูุฃุฑุจุนุฉ</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function showPathPerformance() {
            const pathContainer = document.getElementById('pathPerformance');
            const pathInfo = {
                1: { name: "ุงูุดุงูู", icon: "๐", color: "blue", questions: 24, bgColor: "bg-blue-100", borderColor: "border-blue-300", textColor: "text-blue-800" },
                2: { name: "ุงูุณุฑูุน", icon: "โก", color: "green", questions: 10, bgColor: "bg-green-100", borderColor: "border-green-300", textColor: "text-green-800" },
                3: { name: "ุงูุนูู", icon: "๐ผ", color: "purple", questions: 6, bgColor: "bg-purple-100", borderColor: "border-purple-300", textColor: "text-purple-800" },
                4: { name: "ุงูุนูุงูุงุช", icon: "โค๏ธ", color: "pink", questions: 6, bgColor: "bg-pink-100", borderColor: "border-pink-300", textColor: "text-pink-800" },
                5: { name: "ุงูุชุฃููุฏ", icon: "โ", color: "orange", questions: 4, bgColor: "bg-orange-100", borderColor: "border-orange-300", textColor: "text-orange-800" }
            };

            pathContainer.innerHTML = Object.keys(pathInfo).map(pathNum => {
                const path = pathInfo[pathNum];
                const pathAnswers = allPathAnswers[pathNum] || [];
                const avgTime = pathAnswers.length > 0 ?
                    Math.round(pathAnswers.reduce((sum, q) => sum + q.timeSpent, 0) / pathAnswers.length) : 0;
                const completed = completedPaths.includes(parseInt(pathNum));

                return `
                    <div class="text-center p-3 ${path.bgColor} rounded-lg border-2 ${path.borderColor} hover:shadow-md transition-all duration-300">
                        <div class="text-xl mb-2">${path.icon}</div>
                        <div class="font-bold ${path.textColor} text-sm mb-1">${path.name}</div>
                        <div class="text-xs text-gray-600 mb-2">${path.questions} ุณุคุงู</div>
                        ${completed ? `
                            <div class="text-xs ${path.textColor}">
                                <div class="font-medium bg-white rounded-full px-2 py-1 mb-1">โ ููุชูู</div>
                                <div class="bg-white rounded-full px-2 py-1">ูุชูุณุท: ${avgTime}ุซ</div>
                            </div>
                        ` : `
                            <div class="text-xs text-gray-500 bg-gray-100 rounded-full px-2 py-1">ุบูุฑ ููุชูู</div>
                        `}
                    </div>
                `;
            }).join('');
        }

        function showTimingStatistics() {
            const timingContainer = document.getElementById('timingStats');
            const totalTime = Math.round((endTime) / 1000);
            const totalMinutes = Math.floor(totalTime / 60);
            const totalSeconds = totalTime % 60;

            // ุฌูุน ุฌููุน ุงูุฃููุงุช ูู ูู ุงููุณุงุฑุงุช
            const allTimes = [];
            Object.values(allPathAnswers).forEach(pathAnswers => {
                allTimes.push(...pathAnswers.map(q => ({ ...q, timeSpent: q.timeSpent || 0 })));
            });

            const avgActual = allTimes.length > 0 ? Math.round(allTimes.reduce((sum, q) => sum + q.timeSpent, 0) / allTimes.length) : 0;

            // ุงูุนุซูุฑ ุนูู ุฃุณุฑุน ูุฃุจุทุฃ ุณุคุงู ูุน ุชูุงุตููููุง
            let fastestQ = null;
            let slowestQ = null;

            allTimes.forEach(q => {
                if (q.timeSpent > 0) {
                    if (!fastestQ || q.timeSpent < fastestQ.timeSpent) {
                        fastestQ = q;
                    }
                    if (!slowestQ || q.timeSpent > slowestQ.timeSpent) {
                        slowestQ = q;
                    }
                }
            });

            // ุญุณุงุจ ุฅุญุตุงุฆูุงุช ุฅุถุงููุฉ
            const validTimes = allTimes.filter(q => q.timeSpent > 0).map(q => q.timeSpent);
            const quickAnswers = validTimes.filter(t => t < 3).length;
            const slowAnswers = validTimes.filter(t => t > 30).length;
            const medianTime = validTimes.length > 0 ? validTimes.sort((a, b) => a - b)[Math.floor(validTimes.length / 2)] : 0;

            // ุญุณุงุจ ุงูููุช ููู ูุณุงุฑ
            const pathTimings = {};
            Object.keys(allPathAnswers).forEach(pathNum => {
                const pathAnswers = allPathAnswers[pathNum] || [];
                const pathTotalTime = pathAnswers.reduce((sum, q) => sum + (q.timeSpent || 0), 0);
                const pathAvgTime = pathAnswers.length > 0 ? Math.round(pathTotalTime / pathAnswers.length) : 0;
                pathTimings[pathNum] = {
                    total: pathTotalTime,
                    average: pathAvgTime,
                    questions: pathAnswers.length
                };
            });

            timingContainer.innerHTML = `
                <!-- ุงูุฅุญุตุงุฆูุงุช ุงูุฃุณุงุณูุฉ -->
                <div class="col-span-full">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 mb-6">
                        <h4 class="text-xl font-bold text-blue-800 mb-4 text-center">๐ ุฅุญุตุงุฆูุงุช ุงูููุช ุงูุดุงููุฉ</h4>
                        
                        <div class="grid md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-white p-4 rounded-lg border border-blue-200 text-center">
                                <div class="text-2xl font-bold text-blue-600">${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}</div>
                                <div class="text-sm text-gray-600">ุงูููุช ุงูุฅุฌูุงูู</div>
                                <div class="text-xs text-gray-500 mt-1">${totalTime} ุซุงููุฉ</div>
                            </div>
                            
                            <div class="bg-white p-4 rounded-lg border border-green-200 text-center">
                                <div class="text-2xl font-bold text-green-600">${avgActual}ุซ</div>
                                <div class="text-sm text-gray-600">ูุชูุณุท ุงูููุช</div>
                                <div class="text-xs text-gray-500 mt-1">ููู ุณุคุงู</div>
                            </div>
                            
                            <div class="bg-white p-4 rounded-lg border border-purple-200 text-center">
                                <div class="text-2xl font-bold text-purple-600">${medianTime}ุซ</div>
                                <div class="text-sm text-gray-600">ุงููุณูุท</div>
                                <div class="text-xs text-gray-500 mt-1">ุงููููุฉ ุงููุณุทู</div>
                            </div>
                            
                            <div class="bg-white p-4 rounded-lg border border-orange-200 text-center">
                                <div class="text-2xl font-bold text-orange-600">${allTimes.length}</div>
                                <div class="text-sm text-gray-600">ุฅุฌูุงูู ุงูุฃุณุฆูุฉ</div>
                                <div class="text-xs text-gray-500 mt-1">ุชู ุงูุฅุฌุงุจุฉ ุนูููุง</div>
                            </div>
                        </div>
                        
                        <!-- ุฃุณุฑุน ูุฃุจุทุฃ ุณุคุงู -->
                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-4">
                                <div class="flex items-center mb-3">
                                    <span class="text-2xl ml-2">โก</span>
                                    <h5 class="font-bold text-green-800">ุฃุณุฑุน ุฅุฌุงุจุฉ</h5>
                                </div>
                                ${fastestQ ? `
                                    <div class="space-y-2">
                                        <div class="text-lg font-bold text-green-700">${fastestQ.timeSpent} ุซุงููุฉ</div>
                                        <div class="text-sm text-green-600 bg-white rounded-lg p-2">
                                            <strong>ุงูุณุคุงู:</strong> ${fastestQ.question.substring(0, 50)}...
                                        </div>
                                        <div class="text-xs text-green-500">
                                            ุงููุณุงุฑ ${fastestQ.path} - ุงูุฅุฌุงุจุฉ: "${fastestQ.answer.substring(0, 30)}..."
                                        </div>
                                    </div>
                                ` : `
                                    <div class="text-green-600">ูุง ุชูุฌุฏ ุจูุงูุงุช</div>
                                `}
                            </div>
                            
                            <div class="bg-gradient-to-r from-red-50 to-pink-50 border-2 border-red-200 rounded-lg p-4">
                                <div class="flex items-center mb-3">
                                    <span class="text-2xl ml-2">๐</span>
                                    <h5 class="font-bold text-red-800">ุฃุจุทุฃ ุฅุฌุงุจุฉ</h5>
                                </div>
                                ${slowestQ ? `
                                    <div class="space-y-2">
                                        <div class="text-lg font-bold text-red-700">${slowestQ.timeSpent} ุซุงููุฉ</div>
                                        <div class="text-sm text-red-600 bg-white rounded-lg p-2">
                                            <strong>ุงูุณุคุงู:</strong> ${slowestQ.question.substring(0, 50)}...
                                        </div>
                                        <div class="text-xs text-red-500">
                                            ุงููุณุงุฑ ${slowestQ.path} - ุงูุฅุฌุงุจุฉ: "${slowestQ.answer.substring(0, 30)}..."
                                        </div>
                                    </div>
                                ` : `
                                    <div class="text-red-600">ูุง ุชูุฌุฏ ุจูุงูุงุช</div>
                                `}
                            </div>
                        </div>
                        
                        <!-- ุฅุญุตุงุฆูุงุช ุงูุณุฑุนุฉ -->
                        <div class="bg-white rounded-lg border border-gray-200 p-4 mb-4">
                            <h5 class="font-bold text-gray-800 mb-3">๐ ุชุญููู ุณุฑุนุฉ ุงูุฅุฌุงุจุฉ</h5>
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div class="p-3 bg-red-50 rounded-lg">
                                    <div class="text-lg font-bold text-red-600">${quickAnswers}</div>
                                    <div class="text-xs text-red-500">ุฅุฌุงุจุงุช ุณุฑูุนุฉ</div>
                                    <div class="text-xs text-gray-500">(&lt; 3 ุซูุงูู)</div>
                                </div>
                                <div class="p-3 bg-green-50 rounded-lg">
                                    <div class="text-lg font-bold text-green-600">${validTimes.length - quickAnswers - slowAnswers}</div>
                                    <div class="text-xs text-green-500">ุฅุฌุงุจุงุช ุทุจูุนูุฉ</div>
                                    <div class="text-xs text-gray-500">(3-30 ุซุงููุฉ)</div>
                                </div>
                                <div class="p-3 bg-yellow-50 rounded-lg">
                                    <div class="text-lg font-bold text-yellow-600">${slowAnswers}</div>
                                    <div class="text-xs text-yellow-500">ุฅุฌุงุจุงุช ุจุทูุฆุฉ</div>
                                    <div class="text-xs text-gray-500">(&gt; 30 ุซุงููุฉ)</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ุฃููุงุช ุงููุณุงุฑุงุช -->
                        <div class="bg-white rounded-lg border border-gray-200 p-4">
                            <h5 class="font-bold text-gray-800 mb-3">๐ค๏ธ ุฃููุงุช ุงููุณุงุฑุงุช</h5>
                            <div class="space-y-2">
                                ${Object.keys(pathTimings).map(pathNum => {
                const pathInfo = {
                    1: { name: "ุงููุณุงุฑ ุงูุดุงูู", icon: "๐", color: "blue" },
                    2: { name: "ุงููุณุงุฑ ุงูุณุฑูุน", icon: "โก", color: "green" },
                    3: { name: "ูุณุงุฑ ุงูุนูู", icon: "๐ผ", color: "purple" },
                    4: { name: "ูุณุงุฑ ุงูุนูุงูุงุช", icon: "โค๏ธ", color: "pink" },
                    5: { name: "ูุณุงุฑ ุงูุชุฃููุฏ", icon: "โ", color: "orange" }
                };
                const info = pathInfo[pathNum];
                const timing = pathTimings[pathNum];
                const pathMinutes = Math.floor(timing.total / 60);
                const pathSeconds = timing.total % 60;

                return `
                                        <div class="flex items-center justify-between p-2 bg-${info.color}-50 rounded-lg">
                                            <div class="flex items-center">
                                                <span class="text-lg ml-2">${info.icon}</span>
                                                <span class="font-medium text-${info.color}-800">${info.name}</span>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-sm font-bold text-${info.color}-700">
                                                    ${pathMinutes}:${pathSeconds.toString().padStart(2, '0')} ุฏูููุฉ
                                                </div>
                                                <div class="text-xs text-${info.color}-600">
                                                    ูุชูุณุท: ${timing.average}ุซ | ${timing.questions} ุณุคุงู
                                                </div>
                                            </div>
                                        </div>
                                    `;
            }).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateProgress() {
            const percentage = Math.round(((currentQuestion + 1) / currentQuestions.length) * 100);
            document.getElementById('progressText').textContent = `ุงูุณุคุงู ${currentQuestion + 1} ูู ${currentQuestions.length}`;
            document.getElementById('progressBar').style.width = `${percentage}%`;
        }

        function updatePathIndicator() {
            document.getElementById('currentPathName').textContent = pathNames[currentPath];

            for (let i = 1; i <= 5; i++) {
                const indicator = document.getElementById(`pathIndicator${i}`).querySelector('div');
                if (completedPaths.includes(i)) {
                    indicator.style.width = '100%';
                } else if (i === currentPath) {
                    const percentage = Math.round(((currentQuestion + 1) / currentQuestions.length) * 100);
                    indicator.style.width = `${percentage}%`;
                } else {
                    indicator.style.width = '0%';
                }
            }
        }

        function updateBackButton() {
            const backBtn = document.getElementById('backBtn');
            if (backBtn) {
                // Disable back button on first question of first path
                if (currentPath === 1 && currentQuestion === 0) {
                    backBtn.disabled = true;
                } else {
                    backBtn.disabled = false;
                }
            }
        }




    </script>

    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'98037c92d5f4e8e2',t:'MTc1ODA1ODQ1My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>